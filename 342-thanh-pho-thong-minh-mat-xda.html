<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th√†nh ph·ªë th√¥ng minh M√°t-xƒëa - EduRobot</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <!-- SheetJS for Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #eff6ff;
            --accent: #f59e0b;
            --glass: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.5);
        }

        .hidden {
            display: none !important;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
        }

        .serif-font {
            font-family: 'Merriweather', serif;
        }

        .bg-paper {
            background-color: #fdfbf7;
            background-image: radial-gradient(#e5e7eb 0.5px, transparent 0.5px);
            background-size: 20px 20px;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
        }

        .tab-btn.active {
            color: var(--primary);
            background: white;
            box-shadow: inset 0 -3px 0 var(--primary);
        }

        .tab-content {
            display: none !important;
            animation: slideUp 0.4s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-content.active {
            display: block !important;
        }

        #tab-quiz.active {
            display: flex !important;
        }

        /* Compact Quiz styles */
        #quiz-container {
            height: calc(100vh - 180px);
            max-height: 600px;
        }

        .option-btn {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1.5px solid #e2e8f0;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateX(4px);
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .option-btn.selected {
            border-color: var(--primary);
            background: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        /* Accordion Custom */
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .accordion-open .accordion-content {
            max-height: 500px;
        }

        .accordion-open svg {
            transform: rotate(180deg);
        }

        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(8px);
            z-index: 1000;
            padding: 1rem;
        }

        .modal.active {
            display: flex !important;
            align-items: center;
            justify-content: center;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .reading-content p {
            text-indent: 2rem;
            margin-bottom: 1.5rem;
            text-align: left;
        }

        /* Success Modal Styles */
        .success-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(8px);
            z-index: 200;
            padding: 1rem;
            animation: fadeIn 0.3s ease-out;
        }

        .success-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .success-card {
            transform: scale(0.9);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .success-modal.active .success-card {
            transform: scale(1);
            opacity: 1;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }
    </style>
</head>

<body class="bg-blue-50 text-gray-800">

            <!-- Header -->
    <header class="sticky top-0 z-50 px-4 py-2">
        <nav class="container mx-auto glass-card rounded-xl px-5 py-2 flex justify-between items-center shadow-lg">
            <div class="flex items-center space-x-4">
                <div
                    class="w-10 h-10 bg-blue-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-200 shrink-0">
                    <span class="text-xl font-black">E</span>
                </div>
                <div class="flex flex-col md:flex-row md:items-center md:space-x-6">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl font-black text-blue-700">EduRobot</span>
                        <span
                            class="text-[11px] font-bold px-3 py-1 rounded-full bg-orange-500 text-white shadow-sm shadow-orange-200 tracking-wide whitespace-nowrap">TI·∫æNG
                            VI·ªÜT 5</span>
                    </div>

                    <div class="flex items-center space-x-2 overflow-hidden">
                        <span
                            class="text-[11px] font-black uppercase tracking-widest text-gray-400 whitespace-nowrap">CH·ª¶
                            ƒêI·ªÇM:</span>
                        <span
                            class="text-sm font-black uppercase tracking-wider text-blue-800 truncate max-w-[180px] md:max-w-none">TH·∫æ
                            GI·ªöI C·ª¶A CH√öNG TA</span>
                    </div>
                </div>
            </div>
            <ul class="flex space-x-2 md:space-x-6 text-xs font-bold items-center relative">
                <!-- Home -->
                <li>
                    <a href="index.html"
                        class="flex items-center text-gray-500 hover:text-blue-600 transition-colors py-2">
                        Trang ch·ªß
                    </a>
                </li>

                <!-- Lessons Dropdown -->
                <li class="relative group">
                    <button id="top-menu-lesson-btn"
                        class="flex items-center text-gray-500 hover:text-blue-600 transition-colors focus:outline-none py-2">
                        B√†i h·ªçc
                        <svg class="w-4 h-4 ml-1 transition-transform duration-200" id="top-menu-chevron" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7">
                            </path>
                        </svg>
                    </button>
                    <!-- Dropdown Content (Hidden by default) -->
                    <div id="top-menu-lessons-dropdown"
                        class="absolute top-full right-[-100px] md:right-auto md:left-1/2 md:-translate-x-1/2 mt-4 w-[320px] bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/50 hidden max-h-[70vh] overflow-y-auto z-[60] p-2">
                        <!-- Content rendered by floating-menu.js -->
                    </div>
                </li>

                <!-- Teacher -->
                <li>
                    <button onclick="openTeacherStats()"
                        class="text-gray-500 hover:text-blue-600 transition-colors py-2">
                        Gi√°o vi√™n
                    </button>
                </li>

                <!-- Contact -->
                <li>
                    <a href="#" class="text-gray-500 hover:text-blue-600 transition-colors py-2">
                        Li√™n h·ªá
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-2">
        <div class="glass-card mb-4 rounded-2xl overflow-hidden flex flex-col md:flex-row items-stretch shadow-lg">
            <div class="flex-1 flex bg-white/40">
                <button onclick="switchTab('lesson')" id="btn-lesson"
                    class="tab-btn active flex-1 py-4 text-center font-black text-base text-gray-400 transition-all border-r border-gray-100/50 uppercase tracking-wider">1.
                    B√†i h·ªçc</button>
                <button onclick="switchTab('quiz')" id="btn-quiz"
                    class="tab-btn flex-1 py-4 text-center font-black text-base text-gray-400 transition-all uppercase tracking-wider">2.
                    Luy·ªán t·∫≠p</button>
            </div>
            <div id="audio-container"
                class="p-2 md:px-4 flex items-center bg-blue-50/20 border-t md:border-t-0 md:border-l border-gray-100/50">
                <div
                    class="flex items-center space-x-3 bg-white/60 backdrop-blur-md rounded-xl p-1.5 pr-4 border border-white shadow-inner">
                    <button id="audioControl" onclick="toggleAudio()"
                        class="w-9 h-9 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center text-white hover:scale-105 active:scale-95 transition-all shadow-md shadow-blue-200">
                        <svg id="playIcon" class="w-5 h-5 ml-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M6 4l10 6-10 6V4z"></path>
                        </svg>
                        <svg id="pauseIcon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M6 4h4v16H6zm8 0h4v16h-4z"></path>
                        </svg>
                    </button>
                    <div class="flex flex-col">
                        <span
                            class="text-[9px] font-black text-blue-600 uppercase tracking-widest leading-none mb-0.5 whitespace-nowrap">ƒê·ªåC
                            M·∫™U</span>
                        <span id="audioStatus"
                            class="text-[10px] text-gray-400 font-bold italic leading-none whitespace-nowrap">ƒêang
                            d·ª´ng...</span>
                    </div>
                </div>
                <audio id="lessonAudio">
                    <source src="am_thanh/342-mat-xda.mp3" type="audio/mpeg">
                </audio>
            </div>
        </div>

        <div id="tab-lesson" class="tab-content active">
            <div class="flex flex-col lg:flex-row gap-6">
                <section class="w-full lg:w-[70%]">
                    <div class="glass-card rounded-[40px] p-6 md:p-10 shadow-2xl">
                        <div
                            class="bg-paper rounded-[32px] p-8 md:p-12 shadow-inner border border-white/50 relative overflow-hidden">
                            <h1
                                class="text-4xl font-black mb-12 text-blue-950 text-center uppercase tracking-tighter leading-tight relative">
                                <span
                                    class="bg-blue-600 w-12 h-1.5 absolute -bottom-4 left-1/2 -translate-x-1/2 rounded-full"></span>
                                TH√ÄNH PH·ªê TH√îNG MINH M√ÅT-XƒêA
                            </h1>
                            <div class="serif-font text-gray-800 text-lg leading-relaxed relative reading-content">
                                <p>M√°t-xƒëa l√† m·ªôt ·ªëc ƒë·∫£o n·∫±m gi·ªØa sa m·∫°c, thu·ªôc C√°c Ti·ªÉu v∆∞∆°ng qu·ªëc ·∫¢ R·∫≠p Th·ªëng nh·∫•t
                                    (vi·∫øt t·∫Øt l√† UAE). NƒÉm 2008, UAE kh·ªüi c√¥ng x√¢y d·ª±ng d·ª± √°n ‚ÄúTh√†nh ph·ªë th√¥ng minh
                                    M√°t-xƒëa" nh·∫±m bi·∫øn M√°t-xƒëa tr·ªü th√†nh th√†nh ph·ªë kh√¥ng c√°c-b√¥-n√≠c ƒë·∫ßu ti√™n tr√™n th·∫ø
                                    gi·ªõi.</p>
                                <p>ƒêi·ªÉm nh·∫•n trong thi·∫øt k·∫ø c·ªßa th√†nh ph·ªë l√† nh·ªØng chi·∫øc √¥ h√¨nh hoa h∆∞·ªõng d∆∞∆°ng. Ban
                                    ng√†y, nh·ªØng chi·∫øc √¥ n√†y v·ª´a gi√∫p l∆∞u tr·ªØ nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi v·ª´a l√† nh·ªØng t·∫•m che
                                    n·∫Øng kh·ªïng l·ªì. Ban ƒë√™m, ch√∫ng s·∫Ω kh√©p l·∫°i, to·∫£ nhi·ªát, cung c·∫•p ƒëi·ªán nƒÉng l∆∞·ª£ng m·∫∑t
                                    tr·ªùi cho to√†n th√†nh ph·ªë.</p>
                                <p>ƒê·ªÉ ƒë·ªëi ph√≥ v·ªõi t√¨nh tr·∫°ng n√≥ng l√™n do bi·∫øn ƒë·ªïi kh√≠ h·∫≠u, ·ªü M√°t-xƒëa, c√°c to√† nh√† ƒë∆∞·ª£c
                                    thi·∫øt k·∫ø ch·ª•m l·∫°i v·ªõi nhau, c√≥ l·ªëi ƒëi ·ªü gi·ªØa, gi√∫p kh√¥ng kh√≠ l∆∞u th√¥ng ƒë∆∞·ª£c d·ªÖ d√†ng
                                    v√† gi√∫p gi·∫£m nhi·ªát ƒë·ªô m√πa h√®. Ngo√†i ra, m·ªôt th√°p gi√≥ ƒë∆∞·ª£c x√¢y d·ª±ng nh·∫±m l·∫•y d√≤ng
                                    kh√¥ng kh√≠ tr√™n cao, mang l√†n gi√≥ m√°t m·∫ª v√†o th√†nh ph·ªë, c≈©ng g√≥p ph·∫ßn l√†m gi·∫£m ƒë√°ng
                                    k·ªÉ nhi·ªát ƒë·ªô n∆°i ƒë√¢y so v·ªõi v√πng sa m·∫°c ·ªü xung quanh.</p>
                                <p>C√°c c√¥ng vi√™n v√† khu th∆∞∆°ng m·∫°i ·ªü M√°t-xƒëa ƒë∆∞·ª£c x√¢y d·ª±ng theo m√¥ h√¨nh khu v∆∞·ªùn ·∫¢ R·∫≠p
                                    truy·ªÅn th·ªëng, ng·∫≠p tr√†n m√†u xanh, gi√∫p gi·∫£m thi·ªÉu t·ªëi ƒëa l∆∞·ª£ng kh√≠ th·∫£i. Ch√≠nh quy·ªÅn
                                    th√†nh ph·ªë c≈©ng khuy·∫øn kh√≠ch ng∆∞·ªùi d√¢n ƒëi b·ªô, ƒëi xe ƒë·∫°p ho·∫∑c s·ª≠ d·ª•ng c√°c ph∆∞∆°ng ti·ªán
                                    giao th√¥ng c√¥ng c·ªông ch·∫°y b·∫±ng ƒëi·ªán nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi ƒë·ªÉ b·∫£o v·ªá m√¥i tr∆∞·ªùng.</p>
                                <p>Vi·ªác x√¢y d·ª±ng th√†nh c√¥ng th√†nh ph·ªë th√¥ng minh M√°t-xƒëa ƒë√£ truy·ªÅn c·∫£m h·ª©ng cho m·ªôt s·ªë
                                    d·ª± √°n ph√°t tri·ªÉn nh√† ·ªü Anh, B·ªì ƒê√†o Nha,.... ƒê√¢y s·∫Ω l√† nh·ªØng ƒë√¥ th·ªã sinh th√°i ti·∫øp
                                    theo gi√∫p ngƒÉn ch·∫∑n √¥ nhi·ªÖm m√¥i tr∆∞·ªùng v√† bi·∫øn ƒë·ªïi kh√≠ h·∫≠u.</p>
                                <p class="text-right italic text-base">(L√¢m Anh t·ªïng h·ª£p)</p>
                            </div>
                        </div>
                        <div
                            class="mt-8 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-[32px] p-8 text-white relative overflow-hidden shadow-xl">
                            <div class="flex flex-col md:flex-row items-center gap-8 relative z-10">
                                <div
                                    class="bg-white/20 backdrop-blur-md p-6 rounded-2xl border border-white/30 shadow-lg shrink-0 text-center min-w-[160px]">
                                    <p class="text-[10px] font-black uppercase tracking-[0.2em] text-blue-100 mb-1">
                                        Th√¥ng ƒëi·ªáp</p>
                                    <h3 class="text-2xl font-black uppercase tracking-tight">√ù NGHƒ®A</h3>
                                </div>
                                <div class="flex-grow">
                                    <p class="text-lg font-bold leading-relaxed text-blue-50">Th√†nh ph·ªë th√¥ng minh
                                        M√°t-xƒëa l√† gi·∫£i ph√°p ƒë·ªëi ph√≥ v·ªõi t√¨nh tr·∫°ng n√≥ng l√™n do bi·∫øn ƒë·ªïi kh√≠ h·∫≠u v√† gi√∫p
                                        ngƒÉn ch·∫∑n √¥ nhi·ªÖm m√¥i tr∆∞·ªùng. ƒê√¢y l√† h√¨nh m·∫´u v·ªÅ ƒë√¥ th·ªã sinh th√°i hi·ªán ƒë·∫°i cho
                                        th·∫ø gi·ªõi.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <aside class="w-full lg:w-[30%]">
                    <div class="glass-card rounded-[40px] p-6 sticky top-28 shadow-xl">
                        <div class="mb-6 -mt-2">
                            <img src="hinh_anh/342-mat-xda.png" alt="Minh h·ªça M√°t-xƒëa"
                                class="w-full h-auto rounded-3xl object-contain drop-shadow-xl transform hover:scale-105 transition-transform duration-500">
                        </div>
                        <div class="flex items-center space-x-4 mb-8">
                            <div
                                class="w-12 h-12 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center shadow-lg shadow-amber-200">
                                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                        d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                                    </path>
                                </svg>
                            </div>
                            <h2 class="text-2xl font-black text-gray-800 tracking-tight">T√¨m hi·ªÉu b√†i</h2>
                        </div>
                        <div class="space-y-4">
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group">
                                    <span class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">1.
                                        ƒê·ªãa ƒëi·ªÉm, th·ªùi gian kh·ªüi c√¥ng, m·ª•c ƒë√≠ch c·ªßa d·ª± √°n?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <p class="font-medium"><b>ƒê·ªãa ƒëi·ªÉm:</b> ·ªêc ƒë·∫£o M√°t-xƒëa (UAE). <b>Th·ªùi gian:</b>
                                            NƒÉm 2008. <b>M·ª•c ƒë√≠ch:</b> Bi·∫øn M√°t-xƒëa tr·ªü th√†nh th√†nh ph·ªë kh√¥ng c√°c-b√¥-n√≠c
                                            ƒë·∫ßu ti√™n tr√™n th·∫ø gi·ªõi.</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group">
                                    <span class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">2.
                                        Thi·∫øt k·∫ø t·ª± v·∫≠n h√†nh b·∫±ng nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <p class="font-medium">S·ª≠ d·ª•ng nh·ªØng chi·∫øc √¥ h√¨nh hoa h∆∞·ªõng d∆∞∆°ng kh·ªïng l·ªì. Ban
                                            ng√†y m·ªü ra l∆∞u tr·ªØ nƒÉng l∆∞·ª£ng v√† che n·∫Øng, ban ƒë√™m kh√©p l·∫°i to·∫£ nhi·ªát v√†
                                            cung c·∫•p ƒëi·ªán cho th√†nh ph·ªë.</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group">
                                    <span class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">3.
                                        C√°ch ƒë·ªëi ph√≥ v·ªõi t√¨nh tr·∫°ng n√≥ng l√™n?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <p class="font-medium">C√°c t√≤a nh√† ch·ª•m l·∫°i v·ªõi nhau t·∫°o l·ªëi ƒëi gi√∫p kh√¥ng kh√≠
                                            l∆∞u th√¥ng; x√¢y th√°p gi√≥ ƒë·ªÉ l·∫•y kh√¥ng kh√≠ m√°t tr√™n cao mang v√†o th√†nh ph·ªë.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group">
                                    <span class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">4.
                                        Chi ti·∫øt gi√∫p ngƒÉn ch·∫∑n √¥ nhi·ªÖm m√¥i tr∆∞·ªùng?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <p class="font-medium">C√¥ng vi√™n, khu th∆∞∆°ng m·∫°i ng·∫≠p tr√†n m√†u xanh; khuy·∫øn
                                            kh√≠ch ƒëi b·ªô, xe ƒë·∫°p, ph∆∞∆°ng ti·ªán c√¥ng c·ªông ch·∫°y b·∫±ng ƒëi·ªán m·∫∑t tr·ªùi.</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group">
                                    <span class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">5.
                                        √ù nghƒ©a c·ªßa vi·ªác truy·ªÅn c·∫£m h·ª©ng cho n∆∞·ªõc kh√°c?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <p class="font-medium">M√°t-xƒëa l√† m√¥ h√¨nh ki·ªÉu m·∫´u t·ªët, cho th·∫•y con ng∆∞·ªùi r·∫•t
                                            quan t√¢m ƒë·∫øn vi·ªác x√¢y d·ª±ng th√†nh ph·ªë ch·ªëng bi·∫øn ƒë·ªïi kh√≠ h·∫≠u v√† b·∫£o v·ªá m√¥i
                                            tr∆∞·ªùng.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>

        <div id="tab-quiz" class="tab-content">
            <div
                class="max-w-4xl mx-auto glass-card rounded-[40px] shadow-2xl overflow-hidden flex flex-col min-h-[500px]">
                <div id="quiz-registration" class="p-4 md:p-8 flex-grow flex flex-col justify-center overflow-auto">
                    <div class="text-center mb-6">
                        <div
                            class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white mb-4 shadow-xl shadow-blue-200 mx-auto transform -rotate-3">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                                </path>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-black text-gray-800 mb-1 tracking-tight">ƒêƒÉng k√Ω luy·ªán t·∫≠p</h2>
                        <p class="text-xs text-gray-400 font-bold uppercase tracking-widest">Th√†nh ph·ªë th√¥ng minh
                            M√°t-xƒëa</p>
                    </div>
                    <form onsubmit="startQuiz(event)" class="w-full max-w-sm mx-auto space-y-4">
                        <input type="text" id="studentName" required placeholder="H·ªç v√† t√™n c·ªßa em"
                            class="w-full px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:bg-white focus:outline-none transition-all font-bold shadow-sm">
                        <div class="grid grid-cols-2 gap-4">
                            <select id="studentClass" required
                                class="px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:bg-white focus:outline-none transition-all font-bold text-gray-700 shadow-sm appearance-none cursor-pointer">
                                <option value="">Ch·ªçn L·ªõp</option>
                                <option value="5/1">5/1</option>
                                <option value="5/2">5/2</option>
                                <option value="5/3">5/3</option>
                                <option value="5/4">5/4</option>
                                <option value="5/5">5/5</option>
                            </select>
                            <select id="schoolSelect" required onchange="checkSchool()"
                                class="px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:bg-white focus:outline-none transition-all font-bold text-gray-700 shadow-sm appearance-none cursor-pointer">
                                <option value="Ti·ªÉu h·ªçc ƒê·ªó VƒÉn N·∫°i">TH ƒê·ªó VƒÉn N·∫°i</option>
                                <option value="Kh√°c">Tr∆∞·ªùng kh√°c...</option>
                            </select>
                        </div>
                        <input type="text" id="otherSchool" placeholder="T√™n tr∆∞·ªùng c·ªßa em"
                            class="hidden w-full px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:bg-white transition-all font-bold shadow-sm">
                        <button type="submit"
                            class="w-full bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 text-white font-black py-4 rounded-2xl shadow-xl shadow-blue-200 transition-all active:scale-95 text-base uppercase tracking-wider">B·∫Øt
                            ƒë·∫ßu luy·ªán t·∫≠p</button>
                    </form>
                </div>
                <!-- Quiz/Results logic handled in second chunk -->
                <div id="quiz-container" class="hidden flex-grow flex flex-col"></div>
                <div id="quiz-results"
                    class="hidden p-8 flex-grow flex flex-col items-center justify-center text-center"></div>
            </div>
        </div>
    </main>

    <div id="statsModal" class="modal"></div>
    <div id="successModal" class="success-modal"></div>

    <footer class="py-5 px-4 mt-12 bg-white/30 backdrop-blur-md border-t border-white/50">
        <div class="container mx-auto text-center">
            <p class="text-[10px] font-black text-gray-400 uppercase tracking-[0.3em]">@ 2026 EduRobot - H·ªá th·ªëng h·ªçc
                t·∫≠p th√¥ng minh</p>
            <p class="text-xs font-bold text-blue-600 mt-2">Ph√°t tri·ªÉn b·ªüi L√™ Th√†nh Long</p>
        </div>
    </footer>

    <script>

        function celebrate() {
            confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 }, colors: ['#2563eb', '#f59e0b', '#10b981', '#ef4444'] });
            const audio = document.getElementById('clapSound');
            if (audio) { audio.currentTime = 0; audio.play().catch(e => { }); }
        }

        /* UI LOGIC */
        function toggleAccordion(button) {
            const item = button.parentElement;
            const isOpen = item.classList.contains('accordion-open');
            document.querySelectorAll('.accordion-item').forEach(el => el.classList.remove('accordion-open'));
            if (!isOpen) item.classList.add('accordion-open');
        }

        const audio = document.getElementById('lessonAudio');
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');
        const audioStatus = document.getElementById('audioStatus');

        function toggleAudio() {
            if (audio.paused) {
                audio.play();
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
                audioStatus.innerText = "ƒêang ph√°t...";
                audioStatus.classList.replace('text-gray-400', 'text-green-500');
            } else {
                audio.pause();
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
                audioStatus.innerText = "ƒêang d·ª´ng...";
                audioStatus.classList.replace('text-green-500', 'text-gray-400');
            }
        }
        audio.onended = () => {
            playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden');
            audioStatus.innerText = "ƒêang d·ª´ng..."; audioStatus.classList.replace('text-green-500', 'text-gray-400');
        };

        function switchTab(tabId) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById('btn-' + tabId).classList.add('active');
            document.getElementById('tab-' + tabId).classList.add('active');
        }

        /* QUIZ DATA */
        const allQuestions = [
            { q: "Th√†nh ph·ªë th√¥ng minh M√°t-xƒëa thu·ªôc qu·ªëc gia n√†o?", a: ["·∫¢ R·∫≠p X√™ √öt", "C√°c Ti·ªÉu v∆∞∆°ng qu·ªëc ·∫¢ R·∫≠p Th·ªëng nh·∫•t (UAE)", "Ca-ta", "I-ran"], c: 1 },
            { q: "D·ª± √°n th√†nh ph·ªë M√°t-xƒëa ƒë∆∞·ª£c kh·ªüi c√¥ng v√†o nƒÉm n√†o?", a: ["2000", "2005", "2008", "2010"], c: 2 },
            { q: "M·ª•c ti√™u ch√≠nh c·ªßa d·ª± √°n M√°t-xƒëa l√† g√¨?", a: ["Tr·ªü th√†nh th√†nh ph·ªë gi√†u nh·∫•t th·∫ø gi·ªõi", "Tr·ªü th√†nh th√†nh ph·ªë kh√¥ng c√°c-b√¥-n√≠c ƒë·∫ßu ti√™n tr√™n th·∫ø gi·ªõi", "Tr·ªü th√†nh th√†nh ph·ªë l·ªõn nh·∫•t th·∫ø gi·ªõi", "Tr·ªü th√†nh trung t√¢m du l·ªãch c·ªßa ch√¢u √Å"], c: 1 },
            { q: "ƒêi·ªÉm nh·∫•n trong thi·∫øt k·∫ø c·ªßa th√†nh ph·ªë l√† c√¥ng tr√¨nh c√≥ h√¨nh d·∫°ng g√¨?", a: ["H√¨nh kim t·ª± th√°p", "H√¨nh c√°nh bu·ªìm", "Nh·ªØng chi·∫øc √¥ h√¨nh hoa h∆∞·ªõng d∆∞∆°ng", "H√¨nh nh·ªØng c√¢y c·ªç"], c: 2 },
            { q: "V√†o ban ƒë√™m, nh·ªØng chi·∫øc √¥ kh·ªïng l·ªì c√≥ ch·ª©c nƒÉng g√¨?", a: ["Che m∆∞a", "Chi·∫øu s√°ng b·∫±ng ƒë√®n LED", "Kh√©p l·∫°i, to·∫£ nhi·ªát v√† cung c·∫•p ƒëi·ªán nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi", "M·ªü ra ƒë·ªÉ h·ª©ng s∆∞∆°ng"], c: 2 },
            { q: "ƒê·ªÉ gi·∫£m nhi·ªát ƒë·ªô m√πa h√®, c√°c t√≤a nh√† ·ªü M√°t-xƒëa ƒë∆∞·ª£c b·ªë tr√≠ nh∆∞ th·∫ø n√†o?", a: ["X√¢y c√°ch xa nhau", "Thi·∫øt k·∫ø ch·ª•m l·∫°i v·ªõi nhau, c√≥ l·ªëi ƒëi ·ªü gi·ªØa", "X√¢y ng·∫ßm d∆∞·ªõi l√≤ng ƒë·∫•t", "X√¢y r·∫•t cao ƒë·ªÉ ƒë√≥n gi√≥"], c: 1 },
            { q: "Ch·ª©c nƒÉng c·ªßa 'th√°p gi√≥' ƒë∆∞·ª£c x√¢y d·ª±ng trong th√†nh ph·ªë l√† g√¨?", a: ["ƒê·ªÉ quan s√°t to√†n c·∫£nh th√†nh ph·ªë", "ƒê·ªÉ ph√°t s√≥ng wifi", "L·∫•y d√≤ng kh√¥ng kh√≠ m√°t m·∫ª tr√™n cao mang v√†o th√†nh ph·ªë", "ƒê·ªÉ trang tr√≠"], c: 2 },
            { q: "C√°c c√¥ng vi√™n v√† khu th∆∞∆°ng m·∫°i ·ªü ƒë√¢y ƒë∆∞·ª£c x√¢y d·ª±ng theo m√¥ h√¨nh n√†o?", a: ["Khu v∆∞·ªùn Ch√¢u √Çu", "Khu v∆∞·ªùn ·∫¢ R·∫≠p truy·ªÅn th·ªëng", "Khu r·ª´ng nhi·ªát ƒë·ªõi", "C√¥ng vi√™n n∆∞·ªõc"], c: 1 },
            { q: "Ph∆∞∆°ng ti·ªán giao th√¥ng n√†o KH√îNG ƒë∆∞·ª£c khuy·∫øn kh√≠ch s·ª≠ d·ª•ng t·∫°i M√°t-xƒëa?", a: ["Xe ƒë·∫°p", "ƒêi b·ªô", "Xe √¥ t√¥ ch·∫°y b·∫±ng xƒÉng d·∫ßu", "Ph∆∞∆°ng ti·ªán c√¥ng c·ªông ch·∫°y b·∫±ng ƒëi·ªán m·∫∑t tr·ªùi"], c: 2 },
            { q: "Th√†nh ph·ªë M√°t-xƒëa ƒë∆∞·ª£c v√≠ nh∆∞ c√°i g√¨ n·∫±m gi·ªØa sa m·∫°c?", a: ["M·ªôt vi√™n ng·ªçc", "M·ªôt con t√†u", "M·ªôt ·ªëc ƒë·∫£o", "M·ªôt ng·ªçn n√∫i"], c: 2 },
            { q: "M√°t-xƒëa ƒë√£ truy·ªÅn c·∫£m h·ª©ng cho c√°c d·ª± √°n ph√°t tri·ªÉn nh√† ·ªü nh·ªØng n∆∞·ªõc n√†o?", a: ["M·ªπ v√† Ph√°p", "Anh v√† B·ªì ƒê√†o Nha", "Nh·∫≠t B·∫£n v√† H√†n Qu·ªëc", "ƒê·ª©c v√† √ù"], c: 1 },
            { q: "V√¨ sao g·ªçi M√°t-xƒëa l√† 'th√†nh ph·ªë th√¥ng minh'?", a: ["V√¨ c∆∞ d√¢n ·ªü ƒë√¢y r·∫•t th√¥ng minh", "V√¨ c√≥ nhi·ªÅu tr∆∞·ªùng ƒë·∫°i h·ªçc", "S·ª≠ d·ª•ng c√¥ng ngh·ªá ti√™n ti·∫øn ƒë·ªÉ t·ª± v·∫≠n h√†nh nƒÉng l∆∞·ª£ng v√† b·∫£o v·ªá m√¥i tr∆∞·ªùng", "V√¨ c√≥ nhi·ªÅu m√°y t√≠nh"], c: 2 },
            { q: "Vi·ªác c√°c t√≤a nh√† ch·ª•m l·∫°i v·ªõi nhau c√≥ t√°c d·ª•ng g√¨ v·ªÅ m·∫∑t kh√¥ng kh√≠?", a: ["NgƒÉn c·∫£n gi√≥ b√£o", "Gi√∫p kh√¥ng kh√≠ l∆∞u th√¥ng d·ªÖ d√†ng", "Gi·ªØ nhi·ªát ƒë·ªô ·∫•m √°p", "T·∫°o ra s∆∞∆°ng m√π"], c: 1 },
            { q: "NƒÉng l∆∞·ª£ng ch√≠nh ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ v·∫≠n h√†nh th√†nh ph·ªë l√† g√¨?", a: ["NƒÉng l∆∞·ª£ng gi√≥", "NƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi", "NƒÉng l∆∞·ª£ng h·∫°t nh√¢n", "NƒÉng l∆∞·ª£ng th·ªßy ƒëi·ªán"], c: 1 },
            { q: "N·ªôi dung ch√≠nh c·ªßa b√†i ƒë·ªçc l√† g√¨?", a: ["Gi·ªõi thi·ªáu v·ªÅ v·∫ª ƒë·∫πp c·ªßa sa m·∫°c", "Qu·∫£ng c√°o du l·ªãch cho UAE", "Gi·ªõi thi·ªáu v·ªÅ th√†nh ph·ªë th√¥ng minh M√°t-xƒëa - gi·∫£i ph√°p ch·ªëng bi·∫øn ƒë·ªïi kh√≠ h·∫≠u", "C√°ch x√¢y d·ª±ng nh√† ·ªü sa m·∫°c"], c: 2 }
        ];

        /* QUIZ ENGINE & STATS (REMAINING LOGIC) */
        // ... (The rest of the JS will be added via multi_replace if needed, but for now I'll try to fit the core here)
        let selectedQuestions = []; let currentIdx = 0; let score = 0; let studentData = {}; let startTime = null;
        function checkSchool() { const select = document.getElementById('schoolSelect'); const other = document.getElementById('otherSchool'); if (select.value === 'Kh√°c') { other.classList.remove('hidden'); other.required = true; } else { other.classList.add('hidden'); other.required = false; } }
        function shuffle(array) { let currentIndex = array.length, randomIndex; while (currentIndex != 0) { randomIndex = Math.floor(Math.random() * currentIndex); currentIndex--;[array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]]; } return array; }

        function startQuiz(e) {
            e.preventDefault();
            studentData = { studentName: document.getElementById('studentName').value, studentClass: document.getElementById('studentClass').value, school: document.getElementById('schoolSelect').value === 'Kh√°c' ? document.getElementById('otherSchool').value : document.getElementById('schoolSelect').value };
            selectedQuestions = shuffle([...allQuestions]).slice(0, 5); currentIdx = 0; score = 0; startTime = new Date();
            document.getElementById('quiz-registration').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = selectedQuestions[currentIdx];
            const container = document.getElementById('quiz-container');
            container.innerHTML = `
                <div class="bg-blue-600/5 px-6 py-4 flex justify-between items-center border-b border-blue-100">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center font-black mr-4 shadow-lg shadow-blue-200">${currentIdx + 1}</div>
                        <div class="flex flex-col">
                            <span class="text-[10px] font-black text-blue-600 uppercase tracking-widest leading-none mb-1">C√ÇU TR·∫ÆC NGHI·ªÜM: ${currentIdx + 1}/5</span>
                            <span class="text-xs text-gray-400 font-bold leading-none">M√°t-xƒëa</span>
                        </div>
                    </div>
                </div>
                <div class="p-6 flex-grow flex flex-col justify-center overflow-auto">
                    <h3 class="text-xl md:text-2xl font-black text-gray-800 mb-6 leading-tight">${q.q}</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3" id="optionsArea"></div>
                </div>
                <div class="px-6 py-4 border-t border-gray-50 flex justify-between items-center bg-gray-50/50">
                    <span class="text-xs font-bold text-gray-400 italic">* Ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t</span>
                    <button id="nextBtn" disabled class="bg-blue-600 disabled:opacity-30 hover:bg-blue-700 text-white font-black py-3 px-10 rounded-2xl shadow-lg shadow-blue-100 transition-all active:scale-95 uppercase text-sm tracking-widest">C√¢u ti·∫øp theo</button>
                </div>
            `;
            const area = document.getElementById('optionsArea');
            q.a.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full p-4 text-left bg-white rounded-2xl font-bold flex items-center group shadow-sm";
                btn.innerHTML = `<div class="w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center mr-4 group-hover:bg-blue-600 group-hover:text-white transition-all text-xs font-black shadow-inner">${String.fromCharCode(65 + i)}</div><span class="flex-1 text-sm md:text-base text-gray-700">${opt}</span>`;
                btn.onclick = () => {
                    const currentQ = selectedQuestions[currentIdx];
                    const isCorrect = i === currentQ.c;
                    const feedback = document.getElementById('quiz-feedback');
                    document.querySelectorAll('#optionsArea button').forEach(b => b.disabled = true);
                    if (isCorrect) {
                        btn.classList.add('bg-green-50', 'border-green-500');
                        btn.querySelector('div, span').classList.add('bg-green-600', 'text-white');
                        if (feedback) { feedback.innerText = "CH√çNH X√ÅC! üéâ"; feedback.classList.add('text-green-600'); }
                        score += 20;
                    } else {
                        btn.classList.add('bg-red-50', 'border-red-500');
                        btn.querySelector('div, span').classList.add('bg-red-600', 'text-white');
                        if (feedback) { feedback.innerText = "SAI R·ªíI! ‚ùå"; feedback.classList.add('text-red-600'); }
                        const correctBtn = document.querySelectorAll('#optionsArea button')[currentQ.c];
                        if (correctBtn) correctBtn.classList.add('bg-green-50', 'border-green-500');
                    }
                    if (feedback) feedback.style.opacity = '1';
                    setTimeout(() => {
                        currentIdx++;
                        (currentIdx < 5) ? showQuestion() : showResults();
                    }, 1000);
                };;;
                area.appendChild(btn);
            });
            document.getElementById('nextBtn').onclick = () => {
                if (parseInt(document.getElementById('nextBtn').dataset.selected) === q.c) score += 20;
                currentIdx++; if (currentIdx < 5) showQuestion(); else showResults();
            };
        }

        function showResults() {
            document.getElementById('quiz-container').classList.add('hidden');
            const results = document.getElementById('quiz-results');
            results.classList.remove('hidden');
            results.innerHTML = `
                <div class="relative w-40 h-40 mb-8 mx-auto">
                    <svg class="w-full h-full transform -rotate-90"><circle cx="80" cy="80" r="74" stroke="#f3f4f6" stroke-width="12" fill="transparent" /><circle id="scoreCircle" cx="80" cy="80" r="74" stroke="#3b82f6" stroke-width="12" fill="transparent" style="stroke-dasharray: ${(score / 100) * 465}, 465" stroke-linecap="round" /></svg>
                    <div class="absolute inset-0 flex flex-col items-center justify-center"><span class="text-5xl font-black text-gray-800">${score}</span><span class="text-[10px] text-gray-400 font-black uppercase tracking-[0.2em] mt-1">ƒêi·ªÉm s·ªë</span></div>
                </div>
                <h2 class="text-3xl font-black text-gray-800 mb-2">${score >= 80 ? 'R·∫•t tuy·ªát v·ªùi!' : score >= 60 ? 'L√†m t·ªët l·∫Øm!' : 'C·ªë g·∫Øng l√™n!'}</h2>
                <p class="text-gray-500 mb-10 max-w-sm font-bold mx-auto">${score >= 80 ? 'Em ƒë√£ ho√†n th√†nh b√†i t·∫≠p xu·∫•t s·∫Øc.' : 'H√£y n·ªó l·ª±c h∆°n ·ªü l·∫ßn sau nh√©!'}</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-md mx-auto">
                    <button onclick="location.reload()" class="bg-white hover:bg-gray-50 text-gray-700 font-black py-4 rounded-2xl border-2 border-gray-100 transition-all shadow-sm">L√ÄM L·∫†I</button>
                    <button id="submitBtn" onclick="submitResults(this)" class="bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 text-white font-black py-4 rounded-2xl shadow-xl shadow-blue-100 transition-all">N·ªòP K·∫æT QU·∫¢</button>
                </div>
            `;
        }

        /* FIREBASE & EXCEL (Simplified to fit) */
        const firebaseConfig = { apiKey: "AIzaSyC6zlWn8BKYU7P6A2-PYq6IIWOzaqJWFhc", authDomain: "gamhoctap.firebaseapp.com", projectId: "gamhoctap", storageBucket: "gamhoctap.firebasestorage.app", messagingSenderId: "833329613932", appId: "1:833329613932:web:0d8574827bcfe50b535c49" };
        firebase.initializeApp(firebaseConfig); const db = firebase.firestore();

        async function submitResults(btn) {
            btn.disabled = true; btn.innerText = "ƒêang g·ª≠i...";
            const duration = Math.floor((new Date() - startTime) / 1000);
            try {
                await db.collection("diem_tieng_viet_lop5").add({ ...studentData, lessonTitle: "Th√†nh ph·ªë th√¥ng minh M√°t-xƒëa", score: score, duration: duration, timeDisplay: `${Math.floor(duration / 60)}p ${duration % 60}s`, submittedAt: firebase.firestore.FieldValue.serverTimestamp() });
                alert("N·ªôp b√†i th√†nh c√¥ng!"); location.reload();
            } catch (err) { alert("L·ªói g·ª≠i b√†i!"); btn.disabled = false; btn.innerText = "N·ªòP K·∫æT QU·∫¢"; }
        }

        function openTeacherStats() { const pin = prompt("M√£ PIN:"); if (pin === "dvn") loadStats(); }
        async function loadStats() {
            const snap = await db.collection("diem_tieng_viet_lop5").where("lessonTitle", "==", "Th√†nh ph·ªë th√¥ng minh M√°t-xƒëa").get();
            let msg = "K·∫æT QU·∫¢ H·ªåC SINH:\n";
            snap.forEach(doc => { const d = doc.data(); msg += `${d.studentName} - ${d.studentClass}: ${d.score}ƒë\n`; });
            alert(msg);
        }
    </script>
    <audio id="clapSound" src="https://www.soundjay.com/human/applause-01.mp3" preload="auto"></audio>
    <script src="js/floating-menu.js"></script>
</body>

</html>