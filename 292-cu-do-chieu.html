<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>292. Cụ Đồ Chiểu - EduRobot</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <!-- SheetJS for Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #eff6ff;
            --accent: #f59e0b;
            --glass: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.5);
        }

        .hidden {
            display: none !important;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
        }

        .serif-font {
            font-family: 'Merriweather', serif;
        }

        .bg-paper {
            background-color: #fdfbf7;
            background-image: radial-gradient(#e5e7eb 0.5px, transparent 0.5px);
            background-size: 20px 20px;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
        }

        .tab-btn.active {
            color: var(--primary);
            background: white;
            box-shadow: inset 0 -3px 0 var(--primary);
        }

        .tab-content {
            display: none !important;
            animation: slideUp 0.4s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-content.active {
            display: block !important;
        }

        #tab-quiz.active {
            display: flex !important;
        }

        /* Compact Quiz styles */
        #quiz-container {
            height: calc(100vh - 180px);
            max-height: 600px;
        }

        .option-btn {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1.5px solid #e2e8f0;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateX(4px);
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .option-btn.selected {
            border-color: var(--primary);
            background: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .accordion-open .accordion-content {
            max-height: 500px;
        }

        .accordion-open svg {
            transform: rotate(180deg);
        }

        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(8px);
            z-index: 1000;
            padding: 1rem;
        }

        .modal.active {
            display: flex !important;
            align-items: center;
            justify-content: center;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .reading-content p {
            text-indent: 2rem;
            margin-bottom: 1.5rem;
            text-align: justify;
        }

        .success-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(8px);
            z-index: 200;
            padding: 1rem;
            animation: fadeIn 0.3s ease-out;
        }

        .success-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .success-card {
            transform: scale(0.9);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .success-modal.active .success-card {
            transform: scale(1);
            opacity: 1;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }
    </style>
</head>

<body class="bg-blue-50 text-gray-800">

    <!-- Header -->
    <header class="sticky top-0 z-50 px-4 py-2">
        <nav class="container mx-auto glass-card rounded-xl px-5 py-2 flex justify-between items-center shadow-lg">
            <div class="flex items-center space-x-4">
                <div
                    class="w-10 h-10 bg-blue-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-200 shrink-0">
                    <span class="text-xl font-black">E</span>
                </div>
                <div class="flex flex-col md:flex-row md:items-center md:space-x-6">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl font-black text-blue-700">EduRobot</span>
                        <span
                            class="text-[11px] font-bold px-3 py-1 rounded-full bg-orange-500 text-white shadow-sm shadow-orange-200 tracking-wide whitespace-nowrap">TIẾNG
                            VIỆT 5</span>
                    </div>

                    <div class="flex items-center space-x-2 overflow-hidden">
                        <span
                            class="text-[11px] font-black uppercase tracking-widest text-gray-400 whitespace-nowrap">CHỦ
                            ĐIỂM:</span>
                        <span
                            class="text-sm font-black uppercase tracking-wider text-blue-800 truncate max-w-[180px] md:max-w-none">TIẾP
                            BƯỚC CHA ÔNG</span>
                    </div>
                </div>
            </div>
            <ul class="flex space-x-2 md:space-x-6 text-xs font-bold items-center relative">
                <li><a href="index.html"
                        class="flex items-center text-gray-500 hover:text-blue-600 transition-colors py-2">Trang chủ</a>
                </li>
                <li class="relative group">
                    <button id="top-menu-lesson-btn"
                        class="flex items-center text-gray-500 hover:text-blue-600 transition-colors py-2">
                        Bài học
                        <svg class="w-4 h-4 ml-1 transition-transform duration-200" id="top-menu-chevron" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7">
                            </path>
                        </svg>
                    </button>
                    <div id="top-menu-lessons-dropdown"
                        class="absolute top-full right-[-100px] md:right-auto md:left-1/2 md:-translate-x-1/2 mt-4 w-[320px] bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/50 hidden max-h-[70vh] overflow-y-auto z-[60] p-2">
                    </div>
                </li>
                <li><button onclick="openTeacherStats()"
                        class="text-gray-500 hover:text-blue-600 transition-colors py-2">Giáo viên</button></li>
                <li><a href="#" class="text-gray-500 hover:text-blue-600 transition-colors py-2">Liên hệ</a></li>
            </ul>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-2">

        <!-- Tab & Audio Header -->
        <div class="glass-card mb-4 rounded-2xl overflow-hidden flex flex-col md:flex-row items-stretch shadow-lg">
            <div class="flex-1 flex bg-white/40">
                <button onclick="switchTab('lesson')" id="btn-lesson"
                    class="tab-btn active flex-1 py-4 text-center font-black text-base text-gray-400 transition-all border-r border-gray-100/50 uppercase tracking-wider">1.
                    Bài học</button>
                <button onclick="switchTab('quiz')" id="btn-quiz"
                    class="tab-btn flex-1 py-4 text-center font-black text-base text-gray-400 transition-all uppercase tracking-wider">2.
                    Luyện tập</button>
            </div>

            <div id="audio-container"
                class="p-2 md:px-4 flex items-center bg-blue-50/20 border-t md:border-t-0 md:border-l border-gray-100/50">
                <div
                    class="flex items-center space-x-3 bg-white/60 backdrop-blur-md rounded-xl p-1.5 pr-4 border border-white shadow-inner">
                    <button id="audioControl" onclick="toggleAudio()"
                        class="w-9 h-9 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center text-white hover:scale-105 active:scale-95 transition-all shadow-md shadow-blue-200">
                        <svg id="playIcon" class="w-5 h-5 ml-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M6 4l10 6-10 6V4z"></path>
                        </svg>
                        <svg id="pauseIcon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M6 4h4v16H6zm8 0h4v16h-4z"></path>
                        </svg>
                    </button>
                    <div class="flex flex-col">
                        <span
                            class="text-[9px] font-black text-blue-600 uppercase tracking-widest leading-none mb-0.5 whitespace-nowrap">ĐỌC
                            MẪU</span>
                        <span id="audioStatus"
                            class="text-[10px] text-gray-400 font-bold italic leading-none whitespace-nowrap">Đang
                            dừng...</span>
                    </div>
                </div>
                <audio id="lessonAudio">
                    <source src="am_thanh/dochieu.mp3" type="audio/mpeg">
                </audio>
            </div>
        </div>

        <!-- TAB 1: BÀI HỌC -->
        <div id="tab-lesson" class="tab-content active">
            <div class="flex flex-col lg:flex-row gap-6">
                <section class="w-full lg:w-[70%]">
                    <div class="glass-card rounded-[40px] p-6 md:p-10 shadow-2xl">
                        <div
                            class="bg-paper rounded-[32px] p-8 md:p-12 shadow-inner border border-white/50 relative overflow-hidden">
                            <h1
                                class="text-4xl font-black mb-12 text-blue-950 text-center uppercase tracking-tighter leading-tight relative">
                                <span
                                    class="bg-blue-600 w-12 h-1.5 absolute -bottom-4 left-1/2 -translate-x-1/2 rounded-full"></span>
                                Cụ Đồ Chiểu
                            </h1>

                            <div class="serif-font text-gray-800 text-lg leading-relaxed relative reading-content">
                                <p>Nguyễn Đình Chiểu (1822 – 1888) sinh ra trong một gia đình nhà nho ở làng Tân Thới,
                                    huyện Bình Dương, phủ Tân Bình, tỉnh Gia Định (nay là Thành phố Hồ Chí Minh).</p>
                                <p>Năm 1833, do cuộc binh biến trong triều đình, cha bị mất chức, gia đình li tán, cậu
                                    bé Chiểu mới mười hai tuổi đã phải xa cha mẹ, ra Huế ở nhờ nhà một người bạn của cha
                                    để ăn học.</p>
                                <p>Năm 1843, Nguyễn Đình Chiểu trở về quê mẹ, đỗ tú tài tại trường thi Gia Định. Hai năm
                                    sau, ông lại trở ra Huế học tập, chờ kì thi năm Kỷ Dậu, 1849. Nhưng cuối năm 1848,
                                    mẹ mất, Nguyễn Đình Chiểu phải bỏ thi về Nam chịu tang mẹ. Trên đường về, ông bị ốm
                                    nặng, mù cả hai mắt, chạy chữa mãi không khỏi. Cuối năm 1849, Nguyễn Đình Chiểu mới
                                    về đến Gia Định “lỡ bề báo hiếu, lỡ đường lập thân”.</p>
                                <p>Không gục ngã trước những thử thách nặng nề liên tiếp của số phận, sau thời gian chịu
                                    tang mẹ, ông mở trường dạy học và làm thuốc chữa bệnh cho dân. Học trò gần xa nghe
                                    danh, mến đức xin học rất đông. Tiếng thơ chan chứa tinh thần nghĩa hiệp của Đồ
                                    Chiểu cũng bắt đầu vang khắp miền Lục tỉnh.</p>
                                <p>Năm 1858, giặc Pháp xâm lược nước ta. Nguyễn Đình Chiểu cùng các lãnh tụ nghĩa quân
                                    bàn mưu tính kế đánh giặc. Ông sáng tác thơ văn bày tỏ niềm tiếc thương, cảm phục
                                    đối với những người đã hi sinh vì đất nước; khích lệ mạnh mẽ tinh thần chiến đấu của
                                    nhân dân. Trái tim nhân hậu của ông luôn gắn bó sắt son với vận mệnh của đất nước.
                                    Ông được nhân dân Lục tỉnh gọi bằng cái tên trìu mến “cụ Đỗ Chiểu” như một cách tri
                                    ân với người thầy đáng kính của “lòng dân”.</p>
                            </div>
                        </div>

                        <div
                            class="mt-8 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-[32px] p-8 text-white shadow-xl">
                            <div class="flex flex-col md:flex-row items-center gap-8 relative z-10">
                                <div
                                    class="bg-white/20 backdrop-blur-md p-6 rounded-2xl border border-white/30 shadow-lg shrink-0 text-center min-w-[160px]">
                                    <p class="text-[10px] font-black uppercase tracking-[0.2em] text-blue-100 mb-1">
                                        Thông điệp</p>
                                    <h3 class="text-2xl font-black uppercase tracking-tight">Ý NGHĨA</h3>
                                </div>
                                <div class="flex-grow">
                                    <p class="text-lg font-bold leading-relaxed text-blue-50">
                                        Bài đọc ca ngợi cụ Nguyễn Đình Chiểu – người đã nêu cao nghị lực phi thường vượt
                                        lên số phận. Đồng thời bày tỏ niềm khâm phục trước tấm lòng nhân hậu, hết lòng
                                        bảo vệ chính nghĩa, tinh thần yêu nước và sự gắn bó sắt son với dân, với nước
                                        của cụ Đồ Chiểu.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <aside class="w-full lg:w-[30%]">
                    <div class="glass-card rounded-[40px] p-6 sticky top-28 shadow-xl border-amber-100/50">
                        <div class="mb-6 -mt-2"><img src="hinh_anh/292-dochieu-digital.png" alt="Minh họa"
                                class="w-full h-auto rounded-3xl object-contain drop-shadow-xl transform hover:scale-105 transition-transform duration-500">
                        </div>
                        <div class="flex items-center space-x-4 mb-8">
                            <div
                                class="w-12 h-12 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center shadow-lg shadow-amber-200">
                                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                        d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                                    </path>
                                </svg>
                            </div>
                            <h2 class="text-2xl font-black text-gray-800 tracking-tight">Tìm hiểu bài</h2>
                        </div>
                        <div class="space-y-4">
                            <!-- Questions and Answers -->
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm transition-all hover:shadow-md overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group"><span
                                        class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">1.
                                        Hãy giới thiệu đôi nét về tiểu sử Nguyễn Đình Chiểu.</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg></div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <div class="flex items-center space-x-2 mb-2"><span
                                                class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span
                                                class="text-[11px] font-black uppercase tracking-widest text-green-600">Gợi
                                                ý trả lời</span></div>
                                        <p class="font-medium">Nguyễn Đình Chiểu (1822 – 1888) sinh ra trong một gia
                                            đình nhà nho ở làng Tân Thới, tỉnh Gia Định. Ông có chặng đường học hành
                                            gian nan: năm 12 tuổi phải xa cha mẹ ra Huế ăn học; năm 1843 đỗ Tú tài; năm
                                            1849 chuẩn bị thi tiếp thì phải bỏ dở về chịu tang mẹ.</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm transition-all hover:shadow-md overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group"><span
                                        class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">2.
                                        Nguyễn Đình Chiểu đã gặp những biến cố đau thương nào trong cuộc đời?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg></div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <div class="flex items-center space-x-2 mb-2"><span
                                                class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span
                                                class="text-[11px] font-black uppercase tracking-widest text-green-600">Gợi
                                                ý trả lời</span></div>
                                        <p class="font-medium">Biến cố lớn nhất là khi đang chờ thi thì mẹ mất. Trên
                                            đường về chịu tang, ông bị ốm nặng dẫn đến mù cả hai mắt, công danh dở dang
                                            ("lỡ bề báo hiếu, lỡ đường lập thân").</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm transition-all hover:shadow-md overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group"><span
                                        class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">3.
                                        Nguyễn Đình Chiểu đã làm gì để sống có ích cho đời sau khi gặp hoạn nạn?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg></div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <div class="flex items-center space-x-2 mb-2"><span
                                                class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span
                                                class="text-[11px] font-black uppercase tracking-widest text-green-600">Gợi
                                                ý trả lời</span></div>
                                        <p class="font-medium">Không gục ngã trước số phận, ông đã mở trường dạy học,
                                            làm thuốc chữa bệnh cho dân và sáng tác thơ văn khích lệ tinh thần nghĩa
                                            hiệp.</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm transition-all hover:shadow-md overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group"><span
                                        class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">4.
                                        Cuộc chiến đấu chống giặc Pháp của cụ Đồ Chiểu diễn ra như thế nào?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg></div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <div class="flex items-center space-x-2 mb-2"><span
                                                class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span
                                                class="text-[11px] font-black uppercase tracking-widest text-green-600">Gợi
                                                ý trả lời</span></div>
                                        <p class="font-medium">Khi giặc Pháp xâm lược (1858), ông cùng các lãnh tụ nghĩa
                                            quân bàn mưu tính kế đánh giặc. Ông dùng thơ văn làm vũ khí để ca ngợi người
                                            hi sinh vì nước và khích lệ tinh thần chiến đấu của nhân dân.</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm transition-all hover:shadow-md overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group"><span
                                        class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">5.
                                        Vì sao Nguyễn Đình Chiểu được nhân dân Lục tỉnh gọi bằng cái tên thân mật “cụ Đồ
                                        Chiểu”?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg></div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <div class="flex items-center space-x-2 mb-2"><span
                                                class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span
                                                class="text-[11px] font-black uppercase tracking-widest text-green-600">Gợi
                                                ý trả lời</span></div>
                                        <p class="font-medium">Vì ông có những phẩm chất cao quý: nghị lực phi thường
                                            vượt lên số phận bất hạnh, tấm lòng nhân hậu, yêu nước thương dân, hết lòng
                                            bảo vệ chính nghĩa. Ông là người thầy giáo, thầy thuốc đáng kính của "lòng
                                            dân".</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>

        <!-- TAB 2: LUYỆN TẬP -->
        <div id="tab-quiz" class="tab-content">
            <div class="max-w-4xl mx-auto glass-card rounded-[40px] shadow-2xl flex flex-col min-h-[500px]">
                <div id="quiz-registration" class="p-8 flex-grow flex flex-col justify-center">
                    <div class="text-center mb-6">
                        <div
                            class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white mb-4 shadow-xl mx-auto transform -rotate-3">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                                </path>
                            </svg></div>
                        <h2 class="text-2xl font-black text-gray-800 mb-1">Đăng ký luyện tập</h2>
                        <p class="text-xs text-gray-400 font-bold uppercase tracking-widest">Cụ Đồ Chiểu</p>
                    </div>
                    <form onsubmit="startQuiz(event)" class="w-full max-w-sm mx-auto space-y-4">
                        <input type="text" id="studentName" required placeholder="Họ và tên"
                            class="w-full px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:outline-none font-bold">
                        <div class="grid grid-cols-2 gap-4">
                            <select id="studentClass" required
                                class="px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:outline-none font-bold">
                                <option value="">Chọn Lớp</option>
                                <option value="5/1">5/1</option>
                                <option value="5/2">5/2</option>
                                <option value="5/3">5/3</option>
                                <option value="5/4">5/4</option>
                                <option value="5/5">5/5</option>
                            </select>
                            <select id="schoolSelect" required onchange="checkSchool()"
                                class="px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:outline-none font-bold">
                                <option value="Tiểu học Đỗ Văn Nại">TH Đỗ Văn Nại</option>
                                <option value="Khác">Trường khác...</option>
                            </select>
                        </div>
                        <input type="text" id="otherSchool" placeholder="Tên trường"
                            class="hidden w-full px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:bg-white font-bold">
                        <button type="submit"
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-black py-4 rounded-2xl shadow-xl transition-all uppercase tracking-wider">Bắt
                            đầu</button>
                    </form>
                </div>
                <div id="quiz-container" class="hidden flex-grow flex flex-col">
                    <div class="bg-blue-600/5 px-6 py-4 flex justify-between items-center border-b">
                        <div class="flex items-center">
                            <div class="w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center font-black mr-4 shadow-lg"
                                id="questionNum">1</div>
                            <div class="flex flex-col"><span
                                    class="text-[10px] font-black text-blue-600 uppercase tracking-widest"
                                    id="progressText">CÂU TRẮC NGHIỆM: 1/5</span><span
                                    class="text-xs text-gray-400 font-bold">Cụ Đồ Chiểu</span></div>
                        </div>
                    </div>
                    <div class="p-6 flex-grow flex flex-col justify-center overflow-auto">
                        <h3 class="text-xl md:text-2xl font-black text-gray-800 mb-6" id="questionText">Nội dung câu
                            hỏi?</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3" id="optionsArea"></div>
                    </div>
                    <div class="px-6 py-4 border-t flex justify-between items-center bg-gray-50/50"><span
                            class="text-xs font-bold text-gray-400 italic">* Chọn đáp án đúng nhất</span><button
                            id="nextBtn" disabled
                            class="bg-blue-600 disabled:opacity-30 hover:bg-blue-700 text-white font-black py-3 px-10 rounded-2xl shadow-lg uppercase text-sm tracking-widest">Tiếp
                            theo</button></div>
                </div>
                <div id="quiz-results"
                    class="hidden p-8 flex-grow flex flex-col items-center justify-center text-center">
                    <div class="relative w-40 h-40 mb-8">
                        <svg class="w-full h-full transform -rotate-90">
                            <circle cx="80" cy="80" r="74" stroke="currentColor" stroke-width="12" fill="transparent"
                                class="text-gray-100" />
                            <circle id="scoreCircle" cx="80" cy="80" r="74" stroke="url(#scoreGrad)" stroke-width="12"
                                fill="transparent" class="transition-all duration-1000" stroke-dasharray="0, 465"
                                stroke-linecap="round" />
                            <defs>
                                <linearGradient id="scoreGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#3b82f6" />
                                    <stop offset="100%" stop-color="#818cf8" />
                                </linearGradient>
                            </defs>
                        </svg>
                        <div class="absolute inset-0 flex flex-col items-center justify-center"><span
                                class="text-5xl font-black text-gray-800" id="scoreText">0</span><span
                                class="text-[10px] text-gray-400 font-black uppercase tracking-[0.2em] mt-1">Điểm
                                số</span></div>
                    </div>
                    <h2 class="text-3xl font-black text-gray-800 mb-2" id="resultTitle">Hoàn thành!</h2>
                    <p class="text-gray-500 mb-10 max-w-sm font-bold" id="resultMsg">Em đã nỗ lực hết mình!</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-md">
                        <button onclick="restartQuiz()"
                            class="bg-white hover:bg-gray-50 text-gray-700 font-black py-4 rounded-2xl border-2 border-gray-100">LÀM
                            LẠI</button>
                        <button onclick="submitResults(event)"
                            class="bg-blue-600 hover:bg-blue-700 text-white font-black py-4 rounded-2xl shadow-xl">NỘP
                            KẾT QUẢ</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal Teacher Stats -->
    <div id="statsModal" class="modal">
        <div class="bg-white rounded-[40px] w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl m-4">
            <div class="p-8 border-b flex justify-between items-center bg-gray-50/50">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center text-white"><svg
                            class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                            </path>
                        </svg></div>
                    <div>
                        <h2 class="text-2xl font-black text-gray-800 tracking-tight">Bảng kết quả</h2>
                        <p class="text-xs font-bold text-gray-400 uppercase tracking-widest mt-1">Giáo viên</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3"><button onclick="exportToExcel()"
                        class="bg-green-600 hover:bg-green-700 text-white font-black py-3 px-6 rounded-2xl text-sm flex items-center">XUẤT
                        EXCEL</button><button onclick="closeModal()"
                        class="w-12 h-12 flex items-center justify-center text-gray-400 hover:bg-gray-100 rounded-2xl"><svg
                            class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg></button></div>
            </div>
            <div class="flex-grow overflow-auto p-8 bg-gray-50/30">
                <table class="w-full">
                    <thead>
                        <tr
                            class="text-left text-gray-400 uppercase text-[10px] font-black tracking-[0.2em] border-b-2 border-gray-100 pb-4">
                            <th class="px-6 py-4">STT</th>
                            <th class="px-6 py-4">Họ và Tên</th>
                            <th class="px-6 py-4">Lớp</th>
                            <th class="px-6 py-4 text-center">Điểm</th>
                            <th class="px-6 py-4 text-center">Thời gian</th>
                            <th class="px-6 py-4 text-right">Hoàn thành</th>
                        </tr>
                    </thead>
                    <tbody id="statsTableBody" class="divide-y divide-gray-100"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="success-modal">
        <div class="glass-card success-card rounded-[40px] p-10 max-w-sm w-full text-center shadow-3xl">
            <div
                class="w-24 h-24 bg-gradient-to-br from-green-400 to-emerald-600 rounded-3xl flex items-center justify-center text-white mx-auto mb-8 transform rotate-6 scale-110">
                <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path>
                </svg></div>
            <h2 class="text-3xl font-black text-gray-800 mb-2">Thành công!</h2>
            <p class="text-gray-500 mb-10 font-bold">Chúc mừng em đã hoàn thành bài tập!</p>
            <button onclick="closeSuccessModal()"
                class="w-full bg-blue-600 text-white font-black py-4 rounded-2xl shadow-xl uppercase tracking-widest text-sm">Trở
                về</button>
        </div>
    </div>

        <footer class="py-5 px-4 mt-12 bg-white/30 backdrop-blur-md border-t border-white/50">
        <div class="container mx-auto text-center">
            <p class="text-[10px] font-black text-gray-400 uppercase tracking-[0.3em]">@ 2026 EduRobot - Hệ thống học
                tập thông minh</p>
            <p class="text-xs font-bold text-blue-600 mt-2">Phát triển bởi Lê Thành Long</p>
        </div>
    </footer>

    <script src="js/floating-menu.js"></script>
    <script>
        const lessonTitle = "Cụ Đồ Chiểu";
        function toggleAccordion(button) {
            const item = button.parentElement;
            const isOpen = item.classList.contains('accordion-open');
            document.querySelectorAll('.accordion-item').forEach(el => el.classList.remove('accordion-open'));
            if (!isOpen) item.classList.add('accordion-open');
        }

        const audio = document.getElementById('lessonAudio');
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');
        const audioStatus = document.getElementById('audioStatus');

        function toggleAudio() {
            if (audio.paused) { audio.play(); playIcon.classList.add('hidden'); pauseIcon.classList.remove('hidden'); audioStatus.innerText = "Đang phát..."; }
            else { audio.pause(); playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); audioStatus.innerText = "Đang dừng..."; }
        }

        function switchTab(tabId) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById('btn-' + tabId).classList.add('active');
            document.getElementById('tab-' + tabId).classList.add('active');
        }

        const allQuestions = [
            { q: "Nguyễn Đình Chiểu sinh ra ở đâu?", a: ["Hà Nội", "Gia Định (TP. Hồ Chí Minh)", "Huế", "Cần Thơ"], c: 1 },
            { q: "Biến cố nào khiến Nguyễn Đình Chiểu phải bỏ thi về Nam vào năm 1848?", a: ["Ông bị ốm nặng", "Ông hết tiền", "Mẹ ông mất", "Chiến tranh nổ ra"], c: 2 },
            { q: "Điều bất hạnh xảy ra với ông trên đường về chịu tang mẹ là gì?", a: ["Bị mất hành lý", "Bị mù cả hai mắt", "Bị lạc đường", "Bị giặc bắt"], c: 1 },
            { q: "Câu 'Lỡ bề báo hiếu, lỡ đường lập thân' nói về?", a: ["Khi ông đỗ Tú tài", "Khi bị mù và mẹ mất, chưa kịp đền đáp và chưa thành danh", "Khi đánh giặc", "Khi về già"], c: 1 },
            { q: "Thái độ của ông trước thử thách số phận?", a: ["Buông xuôi", "Sống ẩn dật", "Không gục ngã, kiên cường vươn lên giúp đời", "Than khóc"], c: 2 },
            { q: "Sau khi bị mù, ông đã làm gì?", a: ["Làm ruộng", "Mở trường dạy học và làm thuốc", "Đi tu", "Làm quan"], c: 1 },
            { q: "Sự kiện lịch sử năm 1858 nhắc đến trong bài?", a: ["Giặc Pháp xâm lược", "Nguyễn Đình Chiểu qua đời", "Khởi nghĩa Tây Sơn", "Nguyễn Đình Chiểu đỗ đạt"], c: 0 },
            { q: "Ông tham gia đánh giặc bằng cách nào?", a: ["Cầm súng", "Bàn mưu cùng nghĩa quân và dùng thơ văn cổ vũ", "Quyên góp", "Làm gián điệp"], c: 1 },
            { q: "Nội dung thơ văn ông thời kỳ này là gì?", a: ["Kẻ đẹp thiên nhiên", "Tiếc thương người hi sinh và khích lệ chiến đấu", "Than thân trách phận", "Viết chuyện vui"], c: 1 },
            { q: "Tình cảm học trò đối với thầy Chiểu?", a: ["Sợ hãi", "Nghe danh, mến đức xin học rất đông", "Ít người theo", "Coi thường"], c: 1 },
            { q: "Nhân dân Lục tỉnh gọi ông là?", a: ["Thầy Chiểu", "Ông lang Nguyễn", "Cụ Đồ Chiểu", "Nhà thơ mù"], c: 2 },
            { q: "Trái tim ông được miêu tả gắn bó với?", a: ["Danh vọng", "Thiên nhiên", "Vận mệnh đất nước", "Dòng họ"], c: 2 },
            { q: "Vì sao nói ông là người thầy của 'lòng dân'?", a: ["Vì giàu có", "Vì sống trọn tình nghĩa, yêu nước và được tin yêu", "Vì phép thuật", "Vì làm quan to"], c: 1 },
            { q: "Nghị lực của ông thể hiện rõ nhất qua?", a: ["Mù mắt vẫn dạy học, bốc thuốc và làm thơ đánh giặc", "Đỗ Tú tài", "Chịu tang mẹ", "Đi học xa nhà"], c: 0 },
            { q: "Chủ đề chính bài đọc là gì?", a: ["Lịch sử y học", "Cuộc kháng chiến Pháp", "Ca ngợi nghị lực, lòng yêu nước và nhân cách của ông", "Các tác phẩm văn học"], c: 2 }
        ];

        let selectedQuestions = [], currentIdx = 0, score = 0, studentData = {}, startTime = null;

        function checkSchool() { const select = document.getElementById('schoolSelect'); const other = document.getElementById('otherSchool'); if (select.value === 'Khác') { other.classList.remove('hidden'); other.required = true; } else { other.classList.add('hidden'); other.required = false; } }
        function shuffle(array) { let currentIndex = array.length, randomIndex; while (currentIndex != 0) { randomIndex = Math.floor(Math.random() * currentIndex); currentIndex--;[array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]]; } return array; }

        function startQuiz(e) {
            e.preventDefault();
            const schoolVal = document.getElementById('schoolSelect').value;
            studentData = { studentName: document.getElementById('studentName').value, studentClass: document.getElementById('studentClass').value, school: schoolVal === 'Khác' ? document.getElementById('otherSchool').value : schoolVal };
            selectedQuestions = shuffle([...allQuestions]).slice(0, 5);
            currentIdx = 0; score = 0; startTime = new Date();
            document.getElementById('quiz-registration').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = selectedQuestions[currentIdx];
            document.getElementById('questionNum').innerText = currentIdx + 1;
            document.getElementById('progressText').innerText = `CÂU TRẮC NGHIỆM: ${currentIdx + 1}/5`;
            document.getElementById('questionText').innerText = q.q;
            const area = document.getElementById('optionsArea'); area.innerHTML = '';
            q.a.forEach((opt, i) => {
                const btn = document.createElement('button'); btn.className = "option-btn w-full p-4 text-left bg-white rounded-2xl font-bold flex items-center group shadow-sm";
                btn.innerHTML = `<div class="w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center mr-4 group-hover:bg-blue-600 group-hover:text-white transition-all text-xs font-black shadow-inner">${String.fromCharCode(65 + i)}</div><span class="flex-1 text-sm md:text-base text-gray-700">${opt}</span>`;
                btn.onclick = () => selectOption(i, btn); area.appendChild(btn);
            });
            document.getElementById('nextBtn').disabled = true;
        }

        function selectOption(idx, btn) {
            document.querySelectorAll('#optionsArea button').forEach(b => { b.classList.remove('selected'); b.querySelector('div').classList.remove('bg-blue-600', 'text-white'); });
            btn.classList.add('selected'); btn.querySelector('div').classList.add('bg-blue-600', 'text-white');
            document.getElementById('nextBtn').disabled = false; document.getElementById('nextBtn').dataset.selected = idx;
        }

        document.getElementById('nextBtn').onclick = () => {
            if (parseInt(document.getElementById('nextBtn').dataset.selected) === selectedQuestions[currentIdx].c) score += 20;
            currentIdx++;
            if (currentIdx < 5) showQuestion(); else showResults();
        };

        function showResults() {
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('quiz-results').classList.remove('hidden');
            document.getElementById('scoreText').innerText = score;
            const circle = document.getElementById('scoreCircle'); circle.style.strokeDasharray = `${(score / 100) * 465}, 465`;
        }
    </script>
</body>

</html>