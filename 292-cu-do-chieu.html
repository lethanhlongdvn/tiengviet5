<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>292. C? Ð? Chi?u - EduRobot</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <!-- SheetJS for Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #eff6ff;
            --accent: #f59e0b;
            --glass: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.5);
        }

        .hidden {
            display: none !important;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
        }

        .serif-font {
            font-family: 'Merriweather', serif;
        }

        .bg-paper {
            background-color: #fdfbf7;
            background-image: radial-gradient(#e5e7eb 0.5px, transparent 0.5px);
            background-size: 20px 20px;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
        }

        .tab-btn.active {
            color: var(--primary);
            background: white;
            box-shadow: inset 0 -3px 0 var(--primary);
        }

        .tab-content {
            display: none !important;
            animation: slideUp 0.4s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-content.active {
            display: block !important;
        }

        #tab-quiz.active {
            display: flex !important;
        }

        /* Compact Quiz styles */
        #quiz-container {
            height: calc(100vh - 180px);
            max-height: 600px;
        }

        .option-btn {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1.5px solid #e2e8f0;
        }

        .option-btn:hover:not(:disabled) {
            transform: translateX(4px);
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .option-btn.selected {
            border-color: var(--primary);
            background: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .accordion-open .accordion-content {
            max-height: 500px;
        }

        .accordion-open svg {
            transform: rotate(180deg);
        }

        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(8px);
            z-index: 1000;
            padding: 1rem;
        }

        .modal.active {
            display: flex !important;
            align-items: center;
            justify-content: center;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .reading-content p {
            text-indent: 2rem;
            margin-bottom: 1.5rem;
            text-align: justify;
        }

        .success-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(8px);
            z-index: 200;
            padding: 1rem;
            animation: fadeIn 0.3s ease-out;
        }

        .success-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .success-card {
            transform: scale(0.9);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .success-modal.active .success-card {
            transform: scale(1);
            opacity: 1;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }
    </style>
</head>

<body class="bg-blue-50 text-gray-800">

    <!-- Header -->
    <header class="sticky top-0 z-50 px-4 py-2">
        <nav class="container mx-auto glass-card rounded-xl px-5 py-2 flex justify-between items-center shadow-lg">
            <div class="flex items-center space-x-4">
                <div
                    class="w-10 h-10 bg-blue-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-200 shrink-0">
                    <span class="text-xl font-black">E</span>
                </div>
                <div class="flex flex-col md:flex-row md:items-center md:space-x-6">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl font-black text-blue-700">EduRobot</span>
                        <span
                            class="text-[11px] font-bold px-3 py-1 rounded-full bg-orange-500 text-white shadow-sm shadow-orange-200 tracking-wide whitespace-nowrap">TI?NG
                            VI?T 5</span>
                    </div>

                    <div class="flex items-center space-x-2 overflow-hidden">
                        <span
                            class="text-[11px] font-black uppercase tracking-widest text-gray-400 whitespace-nowrap">CH?
                            ÐI?M:</span>
                        <span
                            class="text-sm font-black uppercase tracking-wider text-blue-800 truncate max-w-[180px] md:max-w-none">TI?P
                            BU?C CHA ÔNG</span>
                    </div>
                </div>
            </div>
            <ul class="flex space-x-2 md:space-x-6 text-xs font-bold items-center relative">
                <li><a href="index.html"
                        class="flex items-center text-gray-500 hover:text-blue-600 transition-colors py-2">Trang ch?</a>
                </li>
                <li class="relative group">
                    <button id="top-menu-lesson-btn"
                        class="flex items-center text-gray-500 hover:text-blue-600 transition-colors py-2">
                        Bài h?c
                        <svg class="w-4 h-4 ml-1 transition-transform duration-200" id="top-menu-chevron" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7">
                            </path>
                        </svg>
                    </button>
                    <div id="top-menu-lessons-dropdown"
                        class="absolute top-full right-[-100px] md:right-auto md:left-1/2 md:-translate-x-1/2 mt-4 w-[320px] bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/50 hidden max-h-[70vh] overflow-y-auto z-[60] p-2">
                    </div>
                </li>
                <li><button onclick="openTeacherStats()"
                        class="text-gray-500 hover:text-blue-600 transition-colors py-2">Giáo viên</button></li>
                <li><a href="#" class="text-gray-500 hover:text-blue-600 transition-colors py-2">Liên h?</a></li>
            </ul>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-2">

        <!-- Tab & Audio Header -->
        <div class="glass-card mb-4 rounded-2xl overflow-hidden flex flex-col md:flex-row items-stretch shadow-lg">
            <div class="flex-1 flex bg-white/40">
                <button onclick="switchTab('lesson')" id="btn-lesson"
                    class="tab-btn active flex-1 py-4 text-center font-black text-base text-gray-400 transition-all border-r border-gray-100/50 uppercase tracking-wider">1.
                    Bài h?c</button>
                <button onclick="switchTab('quiz')" id="btn-quiz"
                    class="tab-btn flex-1 py-4 text-center font-black text-base text-gray-400 transition-all uppercase tracking-wider">2.
                    Luy?n t?p</button>
            </div>

            <div id="audio-container"
                class="p-2 md:px-4 flex items-center bg-blue-50/20 border-t md:border-t-0 md:border-l border-gray-100/50">
                <div
                    class="flex items-center space-x-3 bg-white/60 backdrop-blur-md rounded-xl p-1.5 pr-4 border border-white shadow-inner">
                    <button id="audioControl" onclick="toggleAudio()"
                        class="w-9 h-9 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center text-white hover:scale-105 active:scale-95 transition-all shadow-md shadow-blue-200">
                        <svg id="playIcon" class="w-5 h-5 ml-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M6 4l10 6-10 6V4z"></path>
                        </svg>
                        <svg id="pauseIcon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M6 4h4v16H6zm8 0h4v16h-4z"></path>
                        </svg>
                    </button>
                    <div class="flex flex-col">
                        <span
                            class="text-[9px] font-black text-blue-600 uppercase tracking-widest leading-none mb-0.5 whitespace-nowrap">Ð?C
                            M?U</span>
                        <span id="audioStatus"
                            class="text-[10px] text-gray-400 font-bold italic leading-none whitespace-nowrap">Ðang
                            d?ng...</span>
                    </div>
                </div>
                <audio id="lessonAudio">
                    <source src="am_thanh/dochieu.mp3" type="audio/mpeg">
                </audio>
            </div>
        </div>

        <!-- TAB 1: BÀI H?C -->
        <div id="tab-lesson" class="tab-content active">
            <div class="flex flex-col lg:flex-row gap-6">
                <section class="w-full lg:w-[70%]">
                    <div class="glass-card rounded-[40px] p-6 md:p-10 shadow-2xl">
                        <div
                            class="bg-paper rounded-[32px] p-8 md:p-12 shadow-inner border border-white/50 relative overflow-hidden">
                            <h1
                                class="text-4xl font-black mb-12 text-blue-950 text-center uppercase tracking-tighter leading-tight relative">
                                <span
                                    class="bg-blue-600 w-12 h-1.5 absolute -bottom-4 left-1/2 -translate-x-1/2 rounded-full"></span>
                                C? Ð? Chi?u
                            </h1>

                            <div class="serif-font text-gray-800 text-lg leading-relaxed relative reading-content">
                                <p>Nguy?n Ðình Chi?u (1822 – 1888) sinh ra trong m?t gia dình nhà nho ? làng Tân Th?i,
                                    huy?n Bình Duong, ph? Tân Bình, t?nh Gia Ð?nh (nay là Thành ph? H? Chí Minh).</p>
                                <p>Nam 1833, do cu?c binh bi?n trong tri?u dình, cha b? m?t ch?c, gia dình li tán, c?u
                                    bé Chi?u m?i mu?i hai tu?i dã ph?i xa cha m?, ra Hu? ? nh? nhà m?t ngu?i b?n c?a cha
                                    d? an h?c.</p>
                                <p>Nam 1843, Nguy?n Ðình Chi?u tr? v? quê m?, d? tú tài t?i tru?ng thi Gia Ð?nh. Hai nam
                                    sau, ông l?i tr? ra Hu? h?c t?p, ch? kì thi nam K? D?u, 1849. Nhung cu?i nam 1848,
                                    m? m?t, Nguy?n Ðình Chi?u ph?i b? thi v? Nam ch?u tang m?. Trên du?ng v?, ông b? ?m
                                    n?ng, mù c? hai m?t, ch?y ch?a mãi không kh?i. Cu?i nam 1849, Nguy?n Ðình Chi?u m?i
                                    v? d?n Gia Ð?nh “l? b? báo hi?u, l? du?ng l?p thân”.</p>
                                <p>Không g?c ngã tru?c nh?ng th? thách n?ng n? liên ti?p c?a s? ph?n, sau th?i gian ch?u
                                    tang m?, ông m? tru?ng d?y h?c và làm thu?c ch?a b?nh cho dân. H?c trò g?n xa nghe
                                    danh, m?n d?c xin h?c r?t dông. Ti?ng tho chan ch?a tinh th?n nghia hi?p c?a Ð?
                                    Chi?u cung b?t d?u vang kh?p mi?n L?c t?nh.</p>
                                <p>Nam 1858, gi?c Pháp xâm lu?c nu?c ta. Nguy?n Ðình Chi?u cùng các lãnh t? nghia quân
                                    bàn muu tính k? dánh gi?c. Ông sáng tác tho van bày t? ni?m ti?c thuong, c?m ph?c
                                    d?i v?i nh?ng ngu?i dã hi sinh vì d?t nu?c; khích l? m?nh m? tinh th?n chi?n d?u c?a
                                    nhân dân. Trái tim nhân h?u c?a ông luôn g?n bó s?t son v?i v?n m?nh c?a d?t nu?c.
                                    Ông du?c nhân dân L?c t?nh g?i b?ng cái tên trìu m?n “c? Ð? Chi?u” nhu m?t cách tri
                                    ân v?i ngu?i th?y dáng kính c?a “lòng dân”.</p>
                            </div>
                        </div>

                        <div
                            class="mt-8 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-[32px] p-8 text-white shadow-xl">
                            <div class="flex flex-col md:flex-row items-center gap-8 relative z-10">
                                <div
                                    class="bg-white/20 backdrop-blur-md p-6 rounded-2xl border border-white/30 shadow-lg shrink-0 text-center min-w-[160px]">
                                    <p class="text-[10px] font-black uppercase tracking-[0.2em] text-blue-100 mb-1">
                                        Thông di?p</p>
                                    <h3 class="text-2xl font-black uppercase tracking-tight">Ý NGHIA</h3>
                                </div>
                                <div class="flex-grow">
                                    <p class="text-lg font-bold leading-relaxed text-blue-50">
                                        Bài d?c ca ng?i c? Nguy?n Ðình Chi?u – ngu?i dã nêu cao ngh? l?c phi thu?ng vu?t
                                        lên s? ph?n. Ð?ng th?i bày t? ni?m khâm ph?c tru?c t?m lòng nhân h?u, h?t lòng
                                        b?o v? chính nghia, tinh th?n yêu nu?c và s? g?n bó s?t son v?i dân, v?i nu?c
                                        c?a c? Ð? Chi?u.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <aside class="w-full lg:w-[30%]">
                    <div class="glass-card rounded-[40px] p-6 sticky top-28 shadow-xl border-amber-100/50">
                        <div class="mb-6 -mt-2"><img src="hinh_anh/292-dochieu-digital.png" alt="Minh h?a"
                                class="w-full h-auto rounded-3xl object-contain drop-shadow-xl transform hover:scale-105 transition-transform duration-500">
                        </div>
                        <div class="flex items-center space-x-4 mb-8">
                            <div
                                class="w-12 h-12 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center shadow-lg shadow-amber-200">
                                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                        d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                                    </path>
                                </svg>
                            </div>
                            <h2 class="text-2xl font-black text-gray-800 tracking-tight">Tìm hi?u bài</h2>
                        </div>
                        <div class="space-y-4">
                            <!-- Questions and Answers -->
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm transition-all hover:shadow-md overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group"><span
                                        class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">1.
                                        Hãy gi?i thi?u dôi nét v? ti?u s? Nguy?n Ðình Chi?u.</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg></div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <div class="flex items-center space-x-2 mb-2"><span
                                                class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span
                                                class="text-[11px] font-black uppercase tracking-widest text-green-600">G?i
                                                ý tr? l?i</span></div>
                                        <p class="font-medium">Nguy?n Ðình Chi?u (1822 – 1888) sinh ra trong m?t gia
                                            dình nhà nho ? làng Tân Th?i, t?nh Gia Ð?nh. Ông có ch?ng du?ng h?c hành
                                            gian nan: nam 12 tu?i ph?i xa cha m? ra Hu? an h?c; nam 1843 d? Tú tài; nam
                                            1849 chu?n b? thi ti?p thì ph?i b? d? v? ch?u tang m?.</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm transition-all hover:shadow-md overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group"><span
                                        class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">2.
                                        Nguy?n Ðình Chi?u dã g?p nh?ng bi?n c? dau thuong nào trong cu?c d?i?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg></div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <div class="flex items-center space-x-2 mb-2"><span
                                                class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span
                                                class="text-[11px] font-black uppercase tracking-widest text-green-600">G?i
                                                ý tr? l?i</span></div>
                                        <p class="font-medium">Bi?n c? l?n nh?t là khi dang ch? thi thì m? m?t. Trên
                                            du?ng v? ch?u tang, ông b? ?m n?ng d?n d?n mù c? hai m?t, công danh d? dang
                                            ("l? b? báo hi?u, l? du?ng l?p thân").</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm transition-all hover:shadow-md overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group"><span
                                        class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">3.
                                        Nguy?n Ðình Chi?u dã làm gì d? s?ng có ích cho d?i sau khi g?p ho?n n?n?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg></div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <div class="flex items-center space-x-2 mb-2"><span
                                                class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span
                                                class="text-[11px] font-black uppercase tracking-widest text-green-600">G?i
                                                ý tr? l?i</span></div>
                                        <p class="font-medium">Không g?c ngã tru?c s? ph?n, ông dã m? tru?ng d?y h?c,
                                            làm thu?c ch?a b?nh cho dân và sáng tác tho van khích l? tinh th?n nghia
                                            hi?p.</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm transition-all hover:shadow-md overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group"><span
                                        class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">4.
                                        Cu?c chi?n d?u ch?ng gi?c Pháp c?a c? Ð? Chi?u di?n ra nhu th? nào?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg></div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <div class="flex items-center space-x-2 mb-2"><span
                                                class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span
                                                class="text-[11px] font-black uppercase tracking-widest text-green-600">G?i
                                                ý tr? l?i</span></div>
                                        <p class="font-medium">Khi gi?c Pháp xâm lu?c (1858), ông cùng các lãnh t? nghia
                                            quân bàn muu tính k? dánh gi?c. Ông dùng tho van làm vu khí d? ca ng?i ngu?i
                                            hi sinh vì nu?c và khích l? tinh th?n chi?n d?u c?a nhân dân.</p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="accordion-item bg-white/50 rounded-[24px] border border-white shadow-sm transition-all hover:shadow-md overflow-hidden">
                                <button onclick="toggleAccordion(this)"
                                    class="w-full p-5 text-left flex justify-between items-center group"><span
                                        class="font-bold text-gray-700 group-hover:text-blue-600 transition-colors">5.
                                        Vì sao Nguy?n Ðình Chi?u du?c nhân dân L?c t?nh g?i b?ng cái tên thân m?t “c? Ð?
                                        Chi?u”?</span>
                                    <div
                                        class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-50 transition-colors">
                                        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-transform"
                                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                                d="M19 9l-7 7-7-7"></path>
                                        </svg></div>
                                </button>
                                <div class="accordion-content">
                                    <div
                                        class="px-6 pb-6 text-gray-600 leading-relaxed border-t border-white/50 pt-4 bg-blue-50/30">
                                        <div class="flex items-center space-x-2 mb-2"><span
                                                class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span
                                                class="text-[11px] font-black uppercase tracking-widest text-green-600">G?i
                                                ý tr? l?i</span></div>
                                        <p class="font-medium">Vì ông có nh?ng ph?m ch?t cao quý: ngh? l?c phi thu?ng
                                            vu?t lên s? ph?n b?t h?nh, t?m lòng nhân h?u, yêu nu?c thuong dân, h?t lòng
                                            b?o v? chính nghia. Ông là ngu?i th?y giáo, th?y thu?c dáng kính c?a "lòng
                                            dân".</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>

        <!-- TAB 2: LUY?N T?P -->
        <div id="tab-quiz" class="tab-content">
            <div class="max-w-4xl mx-auto glass-card rounded-[40px] shadow-2xl flex flex-col min-h-[500px]">
                <div id="quiz-registration" class="p-8 flex-grow flex flex-col justify-center">
                    <div class="text-center mb-6">
                        <div
                            class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white mb-4 shadow-xl mx-auto transform -rotate-3">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                                </path>
                            </svg></div>
                        <h2 class="text-2xl font-black text-gray-800 mb-1">Ðang ký luy?n t?p</h2>
                        <p class="text-xs text-gray-400 font-bold uppercase tracking-widest">C? Ð? Chi?u</p>
                    </div>
                    <form onsubmit="startQuiz(event)" class="w-full max-w-sm mx-auto space-y-4">
                        <input type="text" id="studentName" required placeholder="H? và tên"
                            class="w-full px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:outline-none font-bold">
                        <div class="grid grid-cols-2 gap-4">
                            <select id="studentClass" required
                                class="px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:outline-none font-bold">
                                <option value="">Ch?n L?p</option>
                                <option value="5/1">5/1</option>
                                <option value="5/2">5/2</option>
                                <option value="5/3">5/3</option>
                                <option value="5/4">5/4</option>
                                <option value="5/5">5/5</option>
                            </select>
                            <select id="schoolSelect" required onchange="checkSchool()"
                                class="px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:outline-none font-bold">
                                <option value="Ti?u h?c Ð? Van N?i">TH Ð? Van N?i</option>
                                <option value="Khác">Tru?ng khác...</option>
                            </select>
                        </div>
                        <input type="text" id="otherSchool" placeholder="Tên tru?ng"
                            class="hidden w-full px-6 py-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-blue-500 focus:bg-white font-bold">
                        <button type="submit"
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-black py-4 rounded-2xl shadow-xl transition-all uppercase tracking-wider">B?t
                            d?u</button>
                    </form>
                </div>
                <div id="quiz-container" class="hidden flex-grow flex flex-col">
                    <div class="bg-blue-600/5 px-6 py-4 flex justify-between items-center border-b">
                        <div class="flex items-center">
                            <div class="w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center font-black mr-4 shadow-lg"
                                id="questionNum">1</div>
                            <div class="flex flex-col"><span
                                    class="text-[10px] font-black text-blue-600 uppercase tracking-widest"
                                    id="progressText">CÂU TR?C NGHI?M: 1/5</span><span
                                    class="text-xs text-gray-400 font-bold">C? Ð? Chi?u</span></div>
                        </div>
                    </div>
                    <div class="p-6 flex-grow flex flex-col justify-center overflow-auto">
                        <h3 class="text-xl md:text-2xl font-black text-gray-800 mb-6" id="questionText">N?i dung câu
                            h?i?</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3" id="optionsArea"></div>
                    </div>
                    <div class="px-6 py-4 border-t flex justify-between items-center bg-gray-50/50"><span
                            class="text-xs font-bold text-gray-400 italic">* Ch?n dáp án dúng nh?t</span><button
                            id="nextBtn" disabled
                            class="bg-blue-600 disabled:opacity-30 hover:bg-blue-700 text-white font-black py-3 px-10 rounded-2xl shadow-lg uppercase text-sm tracking-widest">Ti?p
                            theo</button></div>
                </div>
                <div id="quiz-results"
                    class="hidden p-8 flex-grow flex flex-col items-center justify-center text-center">
                    <div class="relative w-40 h-40 mb-8">
                        <svg class="w-full h-full transform -rotate-90">
                            <circle cx="80" cy="80" r="74" stroke="currentColor" stroke-width="12" fill="transparent"
                                class="text-gray-100" />
                            <circle id="scoreCircle" cx="80" cy="80" r="74" stroke="url(#scoreGrad)" stroke-width="12"
                                fill="transparent" class="transition-all duration-1000" stroke-dasharray="0, 465"
                                stroke-linecap="round" />
                            <defs>
                                <linearGradient id="scoreGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#3b82f6" />
                                    <stop offset="100%" stop-color="#818cf8" />
                                </linearGradient>
                            </defs>
                        </svg>
                        <div class="absolute inset-0 flex flex-col items-center justify-center"><span
                                class="text-5xl font-black text-gray-800" id="scoreText">0</span><span
                                class="text-[10px] text-gray-400 font-black uppercase tracking-[0.2em] mt-1">Ði?m
                                s?</span></div>
                    </div>
                    <h2 class="text-3xl font-black text-gray-800 mb-2" id="resultTitle">Hoàn thành!</h2>
                    <p class="text-gray-500 mb-10 max-w-sm font-bold" id="resultMsg">Em dã n? l?c h?t mình!</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-md">
                        <button onclick="restartQuiz()"
                            class="bg-white hover:bg-gray-50 text-gray-700 font-black py-4 rounded-2xl border-2 border-gray-100">LÀM
                            L?I</button>
                        <button onclick="submitResults(event)"
                            class="bg-blue-600 hover:bg-blue-700 text-white font-black py-4 rounded-2xl shadow-xl">N?P
                            K?T QU?</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal Teacher Stats -->
    <div id="statsModal" class="modal">
        <div class="bg-white rounded-[40px] w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl m-4">
            <div class="p-8 border-b flex justify-between items-center bg-gray-50/50">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center text-white"><svg
                            class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                            </path>
                        </svg></div>
                    <div>
                        <h2 class="text-2xl font-black text-gray-800 tracking-tight">B?ng k?t qu?</h2>
                        <p class="text-xs font-bold text-gray-400 uppercase tracking-widest mt-1">Giáo viên</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3"><button onclick="exportToExcel()"
                        class="bg-green-600 hover:bg-green-700 text-white font-black py-3 px-6 rounded-2xl text-sm flex items-center">XU?T
                        EXCEL</button><button onclick="closeModal()"
                        class="w-12 h-12 flex items-center justify-center text-gray-400 hover:bg-gray-100 rounded-2xl"><svg
                            class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg></button></div>
            </div>
            <div class="flex-grow overflow-auto p-8 bg-gray-50/30">
                <table class="w-full">
                    <thead>
                        <tr
                            class="text-left text-gray-400 uppercase text-[10px] font-black tracking-[0.2em] border-b-2 border-gray-100 pb-4">
                            <th class="px-6 py-4">STT</th>
                            <th class="px-6 py-4">H? và Tên</th>
                            <th class="px-6 py-4">L?p</th>
                            <th class="px-6 py-4 text-center">Ði?m</th>
                            <th class="px-6 py-4 text-center">Th?i gian</th>
                            <th class="px-6 py-4 text-right">Hoàn thành</th>
                        </tr>
                    </thead>
                    <tbody id="statsTableBody" class="divide-y divide-gray-100"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="success-modal">
        <div class="glass-card success-card rounded-[40px] p-10 max-w-sm w-full text-center shadow-3xl">
            <div
                class="w-24 h-24 bg-gradient-to-br from-green-400 to-emerald-600 rounded-3xl flex items-center justify-center text-white mx-auto mb-8 transform rotate-6 scale-110">
                <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path>
                </svg></div>
            <h2 class="text-3xl font-black text-gray-800 mb-2">Thành công!</h2>
            <p class="text-gray-500 mb-10 font-bold">Chúc m?ng em dã hoàn thành bài t?p!</p>
            <button onclick="closeSuccessModal()"
                class="w-full bg-blue-600 text-white font-black py-4 rounded-2xl shadow-xl uppercase tracking-widest text-sm">Tr?
                v?</button>
        </div>
    </div>

        <footer class="py-5 px-4 mt-12 bg-white/30 backdrop-blur-md border-t border-white/50">
        <div class="container mx-auto text-center">
            <p class="text-[10px] font-black text-gray-400 uppercase tracking-[0.3em]">@ 2026 EduRobot - H? th?ng h?c
                t?p thông minh</p>
            <p class="text-xs font-bold text-blue-600 mt-2">Phát tri?n b?i Lê Thành Long</p>
        </div>
    </footer>

    <script src="js/floating-menu.js"></script>
    <script>
        const lessonTitle = "C? Ð? Chi?u";
        function toggleAccordion(button) {
            const item = button.parentElement;
            const isOpen = item.classList.contains('accordion-open');
            document.querySelectorAll('.accordion-item').forEach(el => el.classList.remove('accordion-open'));
            if (!isOpen) item.classList.add('accordion-open');
        }

        const audio = document.getElementById('lessonAudio');
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');
        const audioStatus = document.getElementById('audioStatus');

        function toggleAudio() {
            if (audio.paused) { audio.play(); playIcon.classList.add('hidden'); pauseIcon.classList.remove('hidden'); audioStatus.innerText = "Ðang phát..."; }
            else { audio.pause(); playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); audioStatus.innerText = "Ðang d?ng..."; }
        }

        function switchTab(tabId) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById('btn-' + tabId).classList.add('active');
            document.getElementById('tab-' + tabId).classList.add('active');
        }

        const allQuestions = [
            { q: "Nguy?n Ðình Chi?u sinh ra ? dâu?", a: ["Hà N?i", "Gia Ð?nh (TP. H? Chí Minh)", "Hu?", "C?n Tho"], c: 1 },
            { q: "Bi?n c? nào khi?n Nguy?n Ðình Chi?u ph?i b? thi v? Nam vào nam 1848?", a: ["Ông b? ?m n?ng", "Ông h?t ti?n", "M? ông m?t", "Chi?n tranh n? ra"], c: 2 },
            { q: "Ði?u b?t h?nh x?y ra v?i ông trên du?ng v? ch?u tang m? là gì?", a: ["B? m?t hành lý", "B? mù c? hai m?t", "B? l?c du?ng", "B? gi?c b?t"], c: 1 },
            { q: "Câu 'L? b? báo hi?u, l? du?ng l?p thân' nói v??", a: ["Khi ông d? Tú tài", "Khi b? mù và m? m?t, chua k?p d?n dáp và chua thành danh", "Khi dánh gi?c", "Khi v? già"], c: 1 },
            { q: "Thái d? c?a ông tru?c th? thách s? ph?n?", a: ["Buông xuôi", "S?ng ?n d?t", "Không g?c ngã, kiên cu?ng vuon lên giúp d?i", "Than khóc"], c: 2 },
            { q: "Sau khi b? mù, ông dã làm gì?", a: ["Làm ru?ng", "M? tru?ng d?y h?c và làm thu?c", "Ði tu", "Làm quan"], c: 1 },
            { q: "S? ki?n l?ch s? nam 1858 nh?c d?n trong bài?", a: ["Gi?c Pháp xâm lu?c", "Nguy?n Ðình Chi?u qua d?i", "Kh?i nghia Tây Son", "Nguy?n Ðình Chi?u d? d?t"], c: 0 },
            { q: "Ông tham gia dánh gi?c b?ng cách nào?", a: ["C?m súng", "Bàn muu cùng nghia quân và dùng tho van c? vu", "Quyên góp", "Làm gián di?p"], c: 1 },
            { q: "N?i dung tho van ông th?i k? này là gì?", a: ["K? d?p thiên nhiên", "Ti?c thuong ngu?i hi sinh và khích l? chi?n d?u", "Than thân trách ph?n", "Vi?t chuy?n vui"], c: 1 },
            { q: "Tình c?m h?c trò d?i v?i th?y Chi?u?", a: ["S? hãi", "Nghe danh, m?n d?c xin h?c r?t dông", "Ít ngu?i theo", "Coi thu?ng"], c: 1 },
            { q: "Nhân dân L?c t?nh g?i ông là?", a: ["Th?y Chi?u", "Ông lang Nguy?n", "C? Ð? Chi?u", "Nhà tho mù"], c: 2 },
            { q: "Trái tim ông du?c miêu t? g?n bó v?i?", a: ["Danh v?ng", "Thiên nhiên", "V?n m?nh d?t nu?c", "Dòng h?"], c: 2 },
            { q: "Vì sao nói ông là ngu?i th?y c?a 'lòng dân'?", a: ["Vì giàu có", "Vì s?ng tr?n tình nghia, yêu nu?c và du?c tin yêu", "Vì phép thu?t", "Vì làm quan to"], c: 1 },
            { q: "Ngh? l?c c?a ông th? hi?n rõ nh?t qua?", a: ["Mù m?t v?n d?y h?c, b?c thu?c và làm tho dánh gi?c", "Ð? Tú tài", "Ch?u tang m?", "Ði h?c xa nhà"], c: 0 },
            { q: "Ch? d? chính bài d?c là gì?", a: ["L?ch s? y h?c", "Cu?c kháng chi?n Pháp", "Ca ng?i ngh? l?c, lòng yêu nu?c và nhân cách c?a ông", "Các tác ph?m van h?c"], c: 2 }
        ];

        let selectedQuestions = [], currentIdx = 0, score = 0, studentData = {}, startTime = null;

        function checkSchool() { const select = document.getElementById('schoolSelect'); const other = document.getElementById('otherSchool'); if (select.value === 'Khác') { other.classList.remove('hidden'); other.required = true; } else { other.classList.add('hidden'); other.required = false; } }
        function shuffle(array) { let currentIndex = array.length, randomIndex; while (currentIndex != 0) { randomIndex = Math.floor(Math.random() * currentIndex); currentIndex--;[array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]]; } return array; }

        function startQuiz(e) {
            e.preventDefault();
            const schoolVal = document.getElementById('schoolSelect').value;
            studentData = { studentName: document.getElementById('studentName').value, studentClass: document.getElementById('studentClass').value, school: schoolVal === 'Khác' ? document.getElementById('otherSchool').value : schoolVal };
            selectedQuestions = shuffle([...allQuestions]).slice(0, 5);
            currentIdx = 0; score = 0; startTime = new Date();
            document.getElementById('quiz-registration').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = selectedQuestions[currentIdx];
            document.getElementById('questionNum').innerText = currentIdx + 1;
            document.getElementById('progressText').innerText = `CÂU TR?C NGHI?M: ${currentIdx + 1}/5`;
            document.getElementById('questionText').innerText = q.q;
            const area = document.getElementById('optionsArea'); area.innerHTML = '';
            q.a.forEach((opt, i) => {
                const btn = document.createElement('button'); btn.className = "option-btn w-full p-4 text-left bg-white rounded-2xl font-bold flex items-center group shadow-sm";
                btn.innerHTML = `<div class="w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center mr-4 group-hover:bg-blue-600 group-hover:text-white transition-all text-xs font-black shadow-inner">${String.fromCharCode(65 + i)}</div><span class="flex-1 text-sm md:text-base text-gray-700">${opt}</span>`;
                btn.onclick = () => selectOption(i, btn); area.appendChild(btn);
            });
            document.getElementById('nextBtn').disabled = true;
        }

        function selectOption(idx, btn) {
            document.querySelectorAll('#optionsArea button').forEach(b => { b.classList.remove('selected'); b.querySelector('div').classList.remove('bg-blue-600', 'text-white'); });
            btn.classList.add('selected'); btn.querySelector('div').classList.add('bg-blue-600', 'text-white');
            document.getElementById('nextBtn').disabled = false; document.getElementById('nextBtn').dataset.selected = idx;
        }

        document.getElementById('nextBtn').onclick = () => {
            if (parseInt(document.getElementById('nextBtn').dataset.selected) === selectedQuestions[currentIdx].c) score += 20;
            currentIdx++;
            if (currentIdx < 5) showQuestion(); else showResults();
        };

        function showResults() {
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('quiz-results').classList.remove('hidden');
            document.getElementById('scoreText').innerText = score;
            const circle = document.getElementById('scoreCircle'); circle.style.strokeDasharray = `${(score / 100) * 465}, 465`;
        }
    </script>
</body>

</html>