window.LESSON_DATA = window.LESSON_DATA || { lessons: {} };
window.LESSON_DATA.lessons["231-ltvc"] = {
    "title": "LTVC: Li√™n k·∫øt c√¢u b·∫±ng c√°ch l·∫∑p t·ª´ ng·ªØ",
    "week": 23,
    "subject": "LTVC",
    "theme": "H∆∞∆°ng s·∫Øc trƒÉm mi·ªÅn",
    "tabs": {
        "lesson": {
            "title": "B√†i h·ªçc",
            "blocks": [
                { "type": "header", "text": "Li√™n k·∫øt c√¢u b·∫±ng c√°ch l·∫∑p t·ª´ ng·ªØ" },
                {
                    "type": "html",
                    "id": "block-231-ex1",
                    "feedback": {
                        "correct": "T·ª´ ƒë∆∞·ª£c l·∫∑p l·∫°i nhi·ªÅu l·∫ßn l√†: cho·∫Øt, t√¥i.",
                        "wrong": "B·∫°n ch·ªçn sai t·ª´ r·ªìi, c·∫ßn ch·ªçn ƒë√∫ng v√† ch·ªçn t·∫•t c·∫£ c√°c t·ª´."
                    },
                    "content": `<div class="space-y-8 animate-in fade-in duration-700">
                        <!-- 1. KH√ÅM PH√Å -->
                        <section class="w-full">
                            <div class="glass-card rounded-[40px] p-6 md:p-10 shadow-2xl relative overflow-hidden ring-1 ring-blue-100">
                                <div class="flex items-center space-x-4 mb-8">
                                    <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg text-white">
                                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-black text-gray-800 uppercase tracking-tight">I. Kh√°m ph√°</h2>
                                </div>

                                <!-- B√†i t·∫≠p 1 -->
                                <div class="mb-6">
                                    <h3 class="text-lg font-bold text-blue-700 mb-2 italic">
                                        1. ƒê·ªçc ƒëo·∫°n vƒÉn v√† th·ª±c hi·ªán y√™u c·∫ßu:
                                    </h3>
                                    <div class="bg-blue-50/30 rounded-2xl p-4 mb-3 border border-blue-100 italic">
                                        <p class="text-gray-700 font-medium mb-1">a) T·ª´ n√†o ƒë∆∞·ª£c l·∫∑p l·∫°i ƒë·ªÉ li√™n k·∫øt c√°c c√¢u? (B·∫•m ch·ªçn trong ƒëo·∫°n vƒÉn)</p>
                                        <p class="text-gray-700 font-medium">b) Vi·ªác l·∫∑p l·∫°i c√°c t·ª´ ng·ªØ ·∫•y c√≥ t√°c d·ª•ng g√¨?</p>
                                    </div>

                                    <div class="bg-blue-50/50 rounded-2xl p-4 pr-1 border border-blue-100 mb-3 relative flex items-center justify-between overflow-hidden">
                                        <!-- Text on the Left -->
                                        <div class="flex-1">
                                            <div class="serif-font text-xl leading-relaxed text-gray-800 exercise-click-word-container" id="block-231-ex1">
                                                <div class="interactive-row py-1 px-3 rounded-xl transition-all whitespace-normal" data-compound="true" data-ans="t√¥i,Cho·∫Øt">
                                                    (1) <span class="word">B√™n</span> <span class="word">h√†ng</span> <span class="word">x√≥m</span> <span class="word">t√¥i</span> <span class="word">c√≥</span> <span class="word">c√°i</span> <span class="word">hang</span> <span class="word">c·ªßa</span> <span class="word">D·∫ø</span> <span class="word">Cho·∫Øt</span>.
                                                </div>
                                                <div class="interactive-row py-1 px-3 rounded-xl transition-all whitespace-normal" data-compound="true" data-ans="Cho·∫Øt,t√¥i">
                                                    (2) <span class="word">D·∫ø</span> <span class="word">Cho·∫Øt</span> <span class="word">l√†</span> <span class="word">t√™n</span> <span class="word">t√¥i</span> <span class="word">ƒë√£</span> <span class="word">ƒë·∫∑t</span> <span class="word">cho</span> <span class="word">n√≥</span> <span class="word">m·ªôt</span> <span class="word">c√°ch</span> <span class="word">ch·∫ø</span> <span class="word">gi·ªÖu</span> <span class="word">v√†</span> <span class="word">tr·ªãch</span> <span class="word">th∆∞·ª£ng</span> <span class="word">th·∫ø</span>.
                                                </div>
                                                <div class="interactive-row py-1 px-3 rounded-xl transition-all whitespace-normal" data-compound="true" data-ans="Cho·∫Øt,t√¥i">
                                                    (3) <span class="word">Cho·∫Øt</span> <span class="word">n·ªç</span> <span class="word">c√≥</span> <span class="word">l·∫Ω</span> <span class="word">c≈©ng</span> <span class="word">tr·∫°c</span> <span class="word">tu·ªïi</span> <span class="word">t√¥i</span>.
                                                </div>
                                                <div class="interactive-row py-1 px-3 rounded-xl transition-all whitespace-normal" data-compound="true" data-ans="Cho·∫Øt,t√¥i,t√¥i">
                                                    (4) <span class="word">Nh∆∞ng</span> <span class="word">v√¨</span> <span class="word">Cho·∫Øt</span> <span class="word">b·∫©m</span> <span class="word">sinh</span> <span class="word">y·∫øu</span> <span class="word">ƒëu·ªëi</span> <span class="word">n√™n</span> <span class="word">t√¥i</span> <span class="word">coi</span> <span class="word">th∆∞·ªùng</span> <span class="word">v√†</span> <span class="word">g√£</span> <span class="word">c≈©ng</span> <span class="word">s·ª£</span> <span class="word">t√¥i</span> <span class="word">l·∫Øm</span>.
                                                </div>
                                            </div>

                                            <div class="text-right mt-2 italic text-gray-500 text-[10px]">(T√¥ Ho√†i)</div>
                                        </div>
                                        <!-- Image on the Extreme Right -->
                                        <div class="w-24 md:w-32 flex-shrink-0 flex justify-end">
                                            <img src="hinh_anh/dechoat_new.png" alt="D·∫ø Cho·∫Øt" class="w-full h-auto drop-shadow-xl rounded-xl transform translate-x-2 rotate-2">
                                        </div>
                                    </div>

                                    <div class="flex items-center gap-3 mb-4">
                                        <button onclick="checkParagraph('block-231-ex1')" class="px-5 py-2 bg-blue-600 text-white text-sm font-bold rounded-xl shadow-md hover:bg-blue-700 transition-all active:scale-95">KI·ªÇM TRA (a)</button>
                                        <button onclick="resetLTVC('block-231-ex1')" class="px-4 py-2 bg-gray-200 text-gray-700 text-sm font-bold rounded-xl hover:bg-gray-300 transition-all">L√ÄM L·∫†I</button>
                                        <div id="result-block-231-ex1" class="hidden"></div>
                                    </div>

                                    <!-- Requirement b) input -->
                                    <div class="bg-blue-50/30 rounded-2xl p-4 border border-blue-100">
                                        <p class="text-blue-700 font-bold mb-2 text-sm italic">Tr·∫£ l·ªùi c√¢u b:</p>
                                        <textarea id="ai-231-ex1b" rows="2" class="w-full p-3 rounded-xl border border-blue-200 outline-none serif-font text-lg shadow-inner bg-white" placeholder="Vi·ªác l·∫∑p l·∫°i t·ª´ ng·ªØ ·∫•y gi√∫p..."></textarea>
                                        <div class="mt-2 flex items-center gap-3">
                                            <button onclick="checkEx1bAI()" class="px-5 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl shadow-md hover:bg-indigo-700 transition-all active:scale-95">KI·ªÇM TRA (b)</button>
                                            <button onclick="resetLTVC('ai-231-ex1b'); document.getElementById('fb-231-ex1b').classList.add('hidden');" class="px-4 py-2 bg-gray-200 text-gray-700 text-sm font-bold rounded-xl hover:bg-gray-300 transition-all">L√ÄM L·∫†I</button>
                                            <div id="fb-231-ex1b" class="hidden text-sm flex-1 bg-white p-2 rounded-lg border border-indigo-100 italic"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- B√†i t·∫≠p 2 -->
                                <div class="mb-4">
                                    <h3 class="text-lg font-bold text-blue-700 mb-2 italic leading-relaxed">
                                        2. Ch·ªçn t·ª´ ng·ªØ n√†o trong c√¢u 1 c·ªßa ƒëo·∫°n vƒÉn d∆∞·ªõi ƒë√¢y thay cho b√¥ng hoa ƒë·ªÉ t·∫°o s·ª± li√™n k·∫øt gi·ªØa c√°c c√¢u trong ƒëo·∫°n?
                                    </h3>
                                    <div class="bg-amber-50/50 rounded-2xl p-4 border border-amber-100 flex flex-col md:flex-row gap-4 items-center">
                                        <div class="flex-1 serif-font text-xl leading-relaxed text-gray-800">
                                            <p class="mb-2 italic text-gray-700">(1) <span class="text-rose-600 font-bold">Hoa gi·∫•y</span> ƒë·∫πp m·ªôt c√°ch gi·∫£n d·ªã. (2) M·ªói c√°nh <select id="ex231-2-1" class="px-2 py-0.5 bg-white border border-amber-400 rounded-lg text-rose-600 font-bold focus:ring-2 focus:ring-rose-300 outline-none"><option value="">-- ? --</option><option value="hoa">hoa</option><option value="l√°">l√°</option></select> gi·ªëng h·ªát m·ªôt chi·∫øc l√°, ch·ªâ c√≥ ƒëi·ªÅu m·ªèng m·∫£nh h∆°n v√† c√≥ m√†u s·∫Øc r·ª±c r·ª°. (3) L·ªõp l·ªõp <select id="ex231-2-2" class="px-2 py-0.5 bg-white border border-amber-400 rounded-lg text-rose-600 font-bold focus:ring-2 focus:ring-rose-300 outline-none"><option value="">-- ? --</option><option value="hoa">hoa</option><option value="l√°">l√°</option></select> r·∫£i k√≠n m·∫∑t s√¢n, nh∆∞ng ch·ªâ c·∫ßn m·ªôt l√†n gi√≥ tho·∫£ng, ch√∫ng t·∫£n m√°t bay ƒëi m·∫•t.</p>
                                            <p class="text-right text-sm italic text-gray-500 mt-2">(Theo Tr·∫ßn Ho√†i D∆∞∆°ng)</p>
                                        </div>
                                        <div class="w-16 md:w-20 flex-shrink-0 flex justify-end">
                                            <img src="hinh_anh/hoa_giay.jpg" alt="Hoa gi·∫•y" class="w-full h-auto rounded-xl shadow-md rotate-1">
                                        </div>
                                    </div>
                                    <div class="mt-3 flex items-center gap-3">
                                        <button onclick="checkEx231_2()" class="px-5 py-2 bg-amber-500 text-white text-sm font-bold rounded-xl shadow-md hover:bg-amber-600 transition-all active:scale-95">KI·ªÇM TRA</button>
                                        <button onclick="resetLTVC('ex231-2-1'); resetLTVC('ex231-2-2'); document.getElementById('fb-231-ex2').classList.add('hidden');" class="px-4 py-2 bg-gray-200 text-gray-700 text-sm font-bold rounded-xl hover:bg-gray-300 transition-all">L√ÄM L·∫†I</button>
                                    <div id="fb-231-ex2" class="hidden text-base font-bold"></div>
                                    </div>
                                </div>

                                <!-- Ghi nh·ªõ (Inserted after Ex 2) -->
                                <div class="mt-6 bg-amber-100/80 border-l-8 border-amber-400 rounded-2xl p-5 shadow-sm">
                                    <div class="flex items-start gap-4">
                                        <div class="text-3xl">üìé</div>
                                        <div>
                                            <h4 class="text-lg font-black text-amber-800 uppercase mb-1">Ghi nh·ªõ</h4>
                                            <p class="text-xl serif-font text-amber-900 leading-relaxed">
                                                C√°c c√¢u trong m·ªôt ƒëo·∫°n vƒÉn c√≥ th·ªÉ li√™n k·∫øt v·ªõi nhau b·∫±ng c√°ch l·∫∑p t·ª´ ng·ªØ: c√¢u sau l·∫∑p l·∫°i t·ª´ ng·ªØ ·ªü c√¢u tr∆∞·ªõc.
                                            </p>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </section>


                        <!-- 3. LUY·ªÜN T·∫¨P -->
                        <section class="w-full">
                            <div class="glass-card rounded-[32px] p-4 md:p-6 shadow-xl border-t-4 border-green-500 bg-green-50/20">
                                <div class="flex items-center space-x-3 mb-4">
                                    <div class="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center shadow-lg text-white">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                                    </div>
                                    <h2 class="text-2xl font-black text-gray-800 uppercase tracking-tight">II. Luy·ªán t·∫≠p</h2>
                                </div>

                                <h3 class="text-lg font-bold text-green-700 mb-4 italic leading-relaxed">
                                    3. T√¨m t·ª´ ng·ªØ ƒë∆∞·ª£c l·∫∑p l·∫°i ƒë·ªÉ li√™n k·∫øt c√¢u trong m·ªói ƒëo·∫°n vƒÉn sau:
                                </h3>

                                <div class="space-y-6">
                                    <!-- 3a. Th·∫°ch Sanh -->
                                    <div class="bg-white/90 rounded-2xl p-4 shadow-sm border border-green-100" id="block-231-ex3a" data-feedback-correct="T·ª´ ƒë√†n l·∫∑p l·∫°i c√≥ t√°c d·ª•ng li√™n k·∫øt c√¢u." data-feedback-wrong="B·∫°n ch·ªçn sai r·ªìi, th·ª≠ l·∫°i nh√©!">
                                        <p class="text-sm font-bold text-green-600 mb-2 uppercase tracking-wider">a)</p>
                                        <div class="serif-font text-lg leading-relaxed text-gray-800 exercise-click-word-container">
                                            <p class="interactive-row py-1 px-3 rounded-xl transition-all whitespace-normal" data-compound="true" data-ans="ƒë√†n">
                                                (1) <span class="word">M·ªôt</span> <span class="word">h√¥m</span>, <span class="word">Th·∫°ch</span> <span class="word">Sanh</span> <span class="word">ng·ªìi</span> <span class="word">trong</span> <span class="word">ng·ª•c</span> <span class="word">t·ªëi</span>, <span class="word">ƒëem</span> <span class="word">ƒë√†n</span> <span class="word">c·ªßa</span> <span class="word">vua</span> <span class="word">Thu·ª∑</span> <span class="word">T·ªÅ</span> <span class="word">cho</span> <span class="word">ra</span> <span class="word">g·∫£y</span>. (2) <span class="word">Ti·∫øng</span> <span class="word">ƒë√†n</span> <span class="word">vang</span> <span class="word">l√™n</span> <span class="word">nh∆∞</span> <span class="word">nh·ªØng</span> <span class="word">l·ªùi</span> <span class="word">tr√°ch</span> <span class="word">o√°n</span>, <span class="word">tr√°ch</span> <span class="word">s·ª±</span> <span class="word">h·ªØng</span> <span class="word">h·ªù</span> <span class="word">c·ªßa</span> <span class="word">c√¥ng</span> <span class="word">ch√∫a</span> <span class="word">v√†</span> <span class="word">o√°n</span> <span class="word">s·ª±</span> <span class="word">ƒë·ªôc</span> <span class="word">√°c</span> <span class="word">c·ªßa</span> <span class="word">L√Ω</span> <span class="word">Th√¥ng</span>. (3) <span class="word">Ti·∫øng</span> <span class="word">ƒë√†n</span> <span class="word">v·∫≥ng</span> <span class="word">ƒë·∫øn</span> <span class="word">ho√†ng</span> <span class="word">cung</span>, <span class="word">l·ªçt</span> <span class="word">v√†o</span> <span class="word">tai</span> <span class="word">c√¥ng</span> <span class="word">ch√∫a</span>. (4) <span class="word">V·ª´a</span> <span class="word">nghe</span> <span class="word">ti·∫øng</span> <span class="word">ƒë√†n</span>, <span class="word">c√¥ng</span> <span class="word">ch√∫a</span> <span class="word">b·ªóng</span> <span class="word">c∆∞·ªùi</span> <span class="word">n√≥i</span> <span class="word">vui</span> <span class="word">v·∫ª</span>. (5) <span class="word">N√†ng</span> <span class="word">xin</span> <span class="word">vua</span> <span class="word">cha</span> <span class="word">cho</span> <span class="word">g·ªçi</span> <span class="word">ng∆∞·ªùi</span> <span class="word">ƒë√°nh</span> <span class="word">ƒë√†n</span> <span class="word">v√†o</span> <span class="word">cung</span>.
                                            </p>
                                        </div>
                                        <div class="mt-2 flex items-center gap-3 border-t border-green-50 pt-3">
                                            <button onclick="checkParagraph('block-231-ex3a')" class="px-5 py-2 bg-green-600 text-white text-sm font-bold rounded-xl shadow-md hover:bg-green-700 active:scale-95 transition-all">KI·ªÇM TRA (a)</button>
                                            <button onclick="resetLTVC('block-231-ex3a')" class="px-4 py-2 bg-gray-200 text-gray-700 text-sm font-bold rounded-xl hover:bg-gray-300 transition-all">L√ÄM L·∫†I</button>
                                            <div id="result-block-231-ex3a" class="hidden"></div>
                                        </div>
                                    </div>

                                    <!-- 3b. C√¢y sau sau -->
                                    <div class="bg-white/90 rounded-2xl p-4 shadow-sm border border-green-100" id="block-231-ex3b" data-feedback-correct="T·ª´ l√°, c√¢y sau sau l·∫∑p l·∫°i c√≥ t√°c d·ª•ng li√™n k·∫øt c√¢u." data-feedback-wrong="B·∫°n ch·ªçn sai r·ªìi, th·ª≠ l·∫°i nh√©!">
                                        <p class="text-sm font-bold text-green-600 mb-2 uppercase tracking-wider">b)</p>
                                        <div class="serif-font text-lg leading-relaxed text-gray-800 exercise-click-word-container">
                                            <p class="interactive-row py-1 px-3 rounded-xl transition-all whitespace-normal" data-compound="true" data-ans="l√°,c√¢y sau sau">
                                                (1) <span class="word">Trong</span> <span class="word">r·ª´ng</span>, <span class="word">nh·ªØng</span> <span class="word">c√¢y</span> <span class="word">sau</span> <span class="word">sau</span> <span class="word">ƒë√£</span> <span class="word">ra</span> <span class="word">l√°</span> <span class="word">non</span>. (2) <span class="word">Nh·ªØng</span> <span class="word">m·∫ßm</span> <span class="word">l√°</span> <span class="word">m·ªõi</span> <span class="word">n·∫£y</span> <span class="word">ch∆∞a</span> <span class="word">c√≥</span> <span class="word">m√†u</span> <span class="word">xanh</span>, <span class="word">ch√∫ng</span> <span class="word">mang</span> <span class="word">m√†u</span> <span class="word">n√¢u</span> <span class="word">h·ªìng</span> <span class="word">trong</span> <span class="word">su·ªët</span>. (3) <span class="word">Nh·ªØng</span> <span class="word">l√°</span> <span class="word">l·ªõn</span> <span class="word">h∆°n</span> <span class="word">xanh</span> <span class="word">m∆°n</span> <span class="word">m·ªün</span>. (4) <span class="word">ƒêi</span> <span class="word">d∆∞·ªõi</span> <span class="word">r·ª´ng</span> <span class="word">c√¢y</span> <span class="word">sau</span> <span class="word">sau</span>, <span class="word">t∆∞·ªüng</span> <span class="word">nh∆∞</span> <span class="word">ƒëi</span> <span class="word">d∆∞·ªõi</span> <span class="word">m·ªôt</span> <span class="word">v√≤m</span> <span class="word">nh√†</span> <span class="word">l·ª£p</span> <span class="word">ƒë·∫ßy</span> <span class="word">nh·ªØng</span> <span class="word">ng√¥i</span> <span class="word">sao</span> <span class="word">xanh</span>. (5) <span class="word">√Ånh</span> <span class="word">m·∫∑t</span> <span class="word">tr·ªùi</span> <span class="word">chi·∫øu</span> <span class="word">qua</span> <span class="word">t√°n</span> <span class="word">l√°</span> <span class="word">xu·ªëng</span> <span class="word">nh∆∞</span> <span class="word">m·ªôt</span> <span class="word">√°nh</span> <span class="word">ƒë√®n</span> <span class="word">xanh</span> <span class="word">d·ªãu</span>.
                                            </p>
                                        </div>
                                        <div class="mt-2 flex items-center gap-3 border-t border-green-50 pt-3">
                                            <button onclick="checkParagraph('block-231-ex3b')" class="px-5 py-2 bg-green-600 text-white text-sm font-bold rounded-xl shadow-md hover:bg-green-700 active:scale-95 transition-all">KI·ªÇM TRA (b)</button>
                                            <button onclick="resetLTVC('block-231-ex3b')" class="px-4 py-2 bg-gray-200 text-gray-700 text-sm font-bold rounded-xl hover:bg-gray-300 transition-all">L√ÄM L·∫†I</button>
                                            <div id="result-block-231-ex3b" class="hidden"></div>
                                        </div>
                                    </div>

                                    <!-- 3c. Ch√∫ s∆°n ca -->
                                    <div class="bg-white/90 rounded-2xl p-4 shadow-sm border border-green-100" id="block-231-ex3c" data-feedback-correct="T·ª´ ch√∫ l·∫∑p l·∫°i c√≥ t√°c d·ª•ng li√™n k·∫øt c√¢u." data-feedback-wrong="B·∫°n ch·ªçn sai r·ªìi, th·ª≠ l·∫°i nh√©!">
                                        <p class="text-sm font-bold text-green-600 mb-2 uppercase tracking-wider">c)</p>
                                        <div class="serif-font text-lg leading-relaxed text-gray-800 exercise-click-word-container">
                                            <p class="interactive-row py-1 px-3 rounded-xl transition-all whitespace-normal" data-compound="true" data-ans="ch√∫">
                                                (1) <span class="word">Ch√∫</span> <span class="word">s∆°n</span> <span class="word">ca</span> <span class="word">ti·∫øp</span> <span class="word">t·ª•c</span> <span class="word">v·ªó</span> <span class="word">c√°nh</span> <span class="word">bay</span> <span class="word">l√™n</span> <span class="word">cao</span> <span class="word">v√∫t</span>. (2) <span class="word">Ch√∫</span> <span class="word">th·∫•y</span> <span class="word">c·∫ßn</span> <span class="word">ph·∫£i</span> <span class="word">l√†m</span> <span class="word">m·ªôt</span> <span class="word">chuy·∫øn</span> <span class="word">ƒëi</span> <span class="word">xa</span> <span class="word">ƒë·ªÉ</span> <span class="word">thƒÉm</span> <span class="word">t·∫•t</span> <span class="word">c·∫£</span> <span class="word">m·∫£nh</span> <span class="word">ƒë·∫•t</span> <span class="word">qu√™</span> <span class="word">h∆∞∆°ng</span> <span class="word">c·ªßa</span> <span class="word">ch√∫</span>. (3) <span class="word">ƒê√¥i</span> <span class="word">c√°nh</span> <span class="word">nh·ªè</span> <span class="word">chao</span> <span class="word">ch√°t</span> <span class="word">tr√™n</span> <span class="word">kh√¥ng</span> <span class="word">d·∫´n</span> <span class="word">ch√∫</span> <span class="word">ƒëi</span>. (4) <span class="word">C·∫£nh</span> <span class="word">v·∫≠t</span> <span class="word">loang</span> <span class="word">lo√°ng</span> <span class="word">in</span> <span class="word">v√†o</span> <span class="word">ƒë√¥i</span> <span class="word">m·∫Øt</span> <span class="word">tinh</span> <span class="word">nhanh</span> <span class="word">tuy·ªát</span> <span class="word">di·ªáu</span> <span class="word">c·ªßa</span> <span class="word">ch√∫</span>. (5) <span class="word">Ch√∫</span> <span class="word">xi·∫øt</span> <span class="word">bao</span> <span class="word">kinh</span> <span class="word">ng·∫°c</span> <span class="word">v√¨</span> <span class="word">th·∫•y</span> <span class="word">qu√™</span> <span class="word">h∆∞∆°ng</span> <span class="word">c·ªßa</span> <span class="word">ch√∫</span>, <span class="word">ngo√†i</span> <span class="word">d√£y</span> <span class="word">ƒë·ªìi</span> <span class="word">ƒë·∫ßy</span> <span class="word">m·ªôt</span> <span class="word">m√†u</span> <span class="word">xanh</span> <span class="word">v√†</span> <span class="word">√°nh</span> <span class="word">n·∫Øng</span>, <span class="word">c√≤n</span> <span class="word">tr·∫£i</span> <span class="word">ra</span> <span class="word">bao</span> <span class="word">la</span>!
                                            </p>
                                        </div>
                                        <div class="mt-2 flex items-center gap-3 border-t border-green-50 pt-3">
                                            <button onclick="checkParagraph('block-231-ex3c')" class="px-5 py-2 bg-green-600 text-white text-sm font-bold rounded-xl shadow-md hover:bg-green-700 active:scale-95 transition-all">KI·ªÇM TRA (c)</button>
                                            <button onclick="resetLTVC('block-231-ex3c')" class="px-4 py-2 bg-gray-200 text-gray-700 text-sm font-bold rounded-xl hover:bg-gray-300 transition-all">L√ÄM L·∫†I</button>
                                            <div id="result-block-231-ex3c" class="hidden"></div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </section>

                        <!-- 4. V·∫¨N D·ª§NG -->
                        <section class="w-full pb-8">
                            <div class="glass-card rounded-[32px] p-4 md:p-6 shadow-xl border-t-4 border-rose-500">
                                <div class="flex items-center space-x-3 mb-4">
                                    <div class="w-10 h-10 bg-rose-600 rounded-lg flex items-center justify-center shadow-lg text-white">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>
                                    </div>
                                    <h2 class="text-2xl font-black text-gray-800 uppercase tracking-tight">III. V·∫≠n d·ª•ng</h2>
                                </div>
                                <div class="bg-rose-50/50 rounded-2xl p-4 border border-rose-100">
                                    <p class="text-lg font-bold text-gray-700 mb-3 border-l-4 border-rose-400 pl-3 italic">Vi·∫øt 2-3 c√¢u v·ªÅ m·ªôt l·ªÖ h·ªôi, trong ƒë√≥ c√°c c√¢u li√™n k·∫øt v·ªõi nhau b·∫±ng c√°ch l·∫∑p t·ª´ ng·ªØ.</p>
                                    <textarea id="ai-231-q4" rows="2" placeholder="V√≠ d·ª•: H·ªôi Lim r·∫•t vui. H·ªôi Lim di·ªÖn ra v√†o m√πa xu√¢n..." class="w-full p-4 serif-font text-lg rounded-xl border-2 border-rose-100 focus:border-rose-400 outline-none shadow-inner bg-rose-50/20"></textarea>
                                    <div class="mt-3 flex gap-3">
                                        <button onclick="checkLTVC231_Q4()" class="px-5 py-2 bg-rose-600 text-white text-sm font-bold rounded-xl shadow-md hover:bg-rose-700 active:scale-95 transition-all">ü§ñ AI CH·∫§M</button>
                                        <button onclick="resetLTVC('ai-231-q4'); document.getElementById('fb-231-q4').classList.add('hidden');" class="px-4 py-2 bg-gray-200 text-gray-700 text-sm font-bold rounded-xl hover:bg-gray-300 transition-all">L√ÄM L·∫†I</button>
                                        <button onclick="submitLTVCUnified('231-q4')" class="px-5 py-2 bg-gray-800 text-white text-sm font-bold rounded-xl shadow-md hover:bg-black transition-all">üöÄ N·ªòP B√ÄI</button>
                                    </div>
                                    <div id="fb-231-q4" class="hidden mt-3 p-4 bg-white border border-rose-200 rounded-xl shadow-sm text-sm italic"></div>
                                </div>
                            </div>
                        </section>
                    </div>`
                }
            ]
        },
        "quiz": {
            "settings": { "pick": 10 },
            "questions": [
                {
                    "q": "C√°c c√¢u trong m·ªôt ƒëo·∫°n vƒÉn c√≥ th·ªÉ li√™n k·∫øt with nhau b·∫±ng c√°ch n√†o d∆∞·ªõi ƒë√¢y?",
                    "a": ["L·∫∑p l·∫°i t·ª´ ng·ªØ ·ªü c√¢u tr∆∞·ªõc", "D√πng t·ª´ ng·ªØ c√≥ nghƒ©a tr√°i ng∆∞·ª£c", "Thay ƒë·ªïi ch·ªß ƒë·ªÅ ho√†n to√†n", "D√πng c√¢u th·∫≠t d√†i"],
                    "c": 0
                },
                {
                    "q": "Trong ƒëo·∫°n vƒÉn v·ªÅ D·∫ø Cho·∫Øt, t√°c gi·∫£ l·∫∑p l·∫°i t√™n nh√¢n v·∫≠t nh·∫±m m·ª•c ƒë√≠ch g√¨?",
                    "a": ["ƒê·ªÉ b√†i d√†i h∆°n", "ƒê·ªÉ t·∫°o s·ª± li√™n k·∫øt gi·ªØa c√°c c√¢u", "ƒê·ªÉ nh·∫•n m·∫°nh s·ª± y·∫øu ƒëu·ªëi", "ƒê·ªÉ khoe t√™n nh√¢n v·∫≠t"],
                    "c": 1
                },
                {
                    "q": "ƒêi·ªÅn t·ª´ v√†o ch·ªó tr·ªëng: 'Hoa gi·∫•y ƒë·∫πp m·ªôt c√°ch gi·∫£n d·ªã. M·ªói c√°nh ... gi·ªëng h·ªát m·ªôt chi·∫øc l√°.'",
                    "a": ["l√°", "nh·ª•y", "hoa", "c√†nh"],
                    "c": 2
                },
                {
                    "q": "C√¢u 'M·ªôt h√¥m, Th·∫°ch Sanh ng·ªìi trong ng·ª•c t·ªëi... Ti·∫øng ƒë√†n vang l√™n...' s·ª≠ d·ª•ng c√°ch li√™n k·∫øt n√†o?",
                    "a": ["D√πng t·ª´ n·ªëi", "L·∫∑p t·ª´ ng·ªØ", "Thay th·∫ø t·ª´ ng·ªØ", "Kh√¥ng c√≥ li√™n k·∫øt"],
                    "c": 1
                },
                {
                    "q": "Ph√©p l·∫∑p t·ª´ ng·ªØ gi√∫p ƒëo·∫°n vƒÉn:",
                    "a": ["R·ªùi r·∫°c h∆°n", "Kh√≥ hi·ªÉu h∆°n", "Ch·∫∑t ch·∫Ω v√† th·ªëng nh·∫•t v·ªÅ n·ªôi dung", "D√†i d√≤ng v√¥ √≠ch"],
                    "c": 2
                }
            ]
        }
    }
};

// --- Helper functions for Lesson 231 LTVC ---
window.checkEx1bAI = async function () {
    const input = document.getElementById('ai-231-ex1b');
    if (!input || !input.value.trim()) { alert("Em h√£y nh·∫≠p c√¢u tr·∫£ l·ªùi cho m·ª•c b nh√©!"); return; }
    const fb = document.getElementById('fb-231-ex1b');
    fb.classList.remove('hidden');
    fb.innerHTML = "ü§ñ ƒê·ª£i Th·∫ßy xem c√¢u tr·∫£ l·ªùi c·ªßa em...";

    if (typeof askAI === 'function') {
        const prefix = "Em h√£y nh·∫≠n x√©t c√¢u tr·∫£ l·ªùi c·ªßa h·ªçc sinh v·ªÅ t√°c d·ª•ng c·ªßa vi·ªác l·∫∑p l·∫°i t·ª´ ng·ªØ (t√¥i, D·∫ø Cho·∫Øt) trong ƒëo·∫°n vƒÉn c·ªßa T√¥ Ho√†i. T√°c d·ª•ng ch√≠nh l√† ƒë·ªÉ li√™n k·∫øt c√°c c√¢u vƒÉn v·ªõi nhau. H√£y khen n·∫øu h·ªçc sinh n√™u ƒë∆∞·ª£c √Ω li√™n k·∫øt, ho·∫∑c g·ª£i √Ω th√™m n·∫øu ch∆∞a r√µ: ";
        await askAI('231-ex1b', prefix, 'single', 'ltvc', 23);
    } else {
        fb.innerHTML = "L·ªói: H·ªá th·ªëng ch·∫•m ƒëi·ªÉm ch∆∞a s·∫µn s√†ng.";
    }
};

window.checkLTVC231_Q4 = async function () {
    const input = document.getElementById('ai-231-q4');
    if (!input || !input.value.trim()) { alert("Em h√£y vi·∫øt v√†i c√¢u v·ªÅ l·ªÖ h·ªôi nh√©!"); return; }
    const fb = document.getElementById('fb-231-q4');
    fb.classList.remove('hidden');
    fb.innerHTML = "ü§ñ Th·∫ßy ƒëang ƒë·ªçc b√†i c·ªßa em...";

    if (typeof askAI === 'function') {
        const prefix = "H√£y nh·∫≠n x√©t ƒëo·∫°n vƒÉn ng·∫Øn (2-3 c√¢u) c·ªßa h·ªçc sinh v·ªÅ m·ªôt l·ªÖ h·ªôi, y√™u c·∫ßu c√≥ s·ª≠ d·ª•ng ph√©p l·∫∑p ƒë·ªÉ li√™n k·∫øt c√¢u: ";
        await askAI('231-q4', prefix, 'single', 'ltvc', 23);
    } else {
        fb.innerHTML = "L·ªói: H·ªá th·ªëng ch·∫•m ƒëi·ªÉm AI ch∆∞a s·∫µn s√†ng.";
    }
};

window.checkEx231_2 = function () {
    const v1 = document.getElementById('ex231-2-1').value;
    const v2 = document.getElementById('ex231-2-2').value;
    const fb = document.getElementById('fb-231-ex2');
    fb.classList.remove('hidden');
    if (v1 === 'hoa' && v2 === 'hoa') {
        fb.innerHTML = "‚úÖ Ch√≠nh x√°c! T·ª´ 'hoa' ƒë∆∞·ª£c l·∫∑p l·∫°i ƒë·ªÉ li√™n k·∫øt c√¢u.";
        fb.className = "text-green-600 font-bold ml-4";
        if (typeof celebrate === 'function') celebrate();
    } else {
        fb.innerHTML = "‚ùå Ch∆∞a ƒë√∫ng r·ªìi, em h√£y ch·ªçn l·∫°i t·ª´ ƒë·ªÉ li√™n k·∫øt v·ªõi 'Hoa gi·∫•y' ·ªü c√¢u 1 nh√©!";
        fb.className = "text-red-500 font-bold ml-4";
    }
};
