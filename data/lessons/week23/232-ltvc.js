window.LESSON_DATA = window.LESSON_DATA || { lessons: {} };
window.LESSON_DATA.lessons["232-ltvc"] = {
    "title": "LTVC: Quy t·∫Øc vi·∫øt t√™n c∆° quan, t·ªï ch·ª©c",
    "week": 23,
    "subject": "LTVC",
    "theme": "H∆∞∆°ng s·∫Øc trƒÉm mi·ªÅn",
    "tabs": {
        "lesson": {
            "title": "B√†i h·ªçc",
            "blocks": [
                { "type": "header", "text": "Quy t·∫Øc vi·∫øt t√™n c∆° quan, t·ªï ch·ª©c" },
                {
                    "type": "html",
                    "id": "block-232-ltvc-main",
                    "content": `<div class="space-y-8 animate-in fade-in duration-700">
                        <!-- I. KH√ÅM PH√Å -->
                        <section class="w-full">
                            <div class="glass-card rounded-[40px] p-6 md:p-10 shadow-2xl relative overflow-hidden ring-1 ring-blue-100">
                                <div class="flex items-center space-x-4 mb-8">
                                    <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg text-white">
                                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-black text-gray-800 uppercase tracking-tight">I. Kh√°m ph√°</h2>
                                </div>

                                <div class="mb-8">
                                    <h3 class="text-xl font-bold text-blue-700 mb-4 italic">1. C√°ch vi·∫øt hoa t√™n c√°c c∆° quan, t·ªï ch·ª©c d∆∞·ªõi ƒë√¢y c√≥ g√¨ ƒë·∫∑c bi·ªát?</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="bg-blue-50/50 p-6 rounded-2xl border border-blue-100 flex items-center shadow-sm hover:shadow-md transition-shadow">
                                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold mr-4 shrink-0">1</div>
                                            <p class="text-xl serif-font font-bold text-blue-900 leading-tight">Tr∆∞·ªùng Ti·ªÉu h·ªçc <span class="text-red-600">L√Ω T·ª± Tr·ªçng</span></p>
                                        </div>
                                        <div class="bg-blue-50/50 p-6 rounded-2xl border border-blue-100 flex items-center shadow-sm hover:shadow-md transition-shadow">
                                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold mr-4 shrink-0">2</div>
                                            <p class="text-xl serif-font font-bold text-blue-900 leading-tight">ƒê·ªôi Thi·∫øu ni√™n <span class="text-red-600">Ti·ªÅn phong H·ªì Ch√≠ Minh</span></p>
                                        </div>
                                        <div class="bg-blue-50/50 p-6 rounded-2xl border border-blue-100 flex items-center shadow-sm hover:shadow-md transition-shadow">
                                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold mr-4 shrink-0">3</div>
                                            <p class="text-xl serif-font font-bold text-blue-900 leading-tight">Nh√† xu·∫•t b·∫£n <span class="text-red-600">Gi√°o d·ª•c Vi·ªát Nam</span></p>
                                        </div>
                                        <div class="bg-blue-50/50 p-6 rounded-2xl border border-blue-100 flex items-center shadow-sm hover:shadow-md transition-shadow">
                                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold mr-4 shrink-0">4</div>
                                            <p class="text-xl serif-font font-bold text-blue-900 leading-tight">T·∫≠p ƒëo√†n <span class="text-red-600">ƒêi·ªán l·ª±c Vi·ªát Nam</span></p>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-6 bg-amber-50 rounded-2xl p-6 border border-amber-200">
                                        <p class="text-gray-700 text-lg leading-relaxed italic">
                                            <span class="font-bold text-amber-700">Nh·∫≠n x√©t:</span> T√™n c∆° quan, t·ªï ch·ª©c th∆∞·ªùng g·ªìm c√°c b·ªô ph·∫≠n (t·ª´ lo·∫°i). Ta vi·∫øt hoa <span class="text-red-600 font-bold underline">ch·ªØ c√°i ƒë·∫ßu</span> c·ªßa m·ªói b·ªô ph·∫≠n t·∫°o n√™n t√™n ƒë√≥.
                                        </p>
                                    </div>
                                </div>

                                <!-- Ghi nh·ªõ -->
                                <div class="bg-indigo-900 text-white rounded-[32px] p-8 md:p-10 shadow-xl relative overflow-hidden">
                                    <div class="absolute right-0 top-0 w-32 h-32 bg-white/10 rounded-full blur-2xl"></div>
                                    <div class="flex flex-col md:flex-row items-center gap-8 relative z-10">
                                        <div class="bg-white/20 p-6 rounded-2xl backdrop-blur-sm shrink-0">
                                            <svg class="w-10 h-10 text-yellow-300" fill="currentColor" viewBox="0 0 20 20"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path></svg>
                                        </div>
                                        <div>
                                            <h3 class="text-2xl font-black uppercase tracking-widest mb-4 text-yellow-300">Ghi nh·ªõ</h3>
                                            <p class="text-xl md:text-2xl font-medium leading-relaxed serif-font">
                                                ƒê·ªÉ vi·∫øt t√™n c√°c c∆° quan, t·ªï ch·ª©c, em c·∫ßn vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu c·ªßa m·ªói b·ªô ph·∫≠n t·∫°o n√™n t√™n ƒë√≥. 
                                            </p>
                                            <p class="text-lg mt-4 opacity-80 italic">V√≠ d·ª•: Tr∆∞·ªùng / Ti·ªÉu h·ªçc / Ba ƒê√¨nh; Ban / Qu·∫£n l√Ω / d·ª± √°n.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- II. LUY·ªÜN T·∫¨P -->
                        <section class="w-full">
                            <div class="glass-card rounded-[40px] p-6 md:p-10 shadow-xl border-t-8 border-green-500 bg-green-50/10">
                                <div class="flex items-center space-x-4 mb-8">
                                    <div class="w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center shadow-lg text-white">
                                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-black text-gray-800 uppercase tracking-tight">II. Luy·ªán t·∫≠p</h2>
                                </div>

                                <!-- B√†i t·∫≠p 1: S·ª≠a l·ªói vi·∫øt hoa -->
                                <div class="mb-12">
                                    <h3 class="text-lg font-bold text-green-700 mb-4 italic leading-relaxed">1. T√¨m c√°c t√™n c∆° quan, t·ªï ch·ª©c vi·∫øt ch∆∞a ƒë√∫ng quy t·∫Øc trong ƒëo·∫°n vƒÉn d∆∞·ªõi ƒë√¢y v√† s·ª≠a l·∫°i cho ƒë√∫ng:</h3>
                                    <div class="bg-white rounded-3xl p-6 md:p-8 shadow-inner border border-green-100 mb-6">
                                        <div class="serif-font text-xl leading-loose text-gray-800 text-justify">
                                            <p class="indent-8">
                                                (1) <span class="bg-red-50 px-1 border-b-2 border-dashed border-red-300">tr∆∞·ªùng ti·ªÉu h·ªçc thanh xu√¢n</span> l√† n∆°i em ƒëang h·ªçc t·∫≠p. (2) Ng√¥i tr∆∞·ªùng do <span class="bg-red-50 px-1 border-b-2 border-dashed border-red-300">·ªßy ban nh√¢n d√¢n Th√†nh ph·ªë H√† n·ªôi</span> th√†nh l·∫≠p. (3) Em lu√¥n t·ª± h√†o v√¨ m√¨nh l√† ƒë·ªôi vi√™n c·ªßa <span class="bg-red-50 px-1 border-b-2 border-dashed border-red-300">ƒë·ªôi thi·∫øu ni√™n ti·ªÅn phong H·ªì Ch√≠ Minh</span>.
                                            </p>
                                        </div>
                                    </div>

                                    <div class="space-y-4">
                                        <div class="flex flex-col md:flex-row items-center gap-4">
                                            <span class="w-full md:w-1/3 font-bold text-gray-600 uppercase text-sm">C√¢u (1):</span>
                                            <input type="text" id="ltvc-232-1-1" class="flex-grow p-4 rounded-2xl border-2 border-gray-100 focus:border-green-400 outline-none shadow-sm serif-font text-lg" placeholder="S·ª≠a c√¢u (1)...">
                                        </div>
                                        <div class="flex flex-col md:flex-row items-center gap-4">
                                            <span class="w-full md:w-1/3 font-bold text-gray-600 uppercase text-sm">C√¢u (2):</span>
                                            <input type="text" id="ltvc-232-1-2" class="flex-grow p-4 rounded-2xl border-2 border-gray-100 focus:border-green-400 outline-none shadow-sm serif-font text-lg" placeholder="S·ª≠a c√¢u (2)...">
                                        </div>
                                        <div class="flex flex-col md:flex-row items-center gap-4">
                                            <span class="w-full md:w-1/3 font-bold text-gray-600 uppercase text-sm">C√¢u (3):</span>
                                            <input type="text" id="ltvc-232-1-3" class="flex-grow p-4 rounded-2xl border-2 border-gray-100 focus:border-green-400 outline-none shadow-sm serif-font text-lg" placeholder="S·ª≠a c√¢u (3)...">
                                        </div>
                                    </div>

                                    <div class="mt-6 flex items-center gap-4">
                                        <button onclick="checkCorrectLTVC232_1()" class="px-8 py-3 bg-green-600 text-white font-black rounded-2xl shadow-lg hover:bg-green-700 transition-all active:scale-95">KI·ªÇM TRA</button>
                                        <button onclick="resetLTVCInputs(['ltvc-232-1-1', 'ltvc-232-1-2', 'ltvc-232-1-3'])" class="px-6 py-3 bg-gray-200 text-gray-700 font-bold rounded-2xl hover:bg-gray-300 transition-all">L√ÄM L·∫†I</button>
                                        <div id="fb-ltvc-232-1" class="hidden font-bold"></div>
                                    </div>
                                </div>

                                <!-- B√†i t·∫≠p 2: ƒêi·ªÅn t√™n c∆° quan -->
                                <div>
                                    <h3 class="text-lg font-bold text-green-700 mb-4 italic leading-relaxed">2. Vi·∫øt t√™n c∆° quan, t·ªï ch·ª©c theo c√°c b·ªô ph·∫≠n ƒë√£ ƒë∆∞·ª£c g·ª£i √Ω s·∫µn:</h3>
                                    <div class="space-y-6">
                                        <div class="bg-white/80 p-6 rounded-3xl border border-green-100 shadow-sm">
                                            <div class="flex flex-col md:flex-row md:items-center gap-3 mb-4">
                                                <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-black uppercase">V√≠ d·ª•</span>
                                                <p class="text-gray-700 italic font-medium">B·ªô ph·∫≠n 1: Nh√† xu·∫•t b·∫£n | B·ªô ph·∫≠n 2: Gi√°o d·ª•c | B·ªô ph·∫≠n 3: Vi·ªát Nam</p>
                                            </div>
                                            <div class="flex flex-col md:flex-row items-baseline gap-2">
                                                <span class="text-2xl text-green-500">‚ûú</span>
                                                <p class="text-2xl font-black text-gray-800 serif-font">Nh√† xu·∫•t b·∫£n Gi√°o d·ª•c Vi·ªát Nam</p>
                                            </div>
                                        </div>

                                        <div class="bg-white/80 p-6 rounded-3xl border border-green-100 shadow-sm">
                                            <p class="text-gray-700 italic font-medium mb-4">a) B·ªô ph·∫≠n 1: <span class="text-blue-600">Tr∆∞·ªùng</span> | B·ªô ph·∫≠n 2: <span class="text-blue-600">Ti·ªÉu h·ªçc</span> | B·ªô ph·∫≠n 3: <span class="text-blue-600">Nguy·ªÖn Du</span></p>
                                            <input type="text" id="ltvc-232-2-a" class="w-full p-4 rounded-xl border-2 border-gray-100 focus:border-green-400 outline-none shadow-inner serif-font text-xl" placeholder="Vi·∫øt k·∫øt qu·∫£ v√†o ƒë√¢y...">
                                        </div>

                                        <div class="bg-white/80 p-6 rounded-3xl border border-green-100 shadow-sm">
                                            <p class="text-gray-700 italic font-medium mb-4">b) B·ªô ph·∫≠n 1: <span class="text-blue-600">H·ªôi ƒë·ªìng</span> | B·ªô ph·∫≠n 2: <span class="text-blue-600">ƒê·ªôi</span> | B·ªô ph·∫≠n 3: <span class="text-blue-600">Trung ∆∞∆°ng</span></p>
                                            <input type="text" id="ltvc-232-2-b" class="w-full p-4 rounded-xl border-2 border-gray-100 focus:border-green-400 outline-none shadow-inner serif-font text-xl" placeholder="Vi·∫øt k·∫øt qu·∫£ v√†o ƒë√¢y...">
                                        </div>
                                    </div>
                                    
                                    <div class="mt-6 flex items-center gap-4">
                                        <button onclick="checkCorrectLTVC232_2()" class="px-8 py-3 bg-teal-600 text-white font-black rounded-2xl shadow-lg hover:bg-teal-700 transition-all active:scale-95">KI·ªÇM TRA</button>
                                        <button onclick="resetLTVCInputs(['ltvc-232-2-a', 'ltvc-232-2-b'])" class="px-6 py-3 bg-gray-200 text-gray-700 font-bold rounded-2xl hover:bg-gray-300 transition-all">L√ÄM L·∫†I</button>
                                        <div id="fb-ltvc-232-2" class="hidden font-bold"></div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- III. V·∫¨N D·ª§NG -->
                        <section class="w-full pb-10">
                            <div class="glass-card rounded-[40px] p-6 md:p-10 shadow-2xl border-t-8 border-rose-500 bg-rose-50/10 relative overflow-hidden">
                                <div class="absolute -right-20 -bottom-20 w-60 h-60 bg-rose-200/20 rounded-full blur-3xl"></div>
                                <div class="flex items-center space-x-4 mb-8">
                                    <div class="w-12 h-12 bg-rose-600 rounded-xl flex items-center justify-center shadow-lg text-white">
                                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-black text-gray-800 uppercase tracking-tight text-shadow-sm">III. V·∫≠n d·ª•ng</h2>
                                </div>
                                <div class="bg-white/80 rounded-[32px] p-8 border border-rose-100 shadow-xl relative z-10">
                                    <p class="text-xl md:text-2xl font-bold text-gray-700 mb-6 leading-relaxed flex items-start gap-4">
                                        <span class="text-4xl text-rose-500">‚úçÔ∏è</span>
                                        Vi·∫øt t√™n m·ªôt s·ªë c∆° quan, t·ªï ch·ª©c ·ªü ƒë·ªãa ph∆∞∆°ng em m√† em bi·∫øt. S·ª≠ d·ª•ng ƒë√∫ng quy t·∫Øc vi·∫øt hoa ƒë√£ h·ªçc.
                                    </p>
                                    <textarea id="ai-232-ltvc-q3" rows="3" placeholder="V√≠ d·ª•: Tr∆∞·ªùng Ti·ªÉu h·ªçc Nguy·ªÖn T·∫•t Th√†nh, ·ª¶y ban nh√¢n d√¢n x√£..." class="w-full p-6 serif-font text-2xl rounded-2xl border-2 border-rose-100 focus:border-rose-400 outline-none shadow-inner bg-rose-50/20 transition-all duration-300"></textarea>
                                    
                                    <div class="mt-8 flex flex-wrap gap-4">
                                        <button onclick="checkCorrectLTVC232_AI()" class="px-8 py-3 bg-rose-600 text-white font-black rounded-2xl shadow-lg hover:bg-rose-700 active:scale-95 transition-all">ü§ñ AI KI·ªÇM TRA</button>
                                        <button onclick="resetLTVC('ai-232-ltvc-q3'); document.getElementById('fb-ai-232-ltvc').classList.add('hidden');" class="px-6 py-3 bg-gray-200 text-gray-700 font-bold rounded-2xl hover:bg-gray-300 transition-all text-sm">L√ÄM L·∫†I</button>
                                        <button onclick="submitLTVCUnified('232-ltvc')" class="px-8 py-3 bg-gray-800 text-white font-black rounded-2xl shadow-lg hover:bg-black transition-all active:scale-95 text-sm ml-auto">üöÄ N·ªòP B√ÄI T·ªîNG H·ª¢P</button>
                                    </div>
                                    <div id="fb-ai-232-ltvc" class="hidden mt-6 p-6 bg-rose-50 border border-rose-200 rounded-2xl shadow-sm italic serif-font text-lg animate-in slide-in-from-top-4 duration-300"></div>
                                </div>
                            </div>
                        </section>
                    </div>`
                }
            ]
        },
        "quiz": {
            "settings": { "pick": 10 },
            "questions": [
                { "q": "Quy t·∫Øc vi·∫øt hoa t√™n c∆° quan, t·ªï ch·ª©c l√† g√¨?", "a": ["Vi·∫øt hoa t·∫•t c·∫£ c√°c ch·ªØ c√°i", "Vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu c·ªßa m·ªói b·ªô ph·∫≠n t·∫°o n√™n t√™n ƒë√≥", "Ch·ªâ vi·∫øt hoa b·ªô ph·∫≠n ƒë·∫ßu ti√™n", "Ch·ªâ vi·∫øt hoa t√™n ri√™ng c√≥ trong ƒë√≥"], "c": 1 },
                { "q": "T·ª´ 'Ti·ªÉu h·ªçc' trong c·ª•m 'Tr∆∞·ªùng Ti·ªÉu h·ªçc' ƒë∆∞·ª£c coi l√† m·ªôt b·ªô ph·∫≠n?", "a": ["ƒê√∫ng", "Sai"], "c": 0 },
                { "q": "Ch·ªçn c√°ch vi·∫øt ƒë√∫ng cho t√™n c∆° quan sau:", "a": ["·ªßy ban nh√¢n d√¢n th√†nh ph·ªë", "·ª¶y Ban Nh√¢n D√¢n Th√†nh Ph·ªë", "·ª¶y ban nh√¢n d√¢n th√†nh ph·ªë", "·ª¶y ban Nh√¢n d√¢n Th√†nh ph·ªë"], "c": 2 },
                { "q": "Trong t√™n 'Tr∆∞·ªùng Ti·ªÉu h·ªçc L√™ L·ª£i', b·ªô ph·∫≠n n√†o l√† t√™n ri√™ng c·ªßa ng∆∞·ªùi?", "a": ["Tr∆∞·ªùng", "Ti·ªÉu h·ªçc", "L√™ L·ª£i", "Kh√¥ng c√≥"], "c": 2 },
                { "q": "T·∫°i sao 'X√≠ nghi·ªáp' trong 'X√≠ nghi·ªáp B·∫£n ƒë·ªì' ph·∫£i vi·∫øt hoa ch·ªØ X?", "a": ["V√¨ l√† t√™n ri√™ng", "V√¨ l√† ch·ªØ c√°i ƒë·∫ßu c·ªßa b·ªô ph·∫≠n th·ª© nh·∫•t", "V√¨ n√≥ ƒë·ª©ng ƒë·∫ßu c√¢u", "Vi·∫øt hoa cho ƒë·∫πp"], "c": 1 }
            ]
        }
    }
};

// --- Logic Functions for 232 LTVC ---

window.checkCorrectLTVC232_1 = function () {
    const v1 = document.getElementById('ltvc-232-1-1').value.trim();
    const v2 = document.getElementById('ltvc-232-1-2').value.trim();
    const v3 = document.getElementById('ltvc-232-1-3').value.trim();
    const fb = document.getElementById('fb-ltvc-232-1');
    fb.classList.remove('hidden');

    const ans1 = "Tr∆∞·ªùng Ti·ªÉu h·ªçc Thanh Xu√¢n";
    const ans2 = "·ª¶y ban nh√¢n d√¢n Th√†nh ph·ªë H√† N·ªôi";
    const ans3 = "ƒê·ªôi Thi·∫øu ni√™n Ti·ªÅn phong H·ªì Ch√≠ Minh";

    let score = 0;
    if (v1.toLowerCase() === ans1.toLowerCase()) score++;
    if (v2.toLowerCase() === ans2.toLowerCase()) score++;
    if (v3.toLowerCase() === ans3.toLowerCase()) score++;

    if (score === 3) {
        fb.innerHTML = "‚úÖ Tuy·ªát v·ªùi! Em ƒë√£ s·ª≠a ƒë√∫ng h·∫øt t·∫•t c·∫£ c√°c t√™n c∆° quan, t·ªï ch·ª©c.";
        fb.className = "text-green-600 font-bold mt-4";
        if (typeof celebrate === 'function') celebrate();
    } else {
        fb.innerHTML = `‚ùå Em ƒë√∫ng ƒë∆∞·ª£c ${score}/3 c√¢u. H√£y ch√∫ √Ω vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu c·ªßa M·ªñI b·ªô ph·∫≠n nh√©!`;
        fb.className = "text-red-500 font-bold mt-4";
    }
};

window.checkCorrectLTVC232_2 = function () {
    const va = document.getElementById('ltvc-232-2-a').value.trim();
    const vb = document.getElementById('ltvc-232-2-b').value.trim();
    const fb = document.getElementById('fb-ltvc-232-2');
    fb.classList.remove('hidden');

    const ansa = "Tr∆∞·ªùng Ti·ªÉu h·ªçc Nguy·ªÖn Du";
    const ansb = "H·ªôi ƒë·ªìng ƒê·ªôi Trung ∆∞∆°ng";

    let correct = 0;
    if (va === ansa) correct++;
    if (vb === ansb) correct++;

    if (correct === 2) {
        fb.innerHTML = "‚úÖ Ch√≠nh x√°c! Em ƒë√£ gh√©p c√°c b·ªô ph·∫≠n v√† vi·∫øt hoa ƒë√∫ng quy t·∫Øc.";
        fb.className = "text-green-600 font-bold mt-4";
        if (typeof celebrate === 'function') celebrate();
    } else {
        fb.innerHTML = "‚ùå C√≥ ch·ªó ch∆∞a ƒë√∫ng v·ªÅ c√°ch vi·∫øt hoa b·ªô ph·∫≠n. Em th·ª≠ ki·ªÉm tra l·∫°i nh√©!";
        fb.className = "text-red-500 font-bold mt-4";
    }
};

window.checkCorrectLTVC232_AI = async function () {
    const input = document.getElementById('ai-232-ltvc-q3');
    if (!input || !input.value.trim()) { alert("Em h√£y nh·∫≠p t√™n c∆° quan m√† em bi·∫øt nh√©!"); return; }
    const fb = document.getElementById('fb-ai-232-ltvc');
    fb.classList.remove('hidden');
    fb.innerHTML = "ü§ñ Th·∫ßy ƒëang ki·ªÉm tra xem em vi·∫øt ƒë√∫ng quy t·∫Øc ch∆∞a...";

    if (typeof askAI === 'function') {
        const prefix = "Em h√£y ki·ªÉm tra xem t√™n c∆° quan, t·ªï ch·ª©c m√† h·ªçc sinh vi·∫øt d∆∞·ªõi ƒë√¢y c√≥ ƒë√∫ng quy t·∫Øc vi·∫øt hoa (vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu m·ªói b·ªô ph·∫≠n) hay kh√¥ng. V√≠ d·ª•: 'Tr∆∞·ªùng Ti·ªÉu h·ªçc Kim ƒê·ªìng' l√† ƒë√∫ng. 'U·ª∑ ban nh√¢n d√¢n X√£' (ch·ªØ X vi·∫øt hoa d∆∞) l√† sai. H√£y nh·∫≠n x√©t ng·∫Øn g·ªçn v√† c·ªï v≈©: ";
        await askAI('232-ltvc-q3', prefix, 'single', 'ltvc', 232);
    } else {
        fb.innerHTML = "L·ªói: H·ªá th·ªëng ch·∫•m ƒëi·ªÉm AI ch∆∞a s·∫µn s√†ng.";
    }
};

window.resetLTVCInputs = function (ids) {
    ids.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.value = "";
    });
    const subId = ids[0].split('-')[0] + '-' + ids[0].split('-')[1] + '-' + ids[0].split('-')[2];
    const fb = document.getElementById('fb-' + ids[0].slice(0, ids[0].lastIndexOf('-')));
    if (fb) fb.classList.add('hidden');
};
