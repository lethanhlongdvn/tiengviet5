window.LESSON_DATA = window.LESSON_DATA || { lessons: {} };
window.LESSON_DATA.lessons["232-viet"] = {
    "title": "Vi·∫øt: Luy·ªán t·∫≠p vi·∫øt ƒëo·∫°n vƒÉn th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c v·ªÅ m·ªôt s·ª± vi·ªác",
    "week": 23,
    "subject": "Vi·∫øt",
    "theme": "H∆∞∆°ng s·∫Øc trƒÉm mi·ªÅn",
    "tabs": {
        "lesson": {
            "title": "B√†i h·ªçc",
            "blocks": [
                { "type": "header", "text": "Luy·ªán t·∫≠p vi·∫øt ƒëo·∫°n vƒÉn th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c v·ªÅ m·ªôt s·ª± vi·ªác" },
                {
                    "type": "html",
                    "id": "block-232-v1",
                    "content": `<div class="space-y-8 animate-in fade-in duration-700">
                        <!-- 1. CHU·∫®N B·ªä -->
                        <section class="w-full">
                            <div class="glass-card rounded-[40px] p-6 md:p-10 shadow-2xl relative overflow-hidden ring-1 ring-blue-100">
                                <div class="flex items-center space-x-4 mb-8">
                                    <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg text-white">
                                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-black text-gray-800 uppercase tracking-tight">I. Chu·∫©n b·ªã</h2>
                                </div>

                                <div class="mb-10">
                                    <h3 class="text-lg font-bold text-blue-700 mb-4 italic leading-relaxed">
                                        ƒê·ªÅ b√†i: Vi·∫øt ƒëo·∫°n vƒÉn th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c v·ªÅ m·ªôt s·ª± vi·ªác ƒë√£ mang l·∫°i ni·ªÅm vui cho em v√† ng∆∞·ªùi th√¢n.
                                    </h3>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                                        <div class="p-6 bg-blue-50 rounded-2xl border-2 border-blue-100 shadow-sm flex flex-col items-center text-center">
                                            <div class="text-3xl mb-3">üè†</div>
                                            <p class="font-bold text-blue-900">S·ª± vi·ªác gia ƒë√¨nh</p>
                                            <p class="text-sm text-gray-500">B·ªØa c∆°m sum h·ªçp, c√πng d·ªçn d·∫πp nh√† c·ª≠a...</p>
                                        </div>
                                        <div class="p-6 bg-green-50 rounded-2xl border-2 border-green-100 shadow-sm flex flex-col items-center text-center">
                                            <div class="text-3xl mb-3">üéÅ</div>
                                            <p class="font-bold text-green-900">S·ª± vi·ªác b·∫•t ng·ªù</p>
                                            <p class="text-sm text-gray-500">ƒê∆∞·ª£c t·∫∑ng qu√†, ƒë·∫°t ƒëi·ªÉm t·ªët...</p>
                                        </div>
                                        <div class="p-6 bg-amber-50 rounded-2xl border-2 border-amber-100 shadow-sm flex flex-col items-center text-center">
                                            <div class="text-3xl mb-3">üå±</div>
                                            <p class="font-bold text-amber-900">G·ª£i √Ω kh√°c</p>
                                            <p class="text-sm text-gray-500">Gi√∫p ƒë·ª° ng∆∞·ªùi kh√°c, tr·ªìng c√¢y c√πng b·ªë...</p>
                                        </div>
                                    </div>

                                    <div class="bg-white rounded-3xl p-6 border-2 border-dashed border-blue-200">
                                        <p class="font-bold text-blue-800 mb-4">Em h√£y l·∫≠p d√†n √Ω nhanh cho ƒëo·∫°n vƒÉn c·ªßa m√¨nh:</p>
                                        <div class="space-y-4">
                                            <div class="flex flex-col md:flex-row gap-4">
                                                <span class="w-full md:w-40 font-black text-xs uppercase text-blue-500 pt-3">M·ªü ƒë·∫ßu:</span>
                                                <input type="text" id="v232-v-md" class="flex-1 p-3 rounded-xl border border-gray-100 bg-gray-50 focus:bg-white outline-none focus:border-blue-400" placeholder="T√™n s·ª± vi·ªác, ho√†n c·∫£nh x·∫£y ra...">
                                            </div>
                                            <div class="flex flex-col md:flex-row gap-4">
                                                <span class="w-full md:w-40 font-black text-xs uppercase text-blue-500 pt-3">Tri·ªÉn khai:</span>
                                                <textarea id="v232-v-tk" rows="2" class="flex-1 p-3 rounded-xl border border-gray-100 bg-gray-50 focus:bg-white outline-none focus:border-blue-400" placeholder="C√°c chi ti·∫øt n·ªïi b·∫≠t khi·∫øn em vui s∆∞·ªõng, h·∫°nh ph√∫c..."></textarea>
                                            </div>
                                            <div class="flex flex-col md:flex-row gap-4">
                                                <span class="w-full md:w-40 font-black text-xs uppercase text-blue-500 pt-3">K·∫øt th√∫c:</span>
                                                <input type="text" id="v232-v-kt" class="flex-1 p-3 rounded-xl border border-gray-100 bg-gray-50 focus:bg-white outline-none focus:border-blue-400" placeholder="√ù nghƒ©a s·ª± vi·ªác v√† t√¨nh c·∫£m d√†nh cho ng∆∞·ªùi th√¢n."></input>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- II. TH·ª∞C H√ÄNH VI·∫æT -->
                        <section class="w-full pb-8">
                            <div class="glass-card rounded-[40px] p-6 md:p-10 shadow-2xl border-t-8 border-indigo-500 bg-indigo-50/20">
                                <div class="flex items-center space-x-4 mb-8">
                                    <div class="w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg text-white">
                                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-black text-gray-800 uppercase tracking-tight">II. Th·ª±c h√†nh vi·∫øt</h2>
                                </div>

                                <div class="bg-white rounded-3xl p-8 shadow-xl border border-indigo-100 relative overflow-hidden" id="block-232-viet-final">
                                    <div class="absolute right-0 top-0 w-32 h-32 bg-indigo-50 rounded-full -mr-16 -mt-16 opacity-50"></div>
                                    <p class="text-xl font-bold text-gray-800 mb-6 relative z-10">D·ª±a tr√™n d√†n √Ω ƒë√£ l·∫≠p, em h√£y vi·∫øt ƒëo·∫°n vƒÉn ho√†n ch·ªânh:</p>
                                    
                                    <textarea id="ai-v232-viet" rows="8" class="w-full p-8 serif-font text-2xl rounded-2xl border-2 border-indigo-50 focus:border-indigo-400 outline-none bg-indigo-50/10 shadow-inner mb-6 transition-all duration-300" placeholder="Vi·∫øt ƒëo·∫°n vƒÉn c·ªßa em v√†o ƒë√¢y..."></textarea>
                                    
                                    <div class="flex flex-wrap gap-4 items-center">
                                        <button onclick="checkParagraphV232AI()" class="px-10 py-4 bg-indigo-600 text-white font-black text-xl rounded-2xl shadow-lg hover:bg-indigo-700 active:scale-95 transition-all flex items-center gap-3">
                                            <span>ü§ñ TH·∫¶Y CH·∫§M B√ÄI</span>
                                        </button>
                                        <button onclick="resetLTVC('ai-v232-viet'); document.getElementById('fb-v232-viet').classList.add('hidden');" class="px-6 py-4 bg-gray-200 text-gray-700 font-bold rounded-2xl hover:bg-gray-300 transition-all">VI·∫æT L·∫†I</button>
                                        
                                        <button onclick="submitV232Viet()" class="px-8 py-4 bg-gray-800 text-white font-black rounded-2xl shadow-lg hover:bg-black transition-all ml-auto">üöÄ N·ªòP B√ÄI</button>
                                    </div>
                                    
                                    <div id="fb-v232-viet" class="hidden mt-8 p-8 bg-indigo-900 text-white rounded-[28px] shadow-2xl animate-in slide-in-from-top-10 duration-500">
                                        <!-- AI result -->
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>`
                }
            ]
        },
        "quiz": {
            "settings": { "pick": 5 },
            "questions": [
                { "q": "Khi vi·∫øt ƒëo·∫°n vƒÉn th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c, em n√™n d√πng ng√¥i k·ªÉ n√†o?", "a": ["Ng√¥i th·ª© nh·∫•t (t√¥i, em)", "Ng√¥i th·ª© ba (g·ªçi t√™n)", "Kh√¥ng c·∫ßn x∆∞ng h√¥", "Ng√¥i th·ª© hai (b·∫°n)"], "c": 0 },
                { "q": "T·ª´ ng·ªØ n√†o d∆∞·ªõi ƒë√¢y ch·ªâ t√¨nh c·∫£m, c·∫£m x√∫c?", "a": ["Vui s∆∞·ªõng", "ƒêi l·∫°i", "H·ªçc t·∫≠p", "C√°i b√†n"], "c": 0 },
                { "q": "Ph·∫ßn m·ªü ƒë·∫ßu c·ªßa ƒëo·∫°n vƒÉn bi·ªÉu c·∫£m c·∫ßn gi·ªõi thi·ªáu ƒëi·ªÅu g√¨?", "a": ["S·ª± vi·ªác v√† ·∫•n t∆∞·ª£ng chung", "K·∫øt qu·∫£ c·ªßa s·ª± vi·ªác", "T·∫•t c·∫£ c√°c nh√¢n v·∫≠t", "L·ªãch s·ª≠ v√πng ƒë·∫•t"], "c": 0 },
                { "q": "N√™n k·∫øt h·ª£p c√°c bi·ªán ph√°p tu t·ª´ n√†o ƒë·ªÉ ƒëo·∫°n vƒÉn th√™m sinh ƒë·ªông?", "a": ["So s√°nh, nh√¢n h√≥a", "Con s·ªë th·ªëng k√™", "Thu·∫≠t ng·ªØ khoa h·ªçc", "C√¢u h·ªèi tu t·ª´"], "c": 0 },
                { "q": "Ph·∫ßn k·∫øt th√∫c ƒëo·∫°n vƒÉn th∆∞·ªùng d√πng ƒë·ªÉ l√†m g√¨?", "a": ["Kh·∫≥ng ƒë·ªãnh t√¨nh c·∫£m v√† n√™u √Ω nghƒ©a", "B·∫Øt ƒë·∫ßu k·ªÉ m·ªôt s·ª± vi·ªác m·ªõi", "T·∫£ l·∫°i ngo·∫°i h√¨nh", "C·∫£m ∆°n ng∆∞·ªùi ƒë·ªçc"], "c": 0 }
            ]
        }
    }
};

// --- Logic functions for 232 Viet ---
window.checkParagraphV232AI = async function () {
    const input = document.getElementById('ai-v232-viet');
    if (!input || !input.value.trim()) { alert("Em h√£y vi·∫øt ƒëo·∫°n vƒÉn tr∆∞·ªõc nh√©!"); return; }
    const fb = document.getElementById('fb-v232-viet');
    fb.classList.remove('hidden');
    fb.innerHTML = `<div class="flex items-center gap-4"><div class="animate-spin rounded-full h-8 w-8 border-4 border-white border-t-transparent"></div><p class="text-xl font-bold italic">Th·∫ßy ƒëang ƒë·ªçc b√†i vƒÉn c·ªßa em...</p></div>`;

    if (typeof askAI === 'function') {
        const prompt = `Em h√£y nh·∫≠n x√©t ƒëo·∫°n vƒÉn bi·ªÉu c·∫£m c·ªßa h·ªçc sinh. 
        ƒê·ªÅ b√†i: Vi·∫øt ƒëo·∫°n vƒÉn th·ªÉ hi·ªán t√¨nh c·∫£m, c·∫£m x√∫c v·ªÅ m·ªôt s·ª± vi·ªác mang l·∫°i ni·ªÅm vui.
        Y√™u c·∫ßu nh·∫≠n x√©t:
        1. C·∫•u tr√∫c (M·ªü - Tri·ªÉn khai - K·∫øt): ƒê√£ ƒë·ªß 3 ph·∫ßn ch∆∞a?
        2. N·ªôi dung: C√≥ t·∫≠p trung v√†o NI·ªÄM VUI kh√¥ng? C·∫£m x√∫c c√≥ ch√¢n th·ª±c kh√¥ng?
        3. C√°ch d√πng t·ª´: C√≥ c√°c t·ª´ ng·ªØ g·ª£i t·∫£ c·∫£m x√∫c kh√¥ng?
        4. G√≥p √Ω s·ª≠a l·ªói v√† khen ng·ª£i.
        
        B√†i c·ªßa h·ªçc sinh: ${input.value}`;
        await askAI('v232-viet-final', prompt, 'single', 'writing', 232);
    } else {
        fb.innerHTML = "L·ªói: H·ªá th·ªëng ch·∫•m ƒëi·ªÉm AI ch∆∞a s·∫µn s√†ng.";
    }
};

window.submitV232Viet = function () {
    if (typeof submitLTVCUnified === 'function') {
        submitLTVCUnified('232-viet');
    } else {
        alert("H·ªá th·ªëng n·ªôp b√†i ƒëang b·∫≠n!");
    }
};
