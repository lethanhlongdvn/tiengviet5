<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vi·∫øt ƒëo·∫°n vƒÉn t·∫£ ng∆∞·ªùi - EduRobot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #eff6ff;
            --accent: #f59e0b;
            --glass: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.5);
        }

        .hidden {
            display: none !important;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
        }

        .serif-font {
            font-family: 'Merriweather', serif;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
        }

        .tab-btn.active {
            color: var(--primary);
            background: white;
            box-shadow: inset 0 -3px 0 var(--primary);
        }

        .tab-content {
            display: none !important;
            animation: slideUp 0.4s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-content.active {
            display: block !important;
        }

        .notebook-paper {
            background-color: #fff;
            background-image: linear-gradient(#e5e7eb 1px, transparent 1px);
            background-size: 100% 2.5rem;
            line-height: 2.5rem;
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            min-height: 300px;
        }

        .highlight-adj {
            background-color: #fef08a;
            padding: 0 2px;
            border-radius: 4px;
        }

        .highlight-art {
            background-color: #bfdbfe;
            padding: 0 2px;
            border-radius: 4px;
        }
    </style>
</head>

<body class="bg-blue-50 text-gray-800">
    <header class="sticky top-0 z-50 px-4 py-2">
        <nav class="container mx-auto glass-card rounded-xl px-5 py-2 flex justify-between items-center shadow-lg">
            <div class="flex items-center space-x-4">
                <div
                    class="w-10 h-10 bg-blue-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-200 shrink-0">
                    <span class="text-xl font-black">E</span>
                </div>
                <div class="flex flex-col md:flex-row md:items-center md:space-x-6">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl font-black text-blue-700">EduRobot</span>
                        <span
                            class="text-[11px] font-bold px-3 py-1 rounded-full bg-orange-500 text-white shadow-sm shadow-orange-200 tracking-wide">TI·∫æNG
                            VI·ªÜT 5</span>
                    </div>
                    <div class="flex items-center space-x-2 overflow-hidden">
                        <span class="text-[11px] font-black uppercase tracking-widest text-gray-400">CH·ª¶ ƒêI·ªÇM:</span>
                        <span class="text-sm font-black uppercase tracking-wider text-blue-800">V·∫∫ ƒê·∫∏P CU·ªòC S·ªêNG</span>
                    </div>
                </div>
            </div>
            <ul class="flex space-x-2 md:space-x-6 text-xs font-bold items-center">
                <li><a href="index.html" class="text-gray-500 hover:text-blue-600">Trang ch·ªß</a></li>
            </ul>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-6 max-w-5xl flex-1">
                                <!-- Student Info -->
        <div class="mb-8 bg-white border-2 border-blue-100 rounded-3xl p-6 shadow-sm flex flex-col items-center gap-4">
            <div class="flex items-center space-x-4 w-full">
                <div class="w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center text-white shadow-lg">
                    <span>üë§</span>
                </div>
                <div class="flex-1">
                    <label class="block text-[10px] font-black text-blue-400 uppercase tracking-widest leading-none mb-1">H·ªç t√™n c·ªßa em</label>
                    <input type="text" id="studentName" placeholder="Nh·∫≠p t√™n em..." class="w-full text-lg font-black text-gray-800 bg-transparent border-none focus:outline-none focus:ring-0 p-0">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                <div class="flex items-center space-x-3 bg-gray-50 p-3 rounded-2xl border border-gray-100 focus-within:border-blue-300 transition-all">
                    <label class="text-[9px] font-black text-gray-400 uppercase tracking-widest px-2">L·ªõp:</label>
                    <select id="studentClass" class="flex-1 bg-transparent border-none focus:outline-none font-black text-gray-700 text-sm cursor-pointer">
                        <option value="">Ch·ªçn L·ªõp</option>
                        <option value="5/1">5/1</option>
                        <option value="5/2">5/2</option>
                        <option value="5/3">5/3</option>
                        <option value="5/4">5/4</option>
                        <option value="5/5">5/5</option>
                    </select>
                </div>

                <div class="flex items-center space-x-3 bg-gray-50 p-3 rounded-2xl border border-gray-100 focus-within:border-blue-300 transition-all">
                    <label class="text-[9px] font-black text-gray-400 uppercase tracking-widest px-2">Tr∆∞·ªùng:</label>
                    <select id="schoolSelect" onchange="checkSchool()" class="flex-1 bg-transparent border-none focus:outline-none font-black text-gray-700 text-sm cursor-pointer">
                        <option value="Ti·ªÉu h·ªçc ƒê·ªó VƒÉn N·∫°i">Ti·ªÉu h·ªçc ƒê·ªó VƒÉn N·∫°i</option>
                        <option value="Kh√°c">Tr∆∞·ªùng kh√°c...</option>
                    </select>
                </div>
            </div>

            <input type="text" id="otherSchool" placeholder="Nh·∫≠p t√™n tr∆∞·ªùng c·ªßa em..." class="hidden w-full p-4 rounded-2xl bg-orange-50 border-2 border-orange-100 focus:border-orange-300 focus:outline-none font-black text-sm transition-all">
        </div>

        <!-- Header -->
        <div class="glass-card mb-6 rounded-2xl overflow-hidden flex flex-col md:flex-row shadow-lg">
            <div class="flex-1 flex bg-white/40">
                <button onclick="switchTab('lesson')" id="btn-lesson"
                    class="tab-btn active flex-1 py-4 text-center font-black text-base uppercase tracking-wider">1. B√†i
                    h·ªçc & Luy·ªán t·∫≠p</button>
                <button onclick="switchTab('practice')" id="btn-practice"
                    class="tab-btn flex-1 py-4 text-center font-black text-base uppercase tracking-wider text-gray-400">2.
                    V·∫≠n d·ª•ng</button>
            </div>
        </div>

        <!-- TAB 1: B√ÄI H·ªåC -->
        <div id="tab-lesson" class="tab-content active space-y-8">
            <section class="max-w-5xl mx-auto space-y-6">
                <div class="glass-card rounded-[32px] p-6 shadow-xl border-t-8 border-blue-500">
                    <h1
                        class="text-3xl font-black text-blue-800 mb-2 uppercase italic tracking-tight flex items-center">
                        <span class="bg-blue-600 text-white px-4 py-1 rounded-xl mr-4 not-italic text-lg">VI·∫æT</span>
                        Vi·∫øt ƒëo·∫°n vƒÉn t·∫£ ng∆∞·ªùi
                    </h1>
                    <p class="text-gray-500 font-bold ml-16">H∆∞·ªõng d·∫´n quan s√°t v√† ch·ªçn l·ªçc chi ti·∫øt ti√™u bi·ªÉu.</p>
                </div>

                <!-- Paragraph A -->
                <div class="glass-card rounded-[24px] p-6 shadow-lg border-l-8 border-orange-400 space-y-4">
                    <div class="flex items-start gap-4">
                        <span
                            class="w-10 h-10 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center font-black shrink-0">a</span>
                        <div class="serif-font text-xl leading-relaxed text-gray-800">
                            <p>√îng n·ªôi c·ªßa Nh·ª• ƒë√£ t√°m m∆∞∆°i tu·ªïi, nh∆∞ng v√≥c ng∆∞·ªùi v·∫´n g·ªçn v√† ch·∫Øc, d√°ng ƒëi d·ª©t kho√°t nh∆∞
                                m·ªôt ng·ªçn s√≥ng. √îng c√≥ n∆∞·ªõc da n√¢u s·∫´m, ghi d·∫•u ·∫•n c·ªßa c·∫£ m·ªôt ƒë·ªùi ch√®o thuy·ªÅn tr√™n m·∫∑t
                                bi·ªÉn. M·ªói khi k·∫øt th√∫c m·ªôt c√¢u n√≥i, √¥ng th∆∞·ªùng d√πng ti·∫øng "h·∫ßy". ƒê√≥ l√† ti·∫øng h√¥ ch√®o
                                thuy·ªÅn c·ªßa ng∆∞·ªùi d√¢n ch√†i x∆∞a l√∫c tr·ªùi s·∫Øp c√≥ d√¥ng. √îng th∆∞·ªùng ra hi·ªáu b·∫±ng m·∫Øt v√† b·∫±ng
                                tay. ·ªû tr√™n bi·ªÉn th√¨ ƒë√≥ l√† m·ªôt ƒëi·ªÅu r·∫•t b√¨nh th∆∞·ªùng. Nh∆∞ng ·ªü nh√†, √¥ng c≈©ng "n√≥i" theo
                                c√°ch ƒë√≥. D·∫ßn d·∫ßn, con ch√°u c≈©ng quen.</p>
                            <p class="text-right text-sm italic mt-2">(Theo Tr·∫ßn Nhu·∫≠n Minh)</p>
                        </div>
                    </div>
                    <div class="bg-white/50 rounded-2xl p-4 space-y-3">
                        <table
                            class="w-full border-collapse border border-orange-200 rounded-xl overflow-hidden shadow-sm">
                            <thead class="bg-orange-100 text-orange-800 text-[10px] uppercase font-black">
                                <tr>
                                    <th class="p-3 text-left w-1/3 border border-orange-200">Y√™u c·∫ßu ph√¢n t√≠ch</th>
                                    <th class="p-3 text-left border border-orange-200">C√¢u tr·∫£ l·ªùi c·ªßa em</th>
                                </tr>
                            </thead>
                            <tbody class="text-sm font-bold text-gray-700">
                                <tr class="bg-white hover:bg-orange-50/30 transition-colors">
                                    <td class="p-3 border border-orange-200 bg-orange-50/50">1. Nh√¢n v·∫≠t ƒë∆∞·ª£c t·∫£ l√† ai?
                                    </td>
                                    <td class="p-1 border border-orange-200">
                                        <input type="text" id="ai-1a-q1" placeholder="..."
                                            class="w-full p-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-orange-200 rounded">
                                    </td>
                                </tr>
                                <tr class="bg-white hover:bg-orange-50/30 transition-colors">
                                    <td class="p-3 border border-orange-200 bg-orange-50/50">2. Nh·ªØng t·ª´ ng·ªØ t·∫£ ngo·∫°i
                                        h√¨nh/ho·∫°t ƒë·ªông n·ªïi b·∫≠t?</td>
                                    <td class="p-1 border border-orange-200">
                                        <input type="text" id="ai-1a-q2" placeholder="..."
                                            class="w-full p-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-orange-200 rounded">
                                    </td>
                                </tr>
                                <tr class="bg-white hover:bg-orange-50/30 transition-colors">
                                    <td class="p-3 border border-orange-200 bg-orange-50/50">3. Chi ti·∫øt em ·∫•n t∆∞·ª£ng
                                        nh·∫•t? V√¨ sao?</td>
                                    <td class="p-1 border border-orange-200">
                                        <textarea id="ai-1a-q3" placeholder="..."
                                            class="w-full p-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-orange-200 rounded min-h-[60px]"></textarea>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <button onclick="askAI('1a', '', 'table')"
                            class="bg-orange-500 hover:bg-orange-600 text-white font-black px-6 py-2 rounded-xl shadow-lg transition-all flex items-center">
                            ü§ñ EduRobot Ki·ªÉm tra
                        </button>
                        <div id="fb-1a" class="hidden mt-4"></div>
                    </div>
                </div>

                <!-- Paragraph B -->
                <div class="glass-card rounded-[24px] p-6 shadow-lg border-l-8 border-pink-400 space-y-4">
                    <div class="flex items-start gap-4">
                        <span
                            class="w-10 h-10 bg-pink-100 text-pink-600 rounded-full flex items-center justify-center font-black shrink-0">b</span>
                        <div class="serif-font text-xl leading-relaxed text-gray-800">
                            <p>M·∫π d·∫´n t√¥i v·ªÅ thƒÉm ngo·∫°i. Nghe ti·∫øng t√¥i t·ª´ ngo√†i ng√µ, ngo·∫°i l·∫≠p c·∫≠p ch·∫°y ra c·ª≠a, dang
                                hai tay ƒë√≥n t√¥i ng·∫£ v√†o. Ngo·∫°i m·ª´ng vui ƒë·∫øn n·ªói kh√¥ng ngƒÉn ƒë∆∞·ª£c nh·ªØng gi·ªçt n∆∞·ªõc m·∫Øt r∆°i
                                tr√™n ƒë√¥i m√° nhƒÉn nheo. Ngo·∫°i √¥m ch·∫∑t t√¥i v√†o l√≤ng, r·ªìi ngo·∫°i d·∫´n t√¥i ra sau v∆∞·ªùn, cho
                                t√¥i t·ª± tay h√°i nh·ªØng tr√°i b∆∞·ªüi, tr√°i xo√†i v√†ng ∆∞∆°m tr√™n nh·ªØng c√†nh ch·ªâ la ƒë√† ngang m·∫Øt
                                t√¥i. T√¥i bi·∫øt l√† ngo·∫°i ƒë·ªÉ d√†nh nh·ªØng tr√°i c√¢y s√† th·∫•p xu·ªëng nh∆∞ th·∫ø cho t√¥i v·ªÅ h√°i.</p>
                            <p class="text-right text-sm italic mt-2">(Theo L√™ VƒÉn Tr∆∞·ªùng)</p>
                        </div>
                    </div>
                    <div class="bg-white/50 rounded-2xl p-4 space-y-3">
                        <table
                            class="w-full border-collapse border border-pink-200 rounded-xl overflow-hidden shadow-sm">
                            <thead class="bg-pink-100 text-pink-800 text-[10px] uppercase font-black">
                                <tr>
                                    <th class="p-3 text-left w-1/3 border border-pink-200">Y√™u c·∫ßu ph√¢n t√≠ch</th>
                                    <th class="p-3 text-left border border-pink-200">C√¢u tr·∫£ l·ªùi c·ªßa em</th>
                                </tr>
                            </thead>
                            <tbody class="text-sm font-bold text-gray-700">
                                <tr class="bg-white hover:bg-pink-50/30 transition-colors">
                                    <td class="p-3 border border-pink-200 bg-pink-50/50">1. Nh√¢n v·∫≠t ƒë∆∞·ª£c t·∫£ l√† ai?</td>
                                    <td class="p-1 border border-pink-200">
                                        <input type="text" id="ai-1b-q1" placeholder="..."
                                            class="w-full p-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-pink-200 rounded">
                                    </td>
                                </tr>
                                <tr class="bg-white hover:bg-pink-50/30 transition-colors">
                                    <td class="p-3 border border-pink-200 bg-pink-50/50">2. Nh·ªØng t·ª´ ng·ªØ t·∫£ ngo·∫°i
                                        h√¨nh/ho·∫°t ƒë·ªông n·ªïi b·∫≠t?</td>
                                    <td class="p-1 border border-pink-200">
                                        <input type="text" id="ai-1b-q2" placeholder="..."
                                            class="w-full p-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-pink-200 rounded">
                                    </td>
                                </tr>
                                <tr class="bg-white hover:bg-pink-50/30 transition-colors">
                                    <td class="p-3 border border-pink-200 bg-pink-50/50">3. Chi ti·∫øt em ·∫•n t∆∞·ª£ng nh·∫•t?
                                        V√¨ sao?</td>
                                    <td class="p-1 border border-pink-200">
                                        <textarea id="ai-1b-q3" placeholder="..."
                                            class="w-full p-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-pink-200 rounded min-h-[60px]"></textarea>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <button onclick="askAI('1b', '', 'table')"
                            class="bg-pink-500 hover:bg-pink-600 text-white font-black px-6 py-2 rounded-xl shadow-lg transition-all flex items-center">
                            ü§ñ EduRobot Ki·ªÉm tra
                        </button>
                        <div id="fb-1b" class="hidden mt-4"></div>
                    </div>
                </div>

                <!-- Paragraph C -->
                <div class="glass-card rounded-[24px] p-6 shadow-lg border-l-8 border-green-400 space-y-4">
                    <div class="flex items-start gap-4">
                        <span
                            class="w-10 h-10 bg-green-100 text-green-600 rounded-full flex items-center justify-center font-black shrink-0">c</span>
                        <div class="serif-font text-xl leading-relaxed text-gray-800">
                            <p>Ch·ªã H√† l√† m·ªôt th√†nh vi√™n trong ƒëo√†n thanh ni√™n c·ªßa huy·ªán ƒë·∫øn gi√∫p x√£ t√¥i ch·ªëng √∫ng ·ªü c√°nh
                                ƒë·ªìng chu·∫©n b·ªã c·∫•y gi·ªëng l√∫a m·ªõi. Tr√¥ng ch·ªã th·∫≠t xinh t∆∞∆°i: n∆∞·ªõc da tr·∫Øng, m√¥i h·ªìng, t√≥c
                                mai d√†i v·∫Øt cong l√™n nh∆∞ m·ªôt d·∫•u h·ªèi l·ªôn ng∆∞·ª£c. Tr√™n m√° ch·ªã c√≥ v√†i n·ªët t√†n nhang. M·ªói
                                khi ch·ªã c∆∞·ªùi, n·ªët t√†n nhang l·∫∑n ƒëi tr√™n g√≤ m√° ƒë·ªè ·ª≠ng. Ch·ªã c∆∞·ªùi n√≥i nhi·ªÅu, ch·∫Øc t√≠nh ch·ªã
                                v·ªën s√¥i n·ªïi, c≈©ng c√≥ th·ªÉ l√† v√¨ h√†o h·ª©ng v·ªõi chuy·∫øn ƒëi gi√∫p b√† con x√£ t√¥i n√™n ch·ªã vui nh∆∞
                                th·∫ø.</p>
                            <p class="text-right text-sm italic mt-2">(Theo B√πi Hi·ªÉn)</p>
                        </div>
                    </div>
                    <div class="bg-white/50 rounded-2xl p-4 space-y-3">
                        <table
                            class="w-full border-collapse border border-green-200 rounded-xl overflow-hidden shadow-sm">
                            <thead class="bg-green-100 text-green-800 text-[10px] uppercase font-black">
                                <tr>
                                    <th class="p-3 text-left w-1/3 border border-green-200">Y√™u c·∫ßu ph√¢n t√≠ch</th>
                                    <th class="p-3 text-left border border-green-200">C√¢u tr·∫£ l·ªùi c·ªßa em</th>
                                </tr>
                            </thead>
                            <tbody class="text-sm font-bold text-gray-700">
                                <tr class="bg-white hover:bg-green-50/30 transition-colors">
                                    <td class="p-3 border border-green-200 bg-green-50/50">1. Nh√¢n v·∫≠t ƒë∆∞·ª£c t·∫£ l√† ai?
                                    </td>
                                    <td class="p-1 border border-green-200">
                                        <input type="text" id="ai-1c-q1" placeholder="..."
                                            class="w-full p-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-green-200 rounded">
                                    </td>
                                </tr>
                                <tr class="bg-white hover:bg-green-50/30 transition-colors">
                                    <td class="p-3 border border-green-200 bg-green-50/50">2. Nh·ªØng t·ª´ ng·ªØ t·∫£ ngo·∫°i
                                        h√¨nh/ho·∫°t ƒë·ªông n·ªïi b·∫≠t?</td>
                                    <td class="p-1 border border-green-200">
                                        <input type="text" id="ai-1c-q2" placeholder="..."
                                            class="w-full p-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-green-200 rounded">
                                    </td>
                                </tr>
                                <tr class="bg-white hover:bg-green-50/30 transition-colors">
                                    <td class="p-3 border border-green-200 bg-green-50/50">3. Chi ti·∫øt em ·∫•n t∆∞·ª£ng nh·∫•t?
                                        V√¨ sao?</td>
                                    <td class="p-1 border border-green-200">
                                        <textarea id="ai-1c-q3" placeholder="..."
                                            class="w-full p-2 bg-transparent focus:outline-none focus:ring-2 focus:ring-green-200 rounded min-h-[60px]"></textarea>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <button onclick="askAI('1c', '', 'table')"
                            class="bg-green-500 hover:bg-green-600 text-white font-black px-6 py-2 rounded-xl shadow-lg transition-all flex items-center">
                            ü§ñ EduRobot Ki·ªÉm tra
                        </button>
                        <div id="fb-1c" class="hidden mt-4"></div>
                    </div>
                </div>

                <!-- Ch·ªó ƒë·ªÉ ghi l·ªùi ph√™ c·ªßa GV -->
                <div id="teacher-feedback-box" class="hidden mt-8"></div>

                <div class="glass-card p-6 md:p-10 rounded-[40px] relative overflow-hidden bg-white/90 shadow-2xl">
                    <div
                        class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400">
                    </div>
                    <h3 class="text-2xl font-black text-gray-800 mb-6 flex items-center">
                        <span
                            class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center text-blue-600 mr-3 text-xl shadow-inner">üìù</span>
                        B√†i l√†m c·ªßa em:
                    </h3>
                    <div class="line-container relative">
                        <textarea id="ai-main-essay"
                            class="paper-textarea w-full p-4 md:p-8 min-h-[500px] focus:outline-none"
                            placeholder="Em h√£y vi·∫øt ƒëo·∫°n vƒÉn t·∫£ m·ªôt ng∆∞·ªùi th√¢n ho·∫∑c m·ªôt ng∆∞·ªùi m√† em y√™u m·∫øn v√†o ƒë√¢y nh√©..."></textarea>
                    </div>
                    <div class="mt-6 flex flex-col md:flex-row gap-4">
                        <button onclick="askAI('main-essay')"
                            class="flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-black py-4 px-8 rounded-2xl shadow-xl shadow-blue-200 transition-all flex items-center justify-center group transform hover:-translate-y-1">
                            <span class="text-xl mr-2 group-hover:rotate-12 transition-transform">ü§ñ</span>
                            EduRobot Ch·∫•m B√†i
                        </button>
                        <button onclick="submitEssay(event)"
                            class="flex-1 bg-white hover:bg-green-50 text-green-600 border-4 border-green-600 font-black py-4 px-8 rounded-2xl shadow-xl transition-all flex items-center justify-center group transform hover:-translate-y-1">
                            <span class="text-xl mr-2 group-hover:scale-125 transition-transform">üöÄ</span>
                            N·ªôp B√†i cho C√¥
                        </button>
                    </div>
                    <div id="fb-main-essay" class="hidden mt-8"></div>
                </div>

                <!-- Writing Practice -->
                <div class="glass-card rounded-[32px] p-8 shadow-2xl relative overflow-hidden bg-white/80">
                    <div
                        class="absolute top-0 right-0 w-64 h-64 bg-purple-100 rounded-full blur-3xl -mr-32 -mt-32 opacity-50">
                    </div>
                    <h2 class="text-2xl font-black text-purple-800 mb-6 flex items-center uppercase italic">
                        <span
                            class="bg-purple-600 text-white w-10 h-10 rounded-lg flex items-center justify-center mr-3 not-italic shadow-lg shadow-purple-200">2</span>
                        Luy·ªán t·∫≠p vi·∫øt ƒëo·∫°n vƒÉn
                    </h2>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Instructions -->
                        <div class="lg:col-span-1 space-y-4">
                            <div class="bg-purple-50 p-6 rounded-2xl border-2 border-dashed border-purple-200">
                                <h3 class="font-black text-purple-700 mb-4 flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    C√¥ng th·ª©c 3 ph·∫ßn:
                                </h3>
                                <ul class="space-y-4 text-sm font-bold text-gray-600">
                                    <li class="flex gap-3">
                                        <span class="text-purple-600 shrink-0">‚ù∂</span>
                                        <span><b>M·ªü ƒëo·∫°n:</b> Gi·ªõi thi·ªáu nh√¢n v·∫≠t (Ai? Quan h·ªá v·ªõi em?).</span>
                                    </li>
                                    <li class="flex gap-3">
                                        <span class="text-purple-600 shrink-0">‚ù∑</span>
                                        <span><b>Th√¢n ƒëo·∫°n:</b> T·∫£ 1-2 n√©t ngo·∫°i h√¨nh & ho·∫°t ƒë·ªông ƒë·∫∑c tr∆∞ng.</span>
                                    </li>
                                    <li class="flex gap-3">
                                        <span class="text-purple-600 shrink-0">‚ù∏</span>
                                        <span><b>K·∫øt ƒëo·∫°n:</b> C·∫£m x√∫c, ·∫•n t∆∞·ª£ng c·ªßa em.</span>
                                    </li>
                                </ul>
                                <div
                                    class="mt-6 p-4 bg-orange-50 rounded-xl border border-orange-200 text-xs text-orange-800 italic">
                                    üí° <b>M·∫πo s∆∞ ph·∫°m:</b> Tr√°nh li·ªát k√™ kh√¥ khan. H√£y d√πng c√¢u gh√©p: "Tuy ngo·∫°i ƒë√£ gi√†
                                    nh∆∞ng n·ª• c∆∞·ªùi ngo·∫°i v·∫´n ·∫•m √°p v√¥ c√πng."
                                </div>
                            </div>
                        </div>

                        <!-- Writing Box -->
                        <div class="lg:col-span-2 space-y-4">
                            <h4 class="font-black text-gray-700 text-lg uppercase tracking-wider mb-2">B√†i l√†m c·ªßa em:
                            </h4>
                            <div class="relative">
                                <textarea id="ai-final"
                                    class="notebook-paper w-full font-medium text-lg text-gray-700 focus:outline-none focus:ring-4 focus:ring-purple-200 transition-all transition-shadow"
                                    placeholder="Vi·∫øt ƒëo·∫°n vƒÉn c·ªßa em v√†o ƒë√¢y nh√©..."></textarea>
                                <div class="absolute bottom-4 right-4 flex gap-2">
                                    <button onclick="askAI('final')"
                                        class="bg-purple-600 hover:bg-purple-700 text-white font-black px-8 py-3 rounded-2xl shadow-xl transition-all transform hover:scale-105 active:scale-95 flex items-center">
                                        üöÄ N·ªôp B√†i & Ch·∫•m ƒêi·ªÉm
                                    </button>
                                </div>
                            </div>
                            <div id="fb-final" class="hidden"></div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- TAB 2: V·∫¨N D·ª§NG -->
        <div id="apply-tab" class="tab-content">
            <div class="max-w-5xl mx-auto space-y-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-3xl border-2 border-purple-100 shadow-sm">
                        <div
                            class="w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center text-2xl mb-4 text-purple-600">
                            üì∏</div>
                        <h4 class="font-black text-gray-800 mb-2">1. Kho·∫£nh kh·∫Øc y√™u th∆∞∆°ng</h4>
                        <p class="text-sm text-gray-500 mb-4 font-bold leading-relaxed">H√£y ch·ª•p m·ªôt b·ª©c ·∫£nh ho·∫∑c quay
                            video ng·∫Øn v·ªÅ m·ªôt ho·∫°t ƒë·ªông gi√∫p ƒë·ª° ng∆∞·ªùi th√¢n v√† n·ªôp cho C√¥ nh√©.</p>

                        <div class="space-y-3 mb-4">
                            <label class="block text-[10px] font-black text-purple-400 uppercase tracking-widest">M√¥ t·∫£
                                ho·∫°t ƒë·ªông c·ªßa em</label>
                            <textarea id="project-desc-1" placeholder="Em ƒë√£ l√†m g√¨ ƒë·ªÉ gi√∫p ƒë·ª° ng∆∞·ªùi th√¢n?"
                                class="w-full text-sm p-3 bg-purple-50 rounded-xl border-none focus:ring-2 focus:ring-purple-200 transition-all min-h-[80px] font-bold text-gray-700"></textarea>

                            <label
                                class="block text-[10px] font-black text-purple-400 uppercase tracking-widest mt-2">T·∫£i
                                ·∫£nh/video l√™n</label>
                            <input type="file" id="project-file-1" accept="image/*,video/*"
                                class="w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100">
                        </div>

                        <button onclick="submitProject('1', 'Kho·∫£nh kh·∫Øc y√™u th∆∞∆°ng')"
                            class="w-full bg-purple-600 hover:bg-purple-700 text-white font-black py-3 rounded-xl transition-all shadow-lg shadow-purple-100">G·ª≠i
                            D·ª± √Ån</button>
                    </div>

                    <div class="bg-white p-6 rounded-3xl border-2 border-green-100 shadow-sm">
                        <div
                            class="w-12 h-12 bg-green-100 rounded-2xl flex items-center justify-center text-2xl mb-4 text-green-600">
                            üìñ</div>
                        <h4 class="font-black text-gray-800 mb-2">2. G√≥c t√¨m ƒë·ªçc</h4>
                        <p class="text-sm text-gray-500 mb-4 font-bold leading-relaxed">T√¨m ƒë·ªçc m·ªôt b√†i th∆° t·∫£ ng∆∞·ªùi v√†
                            chia s·∫ª c·∫£m x√∫c c·ªßa em. Em c√≥ th·ªÉ n·ªôp b·∫£n vi·∫øt tay ho·∫∑c ·∫£nh ch·ª•p.</p>

                        <div class="space-y-3 mb-4">
                            <label class="block text-[10px] font-black text-green-400 uppercase tracking-widest">Chia s·∫ª
                                b√†i th∆° em ƒë√£ ƒë·ªçc</label>
                            <textarea id="project-desc-2" placeholder="T√™n b√†i th∆°? T√°c gi·∫£? Chi ti·∫øt em th√≠ch nh·∫•t?"
                                class="w-full text-sm p-3 bg-green-50 rounded-xl border-none focus:ring-2 focus:ring-green-200 transition-all min-h-[80px] font-bold text-gray-700"></textarea>

                            <label
                                class="block text-[10px] font-black text-green-400 uppercase tracking-widest mt-2">·∫¢nh
                                ch·ª•p b√†i vi·∫øt (n·∫øu c√≥)</label>
                            <input type="file" id="project-file-2" accept="image/*"
                                class="w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100">
                        </div>

                        <button onclick="submitProject('2', 'G√≥c t√¨m ƒë·ªçc')"
                            class="w-full bg-green-600 hover:bg-green-700 text-white font-black py-3 rounded-xl transition-all shadow-lg shadow-green-100">G·ª≠i
                            B√†i ƒê·ªçc</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/ai-grader.js"></script>
    <script src="js/firebase-logic.js"></script>
    <script>
        // Check for feedback when name changes
        document.getElementById('studentName').addEventListener('blur', checkTeacherFeedback);

        // Switch Tab Logic
        function switchTab(tab) {
            const lessonTab = document.getElementById('lesson-tab');
            const applyTab = document.getElementById('apply-tab');
            const btnLesson = document.getElementById('btn-lesson');
            const btnApply = document.getElementById('btn-apply');

            if (tab === 'lesson') {
                lessonTab.classList.remove('hidden');
                applyTab.classList.add('hidden');
                btnLesson.classList.add('active');
                btnApply.classList.remove('active');
            } else {
                lessonTab.classList.add('hidden');
                applyTab.classList.remove('hidden');
                btnLesson.classList.remove('active');
                btnApply.classList.add('active');
            }
        }
        // Handle navigation lessons menu (if needed for index.html integration)
        document.addEventListener('DOMContentLoaded', () => {
            const dropdown = document.getElementById('top-menu-lessons-dropdown');
            if (dropdown) {
                // Sample lessons for the dropdown
                const lessons = [
                    { name: 'Gi√≥ h√≤a th√°ng NƒÉm', url: '211-gio-hoa-thang-nam.html' },
                    { name: 'LTVC: C√°ch n·ªëi c√¢u gh√©p', url: '211-ltvc-gio-hoa-thang-nam.html' },
                    { name: 'Vi·∫øt: ƒêo·∫°n vƒÉn t·∫£ ng∆∞·ªùi', url: '211-viet-doan-van-ta-nguoi.html' }
                ];
                dropdown.innerHTML = lessons.map(l => `<a href="${l.url}" class="block px-4 py-3 hover:bg-blue-50 rounded-xl transition-all font-bold text-gray-600">${l.name}</a>`).join('');
            }
        });
    </script>
</body>

</html>
