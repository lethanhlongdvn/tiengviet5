
// Curriculum Data
const curriculumData = {
    "Học kỳ 1": [
        {
            theme: "Chủ điểm 1: Thế giới tuổi thơ",
            weeks: [
                {
                    id: 1, name: "Tuần 1", lessons: [
                        {
                            title: "Bài 1: Thanh âm của gió",
                            sections: [
                                { title: "Đọc: Thanh âm của gió", url: "11-thanh-am-cua-gio.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 2: Cánh đồng hoa",
                            sections: [
                                { title: "Đọc: Cánh đồng hoa", url: "12-canh-dong-hoa.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 2, name: "Tuần 2", lessons: [
                        {
                            title: "Bài 3: Tuổi Ngựa",
                            sections: [
                                { title: "Đọc: Tuổi Ngựa", url: "23-tuoi-ngua.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 4: Bến sông tuổi thơ",
                            sections: [
                                { title: "Đọc: Bến sông tuổi thơ", url: "24-ben-song-tuoi-tho.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 3, name: "Tuần 3", lessons: [
                        {
                            title: "Bài 5: Tiếng hạt nảy mầm",
                            sections: [
                                { title: "Đọc: Tiếng hạt nảy mầm", url: "35-tieng-hat-nay-mam.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 6: Ngôi sao sân cỏ",
                            sections: [
                                { title: "Đọc: Ngôi sao sân cỏ", url: "36-ngoi-sao-san-co.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 4, name: "Tuần 4", lessons: [
                        {
                            title: "Bài 7: Bộ sưu tập độc đáo",
                            sections: [
                                { title: "Đọc: Bộ sưu tập độc đáo", url: "47-bo-suu-tap-doc-dao.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 8: Hành tinh kì lạ",
                            sections: [
                                { title: "Đọc: Hành tinh kì lạ", url: "48-hanh-tinh-ki-la.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            theme: "Chủ điểm 2: Thiên nhiên kì thú",
            weeks: [
                {
                    id: 5, name: "Tuần 5", lessons: [
                        {
                            title: "Bài 9: Trước cổng trời",
                            sections: [
                                { title: "Đọc: Trước cổng trời", url: "59-truoc-cong-troi.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 10: Kì diệu rừng xanh",
                            sections: [
                                { title: "Đọc: Kì diệu rừng xanh", url: "510-ki-dieu-rung-xanh.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 6, name: "Tuần 6", lessons: [
                        {
                            title: "Bài 11: Hang Sơn Đoòng – những điều kì thú",
                            sections: [
                                { title: "Đọc: Hang Sơn Đoòng – những điều kì thú", url: "611-hang-son-doong.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 12: Những hòn đảo trên vịnh Hạ Long",
                            sections: [
                                { title: "Đọc: Những hòn đảo trên vịnh Hạ Long", url: "612-nhung-hon-dao-tren-vinh-ha-long.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 7, name: "Tuần 7", lessons: [
                        {
                            title: "Bài 13: Mầm non",
                            sections: [
                                { title: "Đọc: Mầm non", url: "713-mam-non.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 14: Những ngọn núi nóng rẫy",
                            sections: [
                                { title: "Đọc: Những ngọn núi nóng rẫy", url: "714-nhung-ngon-nui-nong-ray.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 8, name: "Tuần 8", lessons: [
                        {
                            title: "Bài 15: Bài ca về mặt trời",
                            sections: [
                                { title: "Đọc: Bài ca về mặt trời", url: "815-bai-ca-ve-mat-troi.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 16: Xin chào, Xa-ha-ra",
                            sections: [
                                { title: "Đọc: Xin chào, Xa-ha-ra", url: "816-xin-chao-xa-ha-ra.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            theme: "Ôn tập giữa học kỳ 1",
            weeks: [
                {
                    id: 9, name: "Tuần 9: Ôn tập", lessons: [
                        { title: "Ôn tập tiết 1-2", url: "#" },
                        { title: "Ôn tập tiết 3-4", url: "#" },
                        { title: "Ôn tập tiết 5-6-7", url: "#" }
                    ]
                }
            ]
        },
        {
            theme: "Chủ điểm 3: Trên con đường học tập",
            weeks: [
                {
                    id: 10, name: "Tuần 10", lessons: [
                        {
                            title: "Bài 17: Cuốn sách của em",
                            sections: [
                                { title: "Đọc: Cuốn sách của em", url: "1017-cuon-sach-cua-em.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 18: Thư gửi các học sinh",
                            sections: [
                                { title: "Đọc: Thư gửi các học sinh", url: "1018-thu-gui-cac-hoc-sinh.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 11, name: "Tuần 11", lessons: [
                        {
                            title: "Bài 19: Trải nghiệm để sáng tạo",
                            sections: [
                                { title: "Đọc: Trải nghiệm để sáng tạo", url: "1119-trai-nghiem-de-sang-tao.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 20: Khổ luyện thành tài",
                            sections: [
                                { title: "Đọc: Khổ luyện thành tài", url: "1120-kho-luyen-thanh-tai.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 12, name: "Tuần 12", lessons: [
                        {
                            title: "Bài 21: Thế giới trong trang sách",
                            sections: [
                                { title: "Đọc: Thế giới trong trang sách", url: "1221-the-gioi-trong-trang-sach.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 22: Giới thiệu sách Dế Mèn phiêu lưu kí",
                            sections: [
                                { title: "Đọc: Giới thiệu sách Dế Mèn phiêu lưu kí", url: "1222-gioi-thieu-sach-de-men.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 13, name: "Tuần 13", lessons: [
                        {
                            title: "Bài 23: Tên là gì?",
                            sections: [
                                { title: "Đọc: Tên là gì?", url: "1323-ten-la-gi.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 24: Tinh thần học tập của nhà Phi-lít",
                            sections: [
                                { title: "Đọc: Tinh thần học tập của nhà Phi-lít", url: "1324-tinh-than-hoc-tap-cua-nha-phi-lit.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            theme: "Chủ điểm 4: Nghệ thuật muôn màu",
            weeks: [
                {
                    id: 14, name: "Tuần 14", lessons: [
                        {
                            title: "Bài 25: Tiếng đàn ba-la-lai-ca trên sông Đà",
                            sections: [
                                { title: "Đọc: Tiếng đàn ba-la-lai-ca trên sông Đà", url: "1425-tieng-dan-ba-la-lai-ca.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 26: Trí tưởng tượng phong phú",
                            sections: [
                                { title: "Đọc: Trí tưởng tượng phong phú", url: "1426-tri-tuong-tuong-phong-phu.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 15, name: "Tuần 15", lessons: [
                        {
                            title: "Bài 27: Tranh làng Hồ",
                            sections: [
                                { title: "Đọc: Tranh làng Hồ", url: "1527-tranh-lang-ho.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 28: Tập hát quan họ",
                            sections: [
                                { title: "Đọc: Tập hát quan họ", url: "1528-tap-hat-quan-ho.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 16, name: "Tuần 16", lessons: [
                        {
                            title: "Bài 29: Phim hoạt hình Chú ốc sên bay",
                            sections: [
                                { title: "Đọc: Phim hoạt hình Chú ốc sên bay", url: "1629-phim-hoat-hinh-chu-oc-sen-bay.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 30: Nghệ thuật múa ba lê",
                            sections: [
                                { title: "Đọc: Nghệ thuật múa ba lê", url: "1630-nghe-thuat-mua-ba-le.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 17, name: "Tuần 17", lessons: [
                        {
                            title: "Bài 31: Một ngôi chùa độc đáo",
                            sections: [
                                { title: "Đọc: Một ngôi chùa độc đáo", url: "1731-mot-ngoi-chua-doc-dao.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 32: Sự tích chú Tễu",
                            sections: [
                                { title: "Đọc: Sự tích chú Tễu", url: "1732-su-tich-chu-teu.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            theme: "Ôn tập cuối học kỳ 1",
            weeks: [
                {
                    id: 18, name: "Tuần 18: Ôn tập", lessons: [
                        { title: "Ôn tập và kiểm tra HK1", url: "#" }
                    ]
                }
            ]
        }
    ],
    "Học kỳ 2": [
        {
            theme: "Chủ điểm 5: Vẻ đẹp cuộc sống",
            weeks: [
                {
                    id: 19, name: "Tuần 19", lessons: [
                        {
                            title: "Bài 1: Tiếng hát của người đá",
                            sections: [
                                { title: "Đọc: Tiếng hát của người đá", url: "191-tieng-hat-nguoi-da.html" },
                                { title: "Luyện từ và câu: Câu đơn và câu ghép", url: "#" },
                                { title: "Viết: Tìm hiểu cách viết bài văn tả người", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 2: Thái sư Trần Thủ Độ",
                            sections: [
                                { title: "Đọc: Thái sư Trần Thủ Độ", url: "192-thai-su-tran-thu-do.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 20, name: "Tuần 20", lessons: [
                        {
                            title: "Bài 3: Nhà tài trợ đặc biệt của cách mạng",
                            sections: [
                                { title: "Đọc: Nhà tài trợ đặc biệt của cách mạng", url: "201-nha-tai-tro-dac-biet.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 4: Trí dũng song toàn",
                            sections: [
                                { title: "Đọc: Trí dũng song toàn", url: "202-tri-dung-song-toan.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 21, name: "Tuần 21", lessons: [
                        {
                            title: "Bài 5: Tiếng rao đêm",
                            sections: [
                                { title: "Đọc: Tiếng rao đêm", url: "211-tieng-rao-dem.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 6: Lập làng giữ biển",
                            sections: [
                                { title: "Đọc: Lập làng giữ biển", url: "212-lap-lang-giu-bien.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 22, name: "Tuần 22", lessons: [
                        {
                            title: "Bài 7: Cao Bằng",
                            sections: [
                                { title: "Đọc: Cao Bằng", url: "221-cao-bang.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 8: Phân xử tài tình",
                            sections: [
                                { title: "Đọc: Phân xử tài tình", url: "222-phan-xu-tai-tinh.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            theme: "Chủ điểm 6: Hương sắc trăm miền",
            weeks: [
                {
                    id: 23, name: "Tuần 23", lessons: [
                        {
                            title: "Bài 9: Chú đi tuần",
                            sections: [
                                { title: "Đọc: Chú đi tuần", url: "231-chu-di-tuan.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 10: Luật tục xưa của người Ê-đê",
                            sections: [
                                { title: "Đọc: Luật tục xưa của người Ê-đê", url: "232-luat-tuc-xua-cua-nguoi-e-de.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 24, name: "Tuần 24", lessons: [
                        {
                            title: "Bài 11: Hộp quà màu thiên thanh",
                            sections: [
                                { title: "Đọc: Hộp quà màu thiên thanh", url: "241-hop-qua-mau-thien-thanh.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 12: Tác phẩm của Si-vô-nôp",
                            sections: [
                                { title: "Đọc: Tác phẩm của Si-vô-nôp", url: "242-tac-pham-cua-si-vo-nop.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 25, name: "Tuần 25", lessons: [
                        {
                            title: "Bài 13: Phong cảnh đền Hùng",
                            sections: [
                                { title: "Đọc: Phong cảnh đền Hùng", url: "251-phong-canh-den-hung.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 14: Cửa sông",
                            sections: [
                                { title: "Đọc: Cửa sông", url: "252-cua-song.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 26, name: "Tuần 26", lessons: [
                        {
                            title: "Bài 15: Nghĩa thầy trò",
                            sections: [
                                { title: "Đọc: Nghĩa thầy trò", url: "261-nghia-thay-tro.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 16: Hội thổi cơm thi ở Đồng Vân",
                            sections: [
                                { title: "Đọc: Hội thổi cơm thi ở Đồng Vân", url: "262-hoi-thoi-com-thi-o-dong-van.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            theme: "Ôn tập giữa học kỳ 2",
            weeks: [
                {
                    id: 27, name: "Tuần 27: Ôn tập", lessons: [
                        { title: "Ôn tập tiết 1-2", url: "#" },
                        { title: "Ôn tập tiết 3-4", url: "#" },
                        { title: "Ôn tập tiết 5-6-7", url: "#" }
                    ]
                }
            ]
        },
        {
            theme: "Chủ điểm 7: Tiếp bước cha ông",
            weeks: [
                {
                    id: 28, name: "Tuần 28", lessons: [
                        {
                            title: "Bài 17: Nghìn năm văn hiến",
                            sections: [
                                { title: "Đọc: Nghìn năm văn hiến", url: "281-nghin-nam-van-hien.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 18: Người thầy của muôn đời",
                            sections: [
                                { title: "Đọc: Người thầy của muôn đời", url: "282-nguoi-thay-cua-muon-doi.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 29, name: "Tuần 29", lessons: [
                        {
                            title: "Bài 19: Danh y Tuệ Tĩnh",
                            sections: [
                                { title: "Đọc: Danh y Tuệ Tĩnh", url: "291-danh-y-tue-tinh.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 20: Cụ Đồ Chiểu",
                            sections: [
                                { title: "Đọc: Cụ Đồ Chiểu", url: "292-cu-do-chieu.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 30, name: "Tuần 30", lessons: [
                        {
                            title: "Bài 21: Anh hùng Lao động Trần Đại Nghĩa",
                            sections: [
                                { title: "Đọc: Anh hùng Lao động Trần Đại Nghĩa", url: "301-tran-dai-nghia.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 22: Bộ đội về làng",
                            sections: [
                                { title: "Đọc: Bộ đội về làng", url: "302-bo-doi-ve-lang.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 31, name: "Tuần 31", lessons: [
                        {
                            title: "Bài 23: Về ngôi nhà đang xây",
                            sections: [
                                { title: "Đọc: Về ngôi nhà đang xây", url: "311-ve-ngoi-nha-dang-xay.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 24: Việt Nam quê hương ta",
                            sections: [
                                { title: "Đọc: Việt Nam quê hương ta", url: "312-viet-nam-que-huong-ta.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            theme: "Chủ điểm 8: Thế giới của chúng ta",
            weeks: [
                {
                    id: 32, name: "Tuần 32", lessons: [
                        {
                            title: "Bài 25: Bài ca Trái Đất",
                            sections: [
                                { title: "Đọc: Bài ca Trái Đất", url: "321-bai-ca-trai-dat.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 26: Những con hạc giấy",
                            sections: [
                                { title: "Đọc: Những con hạc giấy", url: "322-nhung-con-hac-giay.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 33, name: "Tuần 33", lessons: [
                        {
                            title: "Bài 27: Một người hùng thầm lặng",
                            sections: [
                                { title: "Đọc: Một người hùng thầm lặng", url: "331-mot-nguoi-hung-tham-lang.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 28: Giờ Trái Đất",
                            sections: [
                                { title: "Đọc: Giờ Trái Đất", url: "332-gio-trai-dat.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                },
                {
                    id: 34, name: "Tuần 34", lessons: [
                        {
                            title: "Bài 29: Điện thoại di động",
                            sections: [
                                { title: "Đọc: Điện thoại di động", url: "341-dien-thoai-di-dong.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        },
                        {
                            title: "Bài 30: Thành phố thông minh Mát-xđa",
                            sections: [
                                { title: "Đọc: Thành phố thông minh Mát-xđa", url: "342-thanh-pho-thong-minh-mat-xda.html" },
                                { title: "Luyện từ và câu", url: "#" },
                                { title: "Viết", url: "#" }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            theme: "Ôn tập cuối học kỳ 2",
            weeks: [
                {
                    id: 35, name: "Tuần 35: Ôn tập", lessons: [
                        { title: "Ôn tập và kiểm tra HK2", url: "35.html" }
                    ]
                }
            ]
        }
    ]
};

// Inject CSS
const style = document.createElement('style');
style.textContent = `
    :root {
        --sidebar-width: 320px;
    }
    
    /* Floating Button */
    #floating-menu-btn {
        position: fixed;
        left: 0;
        top: 50%;
        transform: translateY(-50%) translateX(0);
        z-index: 10002;
        width: 45px;
        height: 90px;
        background: white;
        border-radius: 0 45px 45px 0;
        box-shadow: 4px 0 20px rgba(37, 99, 235, 0.15);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border: 2px solid #e5e7eb;
        border-left: none;
        user-select: none;
    }
    #floating-menu-btn:hover {
        background: #eff6ff;
        box-shadow: 4px 0 25px rgba(37, 99, 235, 0.25);
    }
    #floating-menu-btn.active {
        transform: translateY(-50%) translateX(var(--sidebar-width));
    }
    #floating-menu-btn svg {
        color: #2563eb;
        stroke-width: 3;
        width: 24px;
        height: 24px;
    }
    
    /* Menu Container */
    #floating-sidebar {
        position: fixed;
        left: 0;
        top: 0;
        width: var(--sidebar-width);
        height: 100vh;
        background: rgba(255, 255, 255, 0.98);
        box-shadow: 4px 0 20px rgba(0,0,0,0.1);
        z-index: 10001;
        transform: translateX(-100%);
        transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        flex-direction: column;
        border-right: 1px solid rgba(0,0,0,0.05);
        font-family: 'Nunito', sans-serif;
    }
    
    #floating-sidebar.active {
        transform: translateX(0);
    }

    /* Menu Header */
    .menu-header {
        padding: 20px;
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 10px rgba(37, 99, 235, 0.2);
    }
    
    .close-btn {
        background: rgba(255,255,255,0.2);
        border: none;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s;
    }
    .close-btn:hover {
        background: rgba(255,255,255,0.4);
    }

    /* Menu Content */
    .menu-content {
        flex: 1;
        overflow-y: auto;
        padding: 10px;
    }

    /* Level 1: Theme */
    .menu-section-title {
        font-size: 11px;
        font-weight: 800;
        text-transform: uppercase;
        color: #94a3b8;
        letter-spacing: 0.1em;
        padding: 15px 10px 5px;
    }

    .theme-item { margin-bottom: 5px; }

    .theme-btn {
        width: 100%;
        text-align: left;
        padding: 12px 15px;
        background: transparent;
        border: none;
        font-weight: 700;
        color: #1e293b;
        cursor: pointer;
        border-radius: 10px;
        transition: all 0.2s;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .theme-btn:hover { background: #f1f5f9; color: #2563eb; }
    .theme-btn.active { background: #eff6ff; color: #2563eb; }

    .theme-content {
        display: none;
        padding-left: 10px;
        animation: slideDown 0.3s ease-out;
        border-left: 1px solid #e2e8f0;
        margin-left: 15px;
    }
    .theme-content.open { display: block; }

    /* Level 2: Week */
    .week-item { margin: 2px 0; }

    .week-btn {
        width: 100%;
        text-align: left;
        padding: 8px 10px;
        font-size: 14px;
        font-weight: 600;
        color: #475569;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .week-btn:hover { background: #f8fafc; color: #0f172a; }
    .week-btn.active { color: #2563eb; background: #eff6ff; }

    .week-content {
        display: none;
        padding-left: 10px;
        margin-left: 5px;
        border-left: 1px solid #e2e8f0;
    }
    .week-content.open { display: block; }

    /* Level 3: Lesson */
    .lesson-item { margin: 2px 0; }

    .lesson-btn {
        width: 100%;
        text-align: left;
        padding: 6px 10px;
        font-size: 13px;
        font-weight: 500;
        color: #64748b;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .lesson-btn:hover { color: #2563eb; background: #f1f5f9; }
    .lesson-btn.active { color: #2563eb; font-weight: 600; }

    .lesson-content {
        display: none;
        padding-left: 10px;
        margin-left: 5px;
        border-left: 1px solid #e2e8f0;
    }
    .lesson-content.open { display: block; }

    /* Level 4: Section (Leaf) */
    .section-link {
        display: block;
        padding: 5px 10px;
        font-size: 12px;
        color: #64748b;
        text-decoration: none;
        transition: color 0.2s;
        border-radius: 4px;
        position: relative;
    }
    .section-link:hover { color: #2563eb; background: #f8fafc; }
    .section-link.current {
        color: #2563eb;
        font-weight: 700;
        background: #eff6ff;
    }
    .section-link.current::before {
        content: '';
        position: absolute;
        left: -16px;
        top: 50%;
        transform: translateY(-50%);
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: #2563eb;
    }

    /* Scrollbar */
    .menu-content::-webkit-scrollbar { width: 4px; }
    .menu-content::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

    @keyframes slideDown {
        from { opacity: 0; transform: translateY(-5px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .icon-chevron { transition: transform 0.2s; width: 14px; height: 14px; }
`;
document.head.appendChild(style);

// Inject HTML
const floatingBtn = document.createElement('button');
floatingBtn.id = 'floating-menu-btn';
floatingBtn.innerHTML = `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
`;

const sidebar = document.createElement('div');
sidebar.id = 'floating-sidebar';
sidebar.innerHTML = `
    <div class="menu-header">
        <span class="font-bold text-lg">Mục lục</span>
        <button class="close-btn" onclick="toggleMenu()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
    </div>
    <div class="menu-content" id="menu-content"></div>
`;

document.body.appendChild(floatingBtn);
document.body.appendChild(sidebar);

// Logic
// Logic
function toggleMenu(forceState) {
    const sidebar = document.getElementById('floating-sidebar');
    const floatingBtn = document.getElementById('floating-menu-btn');
    if (!sidebar || !floatingBtn) return;

    const isActive = forceState !== undefined ? forceState : !sidebar.classList.contains('active');

    if (isActive) {
        sidebar.classList.add('active');
        floatingBtn.classList.add('active');
        floatingBtn.innerHTML = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>`; // Chevron Left
    } else {
        sidebar.classList.remove('active');
        floatingBtn.classList.remove('active');
        floatingBtn.innerHTML = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>`; // Chevron Right
    }
}
// Ensure global access
window.toggleMenu = toggleMenu;

floatingBtn.addEventListener('click', toggleMenu);



// Render Menu
// Render Menu
const menuContent = document.getElementById('menu-content');

// Helper to create a chevron icon
const createChevron = () => `<svg class="icon-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>`;

function renderCurriculumTo(container, autoExpand = false) {
    if (!container) return;

    container.innerHTML = ''; // Clear existing content if any

    Object.entries(curriculumData).forEach(([semesterName, themes]) => {
        // 0. Semester Title
        const semTitle = document.createElement('div');
        semTitle.className = 'menu-section-title';
        semTitle.innerText = semesterName;
        // Adjust style slightly for top menu if needed, but keeping consistent is good
        container.appendChild(semTitle);

        themes.forEach((theme) => {
            // 1. Theme Item
            const themeItem = document.createElement('div');
            themeItem.className = 'theme-item';

            const themeBtn = document.createElement('button');
            themeBtn.className = 'theme-btn';
            themeBtn.innerHTML = `<span>${theme.theme}</span>${createChevron()}`;

            const themeContent = document.createElement('div');
            themeContent.className = 'theme-content';

            theme.weeks.forEach(week => {
                // 2. Week Item
                const weekItem = document.createElement('div');
                weekItem.className = 'week-item';

                const weekBtn = document.createElement('button');
                weekBtn.className = 'week-btn';
                weekBtn.innerHTML = `<span>${week.name}</span>${createChevron()}`;

                const weekContent = document.createElement('div');
                weekContent.className = 'week-content';

                let isCurrentInWeek = false;

                if (week.lessons && week.lessons.length > 0) {
                    week.lessons.forEach(lesson => {
                        // 3. Lesson Item
                        const lessonItem = document.createElement('div');
                        lessonItem.className = 'lesson-item';

                        const lessonBtn = document.createElement('button');
                        lessonBtn.className = 'lesson-btn';
                        lessonBtn.innerHTML = `<span>${lesson.title}</span>${createChevron()}`;

                        const lessonContentDiv = document.createElement('div');
                        lessonContentDiv.className = 'lesson-content';

                        let isCurrentInLesson = false;

                        // 4. Sections (The clickable links)
                        const sections = lesson.sections || [
                            { title: "Vào bài học", url: lesson.url }
                        ];

                        sections.forEach(section => {
                            const sectionLink = document.createElement('a');
                            sectionLink.className = 'section-link';
                            sectionLink.href = section.url;
                            // Add bold label if title contains colon (e.g. "Đọc: ...")
                            const titleParts = section.title.split(':');
                            if (titleParts.length > 1) {
                                sectionLink.innerHTML = `<strong>${titleParts[0]}:</strong> ${titleParts.slice(1).join(':')}`;
                            } else {
                                sectionLink.innerText = section.title;
                            }

                            // Check active
                            const isCurrent = window.location.pathname.endsWith(section.url) || (section.url !== '#' && window.location.href.includes(section.url));
                            if (isCurrent) {
                                sectionLink.classList.add('current');
                                isCurrentInLesson = true;
                                isCurrentInWeek = true;
                            }

                            lessonContentDiv.appendChild(sectionLink);
                        });

                        lessonItem.appendChild(lessonBtn);
                        lessonItem.appendChild(lessonContentDiv);
                        weekContent.appendChild(lessonItem);

                        // Accordion Logic for Lesson
                        if (isCurrentInLesson) {
                            lessonContentDiv.classList.add('open');
                            lessonBtn.classList.add('active');
                            lessonBtn.querySelector('svg').style.transform = 'rotate(180deg)';
                        }

                        lessonBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            const isOpen = lessonContentDiv.classList.contains('open');
                            lessonContentDiv.classList.toggle('open');
                            lessonBtn.classList.toggle('active');
                            lessonBtn.querySelector('svg').style.transform = isOpen ? 'rotate(0deg)' : 'rotate(180deg)';
                        });
                    });
                } else {
                    weekContent.innerHTML = `<div class="lesson-link italic text-xs">Đang cập nhật...</div>`;
                }

                weekItem.appendChild(weekBtn);
                weekItem.appendChild(weekContent);
                themeContent.appendChild(weekItem);

                // Accordion Logic for Week
                if (isCurrentInWeek) {
                    weekContent.classList.add('open');
                    weekBtn.classList.add('active');
                    weekBtn.querySelector('svg').style.transform = 'rotate(180deg)';
                }

                weekBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const isOpen = weekContent.classList.contains('open');
                    weekContent.classList.toggle('open');
                    weekBtn.classList.toggle('active');
                    weekBtn.querySelector('svg').style.transform = isOpen ? 'rotate(0deg)' : 'rotate(180deg)';
                });
            });

            themeItem.appendChild(themeBtn);
            themeItem.appendChild(themeContent);
            container.appendChild(themeItem);

            // Accordion Logic for Theme - Expand if week inside is expanded
            if (themeContent.querySelector('.week-content.open')) {
                themeContent.classList.add('open');
                themeBtn.classList.add('active');
                themeBtn.querySelector('svg').style.transform = 'rotate(180deg)';
                if (autoExpand) {
                    toggleMenu(true); // Correctly sync sidebar and button
                }
            }

            themeBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                const isOpen = themeContent.classList.contains('open');
                themeContent.classList.toggle('open');
                themeBtn.classList.toggle('active');
                themeBtn.querySelector('svg').style.transform = isOpen ? 'rotate(0deg)' : 'rotate(180deg)';
            });
        });
    });
}

// 1. Render to Floating Sidebar
renderCurriculumTo(menuContent, false);

// 2. Render to Top Menu (if exists)
const topMenuDropdown = document.getElementById('top-menu-lessons-dropdown');
if (topMenuDropdown) {
    renderCurriculumTo(topMenuDropdown, false);

    // Toggle Logic for Top Menu
    const topMenuBtn = document.getElementById('top-menu-lesson-btn');
    const topMenuChevron = document.getElementById('top-menu-chevron');

    if (topMenuBtn) {
        topMenuBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const isHidden = topMenuDropdown.classList.contains('hidden');
            if (isHidden) {
                topMenuDropdown.classList.remove('hidden');
                if (topMenuChevron) topMenuChevron.style.transform = 'rotate(180deg)';
            } else {
                topMenuDropdown.classList.add('hidden');
                if (topMenuChevron) topMenuChevron.style.transform = 'rotate(0deg)';
            }
        });
    }
}

// Close menu when clicking outside
document.addEventListener('click', (e) => {
    // Sidebar logic
    if (sidebar && !sidebar.contains(e.target) && !floatingBtn.contains(e.target) && sidebar.classList.contains('active')) {
        toggleMenu();
    }

    // Top Menu logic
    const topMenuDropdown = document.getElementById('top-menu-lessons-dropdown');
    const topMenuBtn = document.getElementById('top-menu-lesson-btn');
    const topMenuChevron = document.getElementById('top-menu-chevron');

    if (topMenuDropdown && topMenuBtn && !topMenuDropdown.contains(e.target) && !topMenuBtn.contains(e.target) && !topMenuDropdown.classList.contains('hidden')) {
        topMenuDropdown.classList.add('hidden');
        if (topMenuChevron) topMenuChevron.style.transform = 'rotate(0deg)';
    }
});
