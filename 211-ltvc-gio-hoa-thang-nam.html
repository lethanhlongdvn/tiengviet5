<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduRobot - Luy·ªán t·ª´ v√† c√¢u l·ªõp 5</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --primary: #4A90E2; --secondary: #F39C12; --correct: #2ED573; --wrong: #FF4757; --bg: #F0F7FF;
        }
        body { font-family: 'Quicksand', sans-serif; background: var(--bg); margin: 0; padding: 10px; }
        .master-container { max-width: 900px; margin: 20px auto; background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; }
        
        /* Header & Navigation */
        .header { background: var(--primary); color: white; padding: 25px; text-align: center; }
        .header h1 { margin: 0; font-size: 1.6rem; text-transform: uppercase; }
        
        .tab-bar { display: flex; background: #f8f9fa; border-bottom: 1px solid #eee; }
        .tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; font-weight: bold; transition: 0.3s; color: #666; }
        .tab.active { background: white; color: var(--primary); border-top: 4px solid var(--primary); }

        .content-section { padding: 30px; display: none; min-height: 400px; }
        .content-section.active { display: block; }

        /* UI Components */
        .question-row { background: #fff; border: 1px solid #eee; border-radius: 12px; padding: 20px; margin-bottom: 20px; border-left: 5px solid var(--primary); position: relative; }
        .instruction { font-size: 0.95rem; color: #666; margin-bottom: 15px; font-style: italic; }

        /* B√†i 1: Word selection */
        .sentence-content { font-size: 1.2rem; line-height: 2.2; margin-bottom: 15px; }
        .word { display: inline-block; padding: 0 6px; cursor: pointer; border-radius: 5px; transition: 0.2s; border-bottom: 2px solid transparent; }
        .word:hover { background: #f0f0f0; }
        .word.selected { background: #fff3cd; border-bottom-color: var(--secondary); }
        .word.is-correct { background: var(--correct) !important; color: white; }
        .word.is-wrong { background: var(--wrong) !important; color: white; }

        /* B√†i 2: Dropdown & Slots */
        .slot { color: var(--secondary); font-weight: bold; border-bottom: 2px dashed var(--secondary); padding: 0 10px; transition: 0.3s; }
        select { padding: 8px; border-radius: 8px; border: 1px solid #ddd; font-family: inherit; margin: 0 10px; }

        /* B√†i 3 & 4: Inputs */
        textarea, input[type="text"] { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 10px; font-family: inherit; font-size: 1rem; margin-top: 10px; box-sizing: border-box; }
        .ai-feedback { margin-top: 15px; padding: 15px; border-radius: 10px; background: #f9f9f9; display: none; border-left: 4px solid var(--primary); }

        /* Buttons */
        .btn-group { display: flex; gap: 10px; justify-content: flex-end; margin-top: 15px; }
        .btn { padding: 10px 20px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: inherit; }
        .btn-check { background: var(--primary); color: white; }
        .btn-reset { background: #eee; color: #666; }
        .btn:active { transform: scale(0.95); }
        .status-msg { font-weight: bold; font-size: 0.9rem; margin-right: auto; align-self: center; }
    </style>
</head>
<body>

<div class="master-container">
    <div class="header">
        <h1>ü§ñ EduRobot: C√°ch n·ªëi c√°c v·∫ø c√¢u gh√©p</h1>
    </div>

    <div class="tab-bar">
        <div class="tab active" onclick="openTab(0)">B√†i 1</div>
        <div class="tab" onclick="openTab(1)">B√†i 2</div>
        <div class="tab" onclick="openTab(2)">B√†i 3</div>
        <div class="tab" onclick="openTab(3)">B√†i 4</div>
    </div>

    <div class="content-section active" id="sec-0">
        <p class="instruction">H∆∞·ªõng d·∫´n: Em h√£y nh·∫•n ch·ªçn c√°c c·∫∑p k·∫øt t·ª´ trong m·ªói c√¢u sau.</p>
        
        <div class="question-row" id="q1a" data-ans="B·ªüi,n√™n">
            <div class="sentence-content"><b>a.</b> <span>B·ªüi</span> <span>t√¥i</span> <span>ƒÉn</span> <span>u·ªëng</span> <span>ƒëi·ªÅu</span> <span>ƒë·ªô</span> <span>v√†</span> <span>l√†m</span> <span>vi·ªác</span> <span>c√≥</span> <span>ch·ª´ng</span> <span>m·ª±c</span> <span>n√™n</span> <span>t√¥i</span> <span>ch√≥ng</span> <span>l·ªõn</span> <span>l·∫Øm.</span></div>
            <div class="btn-group"><span class="status-msg"></span><button class="btn btn-reset" onclick="reset1('q1a')">L√†m l·∫°i</button><button class="btn btn-check" onclick="check1('q1a')">Ki·ªÉm tra</button></div>
        </div>

        <div class="question-row" id="q1b" data-ans="M·∫∑c d√π,nh∆∞ng">
            <div class="sentence-content"><b>b.</b> <span>M·∫∑c d√π</span> <span>ch√∫ng</span> <span>t√¥i</span> <span>v·∫´n</span> <span>ch∆°i</span> <span>v·ªõi</span> <span>nhau</span> <span>nh∆∞ng</span> <span>th·ªùi</span> <span>gian</span> <span>Pam</span> <span>d√†nh</span> <span>cho</span> <span>t√¥i</span> <span>kh√¥ng</span> <span>c√≤n</span> <span>nhi·ªÅu.</span></div>
            <div class="btn-group"><span class="status-msg"></span><button class="btn btn-reset" onclick="reset1('q1b')">L√†m l·∫°i</button><button class="btn btn-check" onclick="check1('q1b')">Ki·ªÉm tra</button></div>
        </div>

        <div class="question-row" id="q1c" data-ans="N·∫øu,th√¨">
            <div class="sentence-content"><b>c.</b> <span>N·∫øu</span> <span>hoa</span> <span>mua</span> <span>c√≥</span> <span>m√†u</span> <span>t√≠m</span> <span>h·ªìng</span> <span>th√¨</span> <span>hoa</span> <span>sim</span> <span>t√≠m</span> <span>nh·∫°t,</span> <span>ph∆°n</span> <span>ph·ªõt</span> <span>nh∆∞</span> <span>m√°</span> <span>con</span> <span>g√°i.</span></div>
            <div class="btn-group"><span class="status-msg"></span><button class="btn btn-reset" onclick="reset1('q1c')">L√†m l·∫°i</button><button class="btn btn-check" onclick="check1('q1c')">Ki·ªÉm tra</button></div>
        </div>
    </div>

    <div class="content-section" id="sec-1">
        <p class="instruction">H∆∞·ªõng d·∫´n: Ch·ªçn c·∫∑p t·ª´ h√¥ ·ª©ng ph√π h·ª£p ƒëi·ªÅn v√†o b√¥ng hoa.</p>
        
        <div class="question-row" id="q2a" data-ans="ch∆∞a-ƒë√£">
            <div class="sentence-content">a. Ng√†y <span class="slot">...</span> t·∫Øt h·∫≥n, trƒÉng <span class="slot">...</span> l√™n r·ªìi.</div>
            <div class="btn-group">
                <select onchange="update2('q2a', this.value)">
                    <option value="">-- Ch·ªçn c·∫∑p t·ª´ --</option>
                    <option value="ƒë√¢u-ƒë√≥">ƒë√¢u... ƒë√≥</option>
                    <option value="ch∆∞a-ƒë√£">ch∆∞a... ƒë√£</option>
                    <option value="bao nhi√™u-b·∫•y nhi√™u">bao nhi√™u... b·∫•y nhi√™u</option>
                </select>
                <button class="btn btn-check" onclick="check2('q2a')">Ki·ªÉm tra</button>
            </div>
        </div>

        <div class="question-row" id="q2b" data-ans="ƒë√¢u-ƒë√≥">
            <div class="sentence-content">b. TrƒÉng ƒëi ƒë·∫øn <span class="slot">...</span>, l≈©y tre ƒë∆∞·ª£c t·∫Øm ƒë·∫´m m√†u s·ªØa ƒë·∫øn <span class="slot">...</span>.</div>
            <div class="btn-group">
                <select onchange="update2('q2b', this.value)">
                    <option value="">-- Ch·ªçn c·∫∑p t·ª´ --</option>
                    <option value="ƒë√¢u-ƒë√≥">ƒë√¢u... ƒë√≥</option>
                    <option value="ch∆∞a-ƒë√£">ch∆∞a... ƒë√£</option>
                    <option value="bao nhi√™u-b·∫•y nhi√™u">bao nhi√™u... b·∫•y nhi√™u</option>
                </select>
                <button class="btn btn-check" onclick="check2('q2b')">Ki·ªÉm tra</button>
            </div>
        </div>

        <div class="question-row" id="q2c" data-ans="bao nhi√™u-b·∫•y nhi√™u">
            <div class="sentence-content">c. N∆∞·ªõc d√¢ng l√™n cao <span class="slot">...</span>, S∆°n Tinh l·∫°i l√†m cho ƒë·ªìi, n√∫i m·ªçc cao l√™n <span class="slot">...</span>.</div>
            <div class="btn-group">
                <select onchange="update2('q2c', this.value)">
                    <option value="">-- Ch·ªçn c·∫∑p t·ª´ --</option>
                    <option value="ƒë√¢u-ƒë√≥">ƒë√¢u... ƒë√≥</option>
                    <option value="ch∆∞a-ƒë√£">ch∆∞a... ƒë√£</option>
                    <option value="bao nhi√™u-b·∫•y nhi√™u">bao nhi√™u... b·∫•y nhi√™u</option>
                </select>
                <button class="btn btn-check" onclick="check2('q2c')">Ki·ªÉm tra</button>
            </div>
        </div>
    </div>

    <div class="content-section" id="sec-2">
        <p class="instruction">H∆∞·ªõng d·∫´n: Em h√£y vi·∫øt ti·∫øp v·∫ø c√¢u c√≤n thi·∫øu ƒë·ªÉ t·∫°o th√†nh c√¢u gh√©p.</p>
        <div class="question-box">
            <div class="question-row">
                <p><b>a.</b> V√†o d·ªãp l·ªÖ M·ª´ng xu√¢n, ch·∫≥ng nh·ªØng tr·∫ª em ƒë∆∞·ª£c vui ƒë√πa tho·∫£ th√≠ch m√†...</p>
                <input type="text" id="ai-3a" placeholder="Vi·∫øt ti·∫øp v√†o ƒë√¢y...">
                <div class="btn-group"><button class="btn btn-check" onclick="askAI('3a')">EduRobot Ch·∫•m B√†i</button></div>
                <div class="ai-feedback" id="fb-3a"></div>
            </div>
            <div class="question-row">
                <p><b>b.</b> M·∫∑c d√π thi√™n nhi√™n kh·∫Øc nghi·ªát nh∆∞ng...</p>
                <input type="text" id="ai-3b" placeholder="Vi·∫øt ti·∫øp v√†o ƒë√¢y...">
                <div class="btn-group"><button class="btn btn-check" onclick="askAI('3b')">EduRobot Ch·∫•m B√†i</button></div>
                <div class="ai-feedback" id="fb-3b"></div>
            </div>
        </div>
    </div>

    <div class="content-section" id="sec-3">
        <p class="instruction">H∆∞·ªõng d·∫´n: Em h√£y t·ª± ƒë·∫∑t c√¢u gh√©p theo c√°c y√™u c·∫ßu b√™n d∆∞·ªõi.</p>
        <div class="question-row">
            <p><b>a.</b> S·ª≠ d·ª•ng c·∫∑p k·∫øt t·ª´: <b>V√¨... n√™n...</b> (ho·∫∑c B·ªüi... n√™n..., Nh·ªù... m√†...)</p>
            <textarea id="ai-4a" rows="2" placeholder="Nh·∫≠p c√¢u c·ªßa em..."></textarea>
            <div class="btn-group"><button class="btn btn-check" onclick="askAI('4a')">EduRobot Ch·∫•m B√†i</button></div>
            <div class="ai-feedback" id="fb-4a"></div>
        </div>
        <div class="question-row">
            <p><b>c.</b> S·ª≠ d·ª•ng c·∫∑p t·ª´ h√¥ ·ª©ng: <b>v·ª´a... ƒë√£...</b>, <b>c√†ng... c√†ng...</b></p>
            <textarea id="ai-4c" rows="2" placeholder="Nh·∫≠p c√¢u c·ªßa em..."></textarea>
            <div class="btn-group"><button class="btn btn-check" onclick="askAI('4c')">EduRobot Ch·∫•m B√†i</button></div>
            <div class="ai-feedback" id="fb-4c"></div>
        </div>
    </div>
</div>

<script>
    // Ph√≥ng ph√°o hoa
    function celebrate() {
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
    }

    // Chuy·ªÉn Tab
    function openTab(n) {
        document.querySelectorAll('.tab').forEach((t, i) => t.classList.toggle('active', i === n));
        document.querySelectorAll('.content-section').forEach((s, i) => s.classList.toggle('active', i === n));
    }

    // Kh·ªüi t·∫°o B√†i 1
    document.querySelectorAll('#sec-0 span').forEach(s => {
        s.classList.add('word');
        s.onclick = function() { 
            if(!this.closest('.question-row').classList.contains('locked')) this.classList.toggle('selected');
        }
    });

    function check1(id) {
        const row = document.getElementById(id);
        const ans = row.getAttribute('data-ans').split(',');
        const words = row.querySelectorAll('.word');
        let right = 0, totalAns = ans.length, error = false;

        words.forEach(w => {
            const txt = w.innerText.replace(/[.,]/g,"");
            if(w.classList.contains('selected')) {
                if(ans.includes(txt)) { w.classList.add('is-correct'); right++; }
                else { w.classList.add('is-wrong'); error = true; }
            } else if(ans.includes(txt)) { error = true; }
        });

        if(!error && right === totalAns) { celebrate(); row.classList.add('locked'); }
    }

    function reset1(id) {
        const row = document.getElementById(id);
        row.classList.remove('locked');
        row.querySelectorAll('.word').forEach(w => w.classList.remove('selected','is-correct','is-wrong'));
    }

    // B√†i 2
    function update2(id, val) {
        const slots = document.getElementById(id).querySelectorAll('.slot');
        if(!val) { slots[0].innerText = "..."; slots[1].innerText = "..."; return; }
        const p = val.split('-');
        slots[0].innerText = p[0]; slots[1].innerText = p[1];
        slots.forEach(s => { s.style.color = "var(--secondary)"; s.style.borderBottomColor = "var(--secondary)"; });
    }

    function check2(id) {
        const row = document.getElementById(id);
        const sel = row.querySelector('select').value;
        const slots = row.querySelectorAll('.slot');
        if(sel === row.getAttribute('data-ans')) {
            slots.forEach(s => { s.style.color = "var(--correct)"; s.style.borderBottomColor = "var(--correct)"; });
            celebrate();
        } else {
            slots.forEach(s => { s.style.color = "var(--wrong)"; s.style.borderBottomColor = "var(--wrong)"; });
        }
    }

    // Gi·∫£ l·∫≠p AI (K·∫øt n·ªëi backend sau)
    function askAI(id) {
        const val = document.getElementById('ai-' + id).value;
        const fb = document.getElementById('fb-' + id);
        if(!val) return alert("Em h√£y vi·∫øt c√¢u tr∆∞·ªõc khi nh·ªù EduRobot ch·∫•m nh√©!");
        fb.style.display = "block";
        fb.innerHTML = "‚åõ <b>EduRobot:</b> ƒêang ph√¢n t√≠ch c√¢u c·ªßa em... (Vui l√≤ng k·∫øt n·ªëi Gemini API ƒë·ªÉ nh·∫≠n ph·∫£n h·ªìi th·∫≠t)";
    }
</script>
</body>
</html>